<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaCh3: BinningHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="MaCh3.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mach3logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MaCh3
   &#160;<span id="projectnumber">2.4.2</span>
   </div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classBinningHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BinningHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>KS: Class handling binning for multiple samples.  
 <a href="classBinningHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BinningHandler_8h_source.html">Samples/BinningHandler.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for BinningHandler:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classBinningHandler__coll__graph.svg" width="195" height="142"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5845762f079913d6c244155e61c6ee7e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a5845762f079913d6c244155e61c6ee7e">BinningHandler</a> ()</td></tr>
<tr class="memdesc:a5845762f079913d6c244155e61c6ee7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classBinningHandler.html#a5845762f079913d6c244155e61c6ee7e">More...</a><br /></td></tr>
<tr class="separator:a5845762f079913d6c244155e61c6ee7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d4efc297291aa0ed38455be365168e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a37d4efc297291aa0ed38455be365168e">~BinningHandler</a> ()</td></tr>
<tr class="memdesc:a37d4efc297291aa0ed38455be365168e"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor  <a href="classBinningHandler.html#a37d4efc297291aa0ed38455be365168e">More...</a><br /></td></tr>
<tr class="separator:a37d4efc297291aa0ed38455be365168e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65bd252090477f5f10e7f24275fec40a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a65bd252090477f5f10e7f24275fec40a">FindGlobalBin</a> (const int iSample, const std::vector&lt; const double * &gt; &amp;KinVar, const std::vector&lt; int &gt; &amp;NomBin) const</td></tr>
<tr class="memdesc:a65bd252090477f5f10e7f24275fec40a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Global bin including.  <a href="classBinningHandler.html#a65bd252090477f5f10e7f24275fec40a">More...</a><br /></td></tr>
<tr class="separator:a65bd252090477f5f10e7f24275fec40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac282b643f0063796f38fcaeac22ebbaa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#ac282b643f0063796f38fcaeac22ebbaa">FindNominalBin</a> (const int iSample, const int iDim, const double Var) const</td></tr>
<tr class="memdesc:ac282b643f0063796f38fcaeac22ebbaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the nominal bin for a given variable in a given sample and dimension.  <a href="classBinningHandler.html#ac282b643f0063796f38fcaeac22ebbaa">More...</a><br /></td></tr>
<tr class="separator:ac282b643f0063796f38fcaeac22ebbaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7f029677717974b5d076266221e5363"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#ad7f029677717974b5d076266221e5363">GetGlobalBinSafe</a> (const int iSample, const std::vector&lt; int &gt; &amp;Bins) const</td></tr>
<tr class="memdesc:ad7f029677717974b5d076266221e5363"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get gloabl bin based on sample, and dimension of each sample with additional checks.  <a href="classBinningHandler.html#ad7f029677717974b5d076266221e5363">More...</a><br /></td></tr>
<tr class="separator:ad7f029677717974b5d076266221e5363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a7d0fa33f3bb3e13bf327c884f6d57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a90a7d0fa33f3bb3e13bf327c884f6d57">GetBinSafe</a> (const int iSample, const std::vector&lt; int &gt; &amp;Bins) const</td></tr>
<tr class="memdesc:a90a7d0fa33f3bb3e13bf327c884f6d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get gloabl bin based on sample, and dimension of each sample without any safety checks.  <a href="classBinningHandler.html#a90a7d0fa33f3bb3e13bf327c884f6d57">More...</a><br /></td></tr>
<tr class="separator:a90a7d0fa33f3bb3e13bf327c884f6d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a207f774a69f371cd2d221e21bad6f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a9a207f774a69f371cd2d221e21bad6f4">GetNBins</a> () const</td></tr>
<tr class="memdesc:a9a207f774a69f371cd2d221e21bad6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total number of bins over all samples/kinematic bins etc.  <a href="classBinningHandler.html#a9a207f774a69f371cd2d221e21bad6f4">More...</a><br /></td></tr>
<tr class="separator:a9a207f774a69f371cd2d221e21bad6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979dc4e15fd4d3ce07bbd5ca32fc20ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a979dc4e15fd4d3ce07bbd5ca32fc20ad">GetNBins</a> (const int iSample) const</td></tr>
<tr class="memdesc:a979dc4e15fd4d3ce07bbd5ca32fc20ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total number of bins over for a given sample.  <a href="classBinningHandler.html#a979dc4e15fd4d3ce07bbd5ca32fc20ad">More...</a><br /></td></tr>
<tr class="separator:a979dc4e15fd4d3ce07bbd5ca32fc20ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9963ee65f16af2b34b2561d789e4c1a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#aa9963ee65f16af2b34b2561d789e4c1a">GetBinName</a> (const int GlobalBin) const</td></tr>
<tr class="memdesc:aa9963ee65f16af2b34b2561d789e4c1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get fancy name for a given bin, to help match it with global properties.  <a href="classBinningHandler.html#aa9963ee65f16af2b34b2561d789e4c1a">More...</a><br /></td></tr>
<tr class="separator:aa9963ee65f16af2b34b2561d789e4c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1bee1ea2db8bd13d1226910c3dcf142"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#ab1bee1ea2db8bd13d1226910c3dcf142">GetBinName</a> (const int iSample, const int SampleBin) const</td></tr>
<tr class="memdesc:ab1bee1ea2db8bd13d1226910c3dcf142"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get fancy name for a given bin, to help match it with global properties.  <a href="classBinningHandler.html#ab1bee1ea2db8bd13d1226910c3dcf142">More...</a><br /></td></tr>
<tr class="separator:ab1bee1ea2db8bd13d1226910c3dcf142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3320b03d108234daf51d1e5bc75c3b0f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a3320b03d108234daf51d1e5bc75c3b0f">GetBinName</a> (const int iSample, const std::vector&lt; int &gt; &amp;Bins) const</td></tr>
<tr class="memdesc:a3320b03d108234daf51d1e5bc75c3b0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get fancy name for a given bin, to help match it with global properties.  <a href="classBinningHandler.html#a3320b03d108234daf51d1e5bc75c3b0f">More...</a><br /></td></tr>
<tr class="separator:a3320b03d108234daf51d1e5bc75c3b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029d6111ff484b1161a06a3ce9ef6975"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a029d6111ff484b1161a06a3ce9ef6975">GetBinEdges</a> (const int iSample, const int iDim) const</td></tr>
<tr class="memdesc:a029d6111ff484b1161a06a3ce9ef6975"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get N-dim bin edges for a given sample.  <a href="classBinningHandler.html#a029d6111ff484b1161a06a3ce9ef6975">More...</a><br /></td></tr>
<tr class="separator:a029d6111ff484b1161a06a3ce9ef6975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af51681cde54b4558921b9dc8bc07d72a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#af51681cde54b4558921b9dc8bc07d72a">GetNAxisBins</a> (const int iSample, const int iDim) const</td></tr>
<tr class="memdesc:af51681cde54b4558921b9dc8bc07d72a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Number of N-axis bins for a given sample.  <a href="classBinningHandler.html#af51681cde54b4558921b9dc8bc07d72a">More...</a><br /></td></tr>
<tr class="separator:af51681cde54b4558921b9dc8bc07d72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb5f10e563cdb904a0026952e40a153a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#adb5f10e563cdb904a0026952e40a153a">IsUniform</a> (const int iSample) const</td></tr>
<tr class="memdesc:adb5f10e563cdb904a0026952e40a153a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells whether given sample is using unform binning.  <a href="classBinningHandler.html#adb5f10e563cdb904a0026952e40a153a">More...</a><br /></td></tr>
<tr class="separator:adb5f10e563cdb904a0026952e40a153a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3add6a17401b21279d695d23c7f94d86"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a3add6a17401b21279d695d23c7f94d86">GetSampleStartBin</a> (const int iSample) const</td></tr>
<tr class="memdesc:a3add6a17401b21279d695d23c7f94d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get bin number corresponding to where given sample starts.  <a href="classBinningHandler.html#a3add6a17401b21279d695d23c7f94d86">More...</a><br /></td></tr>
<tr class="separator:a3add6a17401b21279d695d23c7f94d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea885442a54a227775fafaf9ebef57c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#aea885442a54a227775fafaf9ebef57c2">GetSampleEndBin</a> (const int iSample) const</td></tr>
<tr class="memdesc:aea885442a54a227775fafaf9ebef57c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get bin number corresponding to where given sample ends.  <a href="classBinningHandler.html#aea885442a54a227775fafaf9ebef57c2">More...</a><br /></td></tr>
<tr class="separator:aea885442a54a227775fafaf9ebef57c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0665242a73544bb1addbbbcfe129c070"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="structBinInfo.html">BinInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a0665242a73544bb1addbbbcfe129c070">GetNonUniformBins</a> (const int iSample) const</td></tr>
<tr class="memdesc:a0665242a73544bb1addbbbcfe129c070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return NonUnifomr bins to for example check extent etc.  <a href="classBinningHandler.html#a0665242a73544bb1addbbbcfe129c070">More...</a><br /></td></tr>
<tr class="separator:a0665242a73544bb1addbbbcfe129c070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ddcc9c8bbf662c26bb977e3757cfc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a35ddcc9c8bbf662c26bb977e3757cfc4">SetGlobalBinNumbers</a> ()</td></tr>
<tr class="memdesc:a35ddcc9c8bbf662c26bb977e3757cfc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the GlobalOffset for each <a class="el" href="structSampleBinningInfo.html" title="KS: Struct storing all information required for sample binning.">SampleBinningInfo</a> to enable linearization of multiple 2D binning samples.  <a href="classBinningHandler.html#a35ddcc9c8bbf662c26bb977e3757cfc4">More...</a><br /></td></tr>
<tr class="separator:a35ddcc9c8bbf662c26bb977e3757cfc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b9cf265f24b8c911aad06996c005404"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a7b9cf265f24b8c911aad06996c005404">SetupSampleBinning</a> (const YAML::Node &amp;Settings, <a class="el" href="structSampleInfo.html">SampleInfo</a> &amp;SingleSample)</td></tr>
<tr class="memdesc:a7b9cf265f24b8c911aad06996c005404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to setup the binning of your sample histograms and the underlying arrays that get handled in fillArray() and fillArray_MP().  <a href="classBinningHandler.html#a7b9cf265f24b8c911aad06996c005404">More...</a><br /></td></tr>
<tr class="separator:a7b9cf265f24b8c911aad06996c005404"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af2423b4a7e2402f297d69f493f28d81d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#af2423b4a7e2402f297d69f493f28d81d">TotalNumberOfBins</a></td></tr>
<tr class="memdesc:af2423b4a7e2402f297d69f493f28d81d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of bins.  <a href="classBinningHandler.html#af2423b4a7e2402f297d69f493f28d81d">More...</a><br /></td></tr>
<tr class="separator:af2423b4a7e2402f297d69f493f28d81d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f42dcc81ff1119566f9f2e217fbb44"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structSampleBinningInfo.html">SampleBinningInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a></td></tr>
<tr class="memdesc:a59f42dcc81ff1119566f9f2e217fbb44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binning info for individual sample.  <a href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">More...</a><br /></td></tr>
<tr class="separator:a59f42dcc81ff1119566f9f2e217fbb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>KS: Class handling binning for multiple samples. </p>
<h2><a class="anchor" id="autotoc_md71"></a>
Introduction</h2>
<p>Each sample can define its own binning in an arbitrary number of dimensions. Internally, every sample's multi-dimensional binning is linearised into a single 1D array. All samples are then concatenated into one global bin index space, allowing the entire analysis to be treated as a single large vector of bins.</p>
<p>The concept of a "global bin" refers to the position of a bin in this linearised, analysis-wide bin index space. Local (sample) bins are always enumerated starting from zero, while global bins span all samples consecutively.</p>
<p>Example layout of global bins with offsets: </p><div class="fragment"><div class="line">Sample 0 (GlobalOffset = 0,  nBins = 4):</div>
<div class="line">  Local bins:   [0] [1] [2] [3]</div>
<div class="line">  Global bins:  [0] [1] [2] [3]</div>
<div class="line"> </div>
<div class="line">Sample 1 (GlobalOffset = 4,  nBins = 3):</div>
<div class="line">  Local bins:   [0] [1] [2]</div>
<div class="line">  Global bins:  [4] [5] [6]</div>
<div class="line"> </div>
<div class="line">Sample 2 (GlobalOffset = 7,  nBins = 2):</div>
<div class="line">  Local bins:   [0] [1]</div>
<div class="line">  Global bins:  [7] [8]</div>
<div class="line"> </div>
<div class="line">Global bin index space:</div>
<div class="line">------------------------------------------------</div>
<div class="line">| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |</div>
<div class="line">------------------------------------------------</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md72"></a>
Uniform and Non-Uniform Binning Scheme</h2>
<p>MaCh3 supports Uniform and Non-Uniform binning scheme</p>
<p>In the non-uniform scheme, bin sizes may vary along each dimension, but all bins are required to be axis-aligned hyper-rectangles. Arbitrary or irregular bin shapes are not supported like banana-shape.</p>
<p>Example of Uniform </p><div class="fragment"><div class="line">+--------+--------+--------+--------+</div>
<div class="line">| Bin 0  | Bin 1  | Bin 2  | Bin 3  |</div>
<div class="line">| (0,0)  | (1,0)  | (2,0)  | (3,0)  |</div>
<div class="line">+--------+--------+--------+--------+</div>
<div class="line">| Bin 4  | Bin 5  | Bin 6  | Bin 7  |</div>
<div class="line">| (0,1)  | (1,1)  | (2,1)  | (3,1)  |</div>
<div class="line">+--------+--------+--------+--------+</div>
<div class="line">| Bin 8  | Bin 9  | Bin 10 | Bin 11 |</div>
<div class="line">| (0,2)  | (1,2)  | (2,2)  | (3,2)  |</div>
<div class="line">+--------+--------+--------+--------+</div>
</div><!-- fragment --><p>Example of Non-Uniform</p>
<div class="fragment"><div class="line">+--------+------------+-------+---------------------+</div>
<div class="line">| Bin 0  |    Bin 1   | Bin 2 |         Bin 3       |</div>
<div class="line">|        |            |       |                     |</div>
<div class="line">+--------+------------+-------+---------------------+</div>
<div class="line">| Bin 4  |            |       |                     |</div>
<div class="line">|        |            | Bin 6 |                     |</div>
<div class="line">+--------+   Bin 5    +-------+                     |</div>
<div class="line">| Bin 7  |            |       |         Bin 9       |</div>
<div class="line">|        |            | Bin 8 |                     |</div>
<div class="line">+--------+------------+-------+---------------------+</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md73"></a>
Bin Finding Algorithm</h2>
<p>Since MaCh3 supports event migration bin finding algorithm must be fast to efficiently be able find bin during running fit. MaCh3 is caching nominal bin with idea that during fit migration should be around this nominal bin. Thus MaCh3 first checks if after shift event falls into Nom-bin and later adjacent. If not backs to binary search.</p>
<h3><a class="anchor" id="autotoc_md74"></a>
Uniform</h3>
<p>In case of uniform binning above algorithm is easy to test as one performs it for every dimension independently i.e. find X-bin, then Y etc. After which can find bin in flattened 1D space.</p>
<h3><a class="anchor" id="autotoc_md75"></a>
Non-Uniform</h3>
<p>Internally, non-uniform binning is implemented using two levels:</p>
<ol type="1">
<li><b>MegaBins (mapping bins)</b> These form a coarse, <em>uniform</em> grid that spans the full phase space. Each MegaBin acts as a container for one or more non-uniform bins.</li>
<li><b>Non-Uniform bins</b> The actual analysis bins, defined as hyper-rectangles with arbitrary extents inside a MegaBin.</li>
</ol>
<h4><a class="anchor" id="autotoc_md76"></a>
Bin finding procedure</h4>
<p>For a given event, the bin-finding algorithm proceeds as follows:</p>
<ol type="1">
<li>Locate the MegaBin using the same fast per-dimension logic as in uniform binning.</li>
<li>Once the MegaBin is identified, loop over all non-uniform bins associated with that MegaBin.</li>
<li>The first bin whose extents fully contain the event is selected.</li>
<li>If no bin matches, the event is assigned to the under/overflow bin.</li>
</ol>
<dl class="section author"><dt>Author</dt><dd>Kamil Skwarczynski </dd>
<dd>
Dan Barrow </dd></dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00121">121</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5845762f079913d6c244155e61c6ee7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5845762f079913d6c244155e61c6ee7e">&#9670;&nbsp;</a></span>BinningHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BinningHandler::BinningHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00004">4</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                               {</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a37d4efc297291aa0ed38455be365168e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37d4efc297291aa0ed38455be365168e">&#9670;&nbsp;</a></span>~BinningHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual BinningHandler::~BinningHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>destructor </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00128">128</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{};</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a65bd252090477f5f10e7f24275fec40a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65bd252090477f5f10e7f24275fec40a">&#9670;&nbsp;</a></span>FindGlobalBin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::FindGlobalBin </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const double * &gt; &amp;&#160;</td>
          <td class="paramname"><em>KinVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>NomBin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Global bin including. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">KinVar</td><td>Vector of pointers to kinematic variable like Erec </td></tr>
    <tr><td class="paramname">NomBin</td><td>Vector of nominal bin indices for this event, one per dimension. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00042">42</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                                                      {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">//DB Find the relevant bin in the PDF for each event</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> Dim = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(KinVar.size());</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keyword">const</span> <a class="code" href="structSampleBinningInfo.html">SampleBinningInfo</a>&amp; <a class="code" href="Core_8h.html#ab6a7e23420f0bcfb04f42f45f8283101">_restrict_</a> Binning = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[NomSample];</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordtype">int</span> GlobalBin = 0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; Dim; ++i) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> Var = *KinVar[i];</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> Bin = Binning.FindBin(i, Var, NomBin[i]);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// KS: If we are outside of range in only one dimension this mean out of bounds, we can simply quickly finish</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span>(Bin &lt; 0) <span class="keywordflow">return</span> <a class="code" href="namespaceM3.html#aadca64372617e10cf9fdf70d0b0eb23f">M3::UnderOverFlowBin</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// KS: inline GetBin computation to avoid any memory allocation, which in reweight loop is very costly</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    GlobalBin += Bin * Binning.Strides[i];</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">if</span>(Binning.Uniform) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    GlobalBin += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Binning.GlobalOffset);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> GlobalBin;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="Core_8h.html#ab6a7e23420f0bcfb04f42f45f8283101">_restrict_</a> BinMapping = Binning.BinGridMapping[GlobalBin];</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> nNonUniBins = BinMapping.size();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iBin = 0; iBin &lt; nNonUniBins; iBin++) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> BinNumber = BinMapping[iBin];</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="Core_8h.html#ab6a7e23420f0bcfb04f42f45f8283101">_restrict_</a> NonUniBin = Binning.Bins[BinNumber];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">if</span>(NonUniBin.IsEventInside(KinVar)){</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">return</span> BinNumber + Binning.GlobalOffset;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Didn&#39;t find any bin so returning UnderOverFlowBin&quot;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceM3.html#aadca64372617e10cf9fdf70d0b0eb23f">M3::UnderOverFlowBin</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="ttc" id="aCore_8h_html_ab6a7e23420f0bcfb04f42f45f8283101"><div class="ttname"><a href="Core_8h.html#ab6a7e23420f0bcfb04f42f45f8283101">_restrict_</a></div><div class="ttdeci">#define _restrict_</div><div class="ttdoc">KS: Using restrict limits the effects of pointer aliasing, aiding optimizations. While reading I foun...</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00108">Core.h:108</a></div></div>
<div class="ttc" id="aMaCh3Logger_8h_html_a4db4657acad5c79ac4bbb66a9d1c5905"><div class="ttname"><a href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a></div><div class="ttdeci">#define MACH3LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00034">MaCh3Logger.h:34</a></div></div>
<div class="ttc" id="aclassBinningHandler_html_a59f42dcc81ff1119566f9f2e217fbb44"><div class="ttname"><a href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">BinningHandler::SampleBinning</a></div><div class="ttdeci">std::vector&lt; SampleBinningInfo &gt; SampleBinning</div><div class="ttdoc">Binning info for individual sample.</div><div class="ttdef"><b>Definition:</b> <a href="BinningHandler_8h_source.html#l00199">BinningHandler.h:199</a></div></div>
<div class="ttc" id="anamespaceM3_html_aadca64372617e10cf9fdf70d0b0eb23f"><div class="ttname"><a href="namespaceM3.html#aadca64372617e10cf9fdf70d0b0eb23f">M3::UnderOverFlowBin</a></div><div class="ttdeci">constexpr static const int UnderOverFlowBin</div><div class="ttdoc">Mark bin which is overflow or underflow in MaCh3 binning.</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00091">Core.h:91</a></div></div>
<div class="ttc" id="astructSampleBinningInfo_html"><div class="ttname"><a href="structSampleBinningInfo.html">SampleBinningInfo</a></div><div class="ttdoc">KS: Struct storing all information required for sample binning.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00232">SampleStructs.h:232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac282b643f0063796f38fcaeac22ebbaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac282b643f0063796f38fcaeac22ebbaa">&#9670;&nbsp;</a></span>FindNominalBin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::FindNominalBin </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iDim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>Var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the nominal bin for a given variable in a given sample and dimension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>Sample index </td></tr>
    <tr><td class="paramname">iDim</td><td>Dimension index (0 = X, 1 = Y, ...) </td></tr>
    <tr><td class="paramname">Var</td><td>Kinematic variable value </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00079">79</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                           {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">const</span> <a class="code" href="structSampleBinningInfo.html">SampleBinningInfo</a>&amp; info = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample];</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; edges = info.<a class="code" href="structSampleBinningInfo.html#aa8669cafe2c37a2ded5e5b2fdc37d215">BinEdges</a>[iDim];</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// Outside binning range</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (Var &lt; edges.front() || Var &gt;= edges.back()) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceM3.html#aadca64372617e10cf9fdf70d0b0eb23f">M3::UnderOverFlowBin</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(std::distance(edges.begin(), std::upper_bound(edges.begin(), edges.end(), Var)) - 1);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="ttc" id="astructSampleBinningInfo_html_aa8669cafe2c37a2ded5e5b2fdc37d215"><div class="ttname"><a href="structSampleBinningInfo.html#aa8669cafe2c37a2ded5e5b2fdc37d215">SampleBinningInfo::BinEdges</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; double &gt; &gt; BinEdges</div><div class="ttdoc">Vector to hold N-axis bin-edges.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00235">SampleStructs.h:235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a029d6111ff484b1161a06a3ce9ef6975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029d6111ff484b1161a06a3ce9ef6975">&#9670;&nbsp;</a></span>GetBinEdges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; BinningHandler::GetBinEdges </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iDim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get N-dim bin edges for a given sample. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">iDim</td><td>dimension for which we extract bin edges </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00171">171</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{<span class="keywordflow">return</span> <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample].BinEdges.at(iDim);};</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9963ee65f16af2b34b2561d789e4c1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9963ee65f16af2b34b2561d789e4c1a">&#9670;&nbsp;</a></span>GetBinName() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BinningHandler::GetBinName </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>GlobalBin</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get fancy name for a given bin, to help match it with global properties. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">GlobalBin</td><td>Global Bin integrated over all samples </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00210">210</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                                              {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">int</span> SampleBin = <a class="code" href="SampleStructs_8h.html#a4a3cb7a9d73e72bb8144bed28ed5855d">GetSampleFromGlobalBin</a>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>, GlobalBin);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordtype">int</span> LocalBin  = <a class="code" href="SampleStructs_8h.html#af4afb01e9e8a6b9fa2bf0ece1b4e0859">GetLocalBinFromGlobalBin</a>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>, GlobalBin);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classBinningHandler.html#aa9963ee65f16af2b34b2561d789e4c1a">GetBinName</a>(SampleBin, LocalBin);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="ttc" id="aSampleStructs_8h_html_a4a3cb7a9d73e72bb8144bed28ed5855d"><div class="ttname"><a href="SampleStructs_8h.html#a4a3cb7a9d73e72bb8144bed28ed5855d">GetSampleFromGlobalBin</a></div><div class="ttdeci">int GetSampleFromGlobalBin(const std::vector&lt; SampleBinningInfo &gt; &amp;BinningInfo, const int GlobalBin)</div><div class="ttdoc">Get the sample index corresponding to a global bin number.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00680">SampleStructs.h:680</a></div></div>
<div class="ttc" id="aSampleStructs_8h_html_af4afb01e9e8a6b9fa2bf0ece1b4e0859"><div class="ttname"><a href="SampleStructs_8h.html#af4afb01e9e8a6b9fa2bf0ece1b4e0859">GetLocalBinFromGlobalBin</a></div><div class="ttdeci">int GetLocalBinFromGlobalBin(const std::vector&lt; SampleBinningInfo &gt; &amp;BinningInfo, const int GlobalBin)</div><div class="ttdoc">Get the local (sample) bin index from a global bin number.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00699">SampleStructs.h:699</a></div></div>
<div class="ttc" id="aclassBinningHandler_html_aa9963ee65f16af2b34b2561d789e4c1a"><div class="ttname"><a href="classBinningHandler.html#aa9963ee65f16af2b34b2561d789e4c1a">BinningHandler::GetBinName</a></div><div class="ttdeci">std::string GetBinName(const int GlobalBin) const</div><div class="ttdoc">Get fancy name for a given bin, to help match it with global properties.</div><div class="ttdef"><b>Definition:</b> <a href="BinningHandler_8cpp_source.html#l00210">BinningHandler.cpp:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1bee1ea2db8bd13d1226910c3dcf142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1bee1ea2db8bd13d1226910c3dcf142">&#9670;&nbsp;</a></span>GetBinName() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BinningHandler::GetBinName </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>SampleBin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get fancy name for a given bin, to help match it with global properties. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">SampleBin</td><td>Global Bin for a given sample </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00156">156</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; Binning = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// Safety checks</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (SampleBin &lt; 0 || SampleBin &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Binning.nBins)) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Requested bin {} is out of range for sample {}&quot;</span>, SampleBin, iSample);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  std::string BinName;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span>(Binning.Uniform) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">int</span> Dim = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Binning.Strides.size());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    std::vector&lt;int&gt; Bins(Dim, 0);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">int</span> Remaining = SampleBin;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// Convert the flat/global bin index into per-dimension indices</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// Dim0 is the fastest-changing axis, Dim1 the next, etc.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// For example (2D):</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">//   x = bin % Nx</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">//   y = bin / Nx</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// For 3D:</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">//   x = bin % Nx</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">//   y = (bin / Nx) % Ny</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">//   z = bin / (Nx * Ny)</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Dim; ++i) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> nBinsDim = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Binning.BinEdges[i].size()) - 1;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      Bins[i] = Remaining % nBinsDim;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      Remaining /= nBinsDim;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Dim; ++i) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">if</span> (i &gt; 0) BinName += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> min = Binning.BinEdges[i].at(Bins[i]);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> max = Binning.BinEdges[i].at(Bins[i] + 1);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      BinName += fmt::format(<span class="stringliteral">&quot;Dim{} ({:g}, {:g})&quot;</span>, i, min, max);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">const</span> <a class="code" href="structBinInfo.html">BinInfo</a>&amp; bin = Binning.Bins[SampleBin];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> Dim = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(bin.<a class="code" href="structBinInfo.html#a8f29fd5c65ee5513046cd68a2af34d3f">Extent</a>.size());</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Dim; ++i) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">if</span> (i &gt; 0) BinName += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> min = bin.<a class="code" href="structBinInfo.html#a8f29fd5c65ee5513046cd68a2af34d3f">Extent</a>[i][0];</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> max = bin.<a class="code" href="structBinInfo.html#a8f29fd5c65ee5513046cd68a2af34d3f">Extent</a>[i][1];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      BinName += fmt::format(<span class="stringliteral">&quot;Dim{} ({:g}, {:g})&quot;</span>, i, min, max);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">return</span> BinName;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a61052119a625282d0ec6d4a97adf3ee2"><div class="ttname"><a href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a></div><div class="ttdeci">#define MACH3LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00037">MaCh3Logger.h:37</a></div></div>
<div class="ttc" id="aclassMaCh3Exception_html"><div class="ttname"><a href="classMaCh3Exception.html">MaCh3Exception</a></div><div class="ttdoc">Custom exception class used throughout MaCh3.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Exception_8h_source.html#l00023">MaCh3Exception.h:23</a></div></div>
<div class="ttc" id="astructBinInfo_html"><div class="ttname"><a href="structBinInfo.html">BinInfo</a></div><div class="ttdoc">KS: This hold bin extents in N-Dimensions allowing to check if Bin falls into.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00186">SampleStructs.h:186</a></div></div>
<div class="ttc" id="astructBinInfo_html_a8f29fd5c65ee5513046cd68a2af34d3f"><div class="ttname"><a href="structBinInfo.html#a8f29fd5c65ee5513046cd68a2af34d3f">BinInfo::Extent</a></div><div class="ttdeci">std::vector&lt; std::array&lt; double, 2 &gt; &gt; Extent</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00191">SampleStructs.h:191</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3320b03d108234daf51d1e5bc75c3b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3320b03d108234daf51d1e5bc75c3b0f">&#9670;&nbsp;</a></span>GetBinName() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BinningHandler::GetBinName </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>Bins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get fancy name for a given bin, to help match it with global properties. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">Bins</td><td>Vector of bin indices along each dimension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00144">144</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                                                        {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; Binning = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample];</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span>(!Binning.Uniform) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;When using Non-Uniform binning for sample {} please use One bin instead of Axis bins&quot;</span>, iSample);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classBinningHandler.html#aa9963ee65f16af2b34b2561d789e4c1a">GetBinName</a>(iSample, <a class="code" href="classBinningHandler.html#a90a7d0fa33f3bb3e13bf327c884f6d57">GetBinSafe</a>(iSample, Bins));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="ttc" id="aclassBinningHandler_html_a90a7d0fa33f3bb3e13bf327c884f6d57"><div class="ttname"><a href="classBinningHandler.html#a90a7d0fa33f3bb3e13bf327c884f6d57">BinningHandler::GetBinSafe</a></div><div class="ttdeci">int GetBinSafe(const int iSample, const std::vector&lt; int &gt; &amp;Bins) const</div><div class="ttdoc">Get gloabl bin based on sample, and dimension of each sample without any safety checks.</div><div class="ttdef"><b>Definition:</b> <a href="BinningHandler_8cpp_source.html#l00095">BinningHandler.cpp:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90a7d0fa33f3bb3e13bf327c884f6d57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a7d0fa33f3bb3e13bf327c884f6d57">&#9670;&nbsp;</a></span>GetBinSafe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetBinSafe </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>Bins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get gloabl bin based on sample, and dimension of each sample without any safety checks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">Bins</td><td>Vector of bin indices along each dimension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00095">95</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> GlobalBin = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[Sample].GetBinSafe(Bins);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">return</span> GlobalBin;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7f029677717974b5d076266221e5363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7f029677717974b5d076266221e5363">&#9670;&nbsp;</a></span>GetGlobalBinSafe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetGlobalBinSafe </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>Bins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get gloabl bin based on sample, and dimension of each sample with additional checks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">Bins</td><td>Vector of bin indices along each dimension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00102">102</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                                                                       {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> GlobalBin = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[Sample].GetBinSafe(Bins) + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[Sample].GlobalOffset);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> GlobalBin;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af51681cde54b4558921b9dc8bc07d72a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af51681cde54b4558921b9dc8bc07d72a">&#9670;&nbsp;</a></span>GetNAxisBins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetNAxisBins </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iDim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Number of N-axis bins for a given sample. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
    <tr><td class="paramname">iDim</td><td>dimension for which we extract number of bins </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00218">218</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                                                        {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; Binning = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span>(!Binning.Uniform) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;When using Non-Uniform binning for sample {} please use global bin instead of {}&quot;</span>, iSample, __func__);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Binning.AxisNBins.at(iDim));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a207f774a69f371cd2d221e21bad6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a207f774a69f371cd2d221e21bad6f4">&#9670;&nbsp;</a></span>GetNBins() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetNBins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get total number of bins over all samples/kinematic bins etc. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00153">153</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{<span class="keywordflow">return</span> <a class="code" href="classBinningHandler.html#af2423b4a7e2402f297d69f493f28d81d">TotalNumberOfBins</a>;};</div>
<div class="ttc" id="aclassBinningHandler_html_af2423b4a7e2402f297d69f493f28d81d"><div class="ttname"><a href="classBinningHandler.html#af2423b4a7e2402f297d69f493f28d81d">BinningHandler::TotalNumberOfBins</a></div><div class="ttdeci">int TotalNumberOfBins</div><div class="ttdoc">Total number of bins.</div><div class="ttdef"><b>Definition:</b> <a href="BinningHandler_8h_source.html#l00197">BinningHandler.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a979dc4e15fd4d3ce07bbd5ca32fc20ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979dc4e15fd4d3ce07bbd5ca32fc20ad">&#9670;&nbsp;</a></span>GetNBins() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetNBins </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get total number of bins over for a given sample. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00155">155</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{<span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample].nBins);};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0665242a73544bb1addbbbcfe129c070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0665242a73544bb1addbbbcfe129c070">&#9670;&nbsp;</a></span>GetNonUniformBins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt; <a class="el" href="structBinInfo.html">BinInfo</a> &gt; BinningHandler::GetNonUniformBins </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return NonUnifomr bins to for example check extent etc. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00237">237</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                                                  {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; Binning = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span>(!Binning.Uniform) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> Binning.Bins;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;{} for sample {} will not work becasue binnin is unfiorm&quot;</span>, __func__, iSample);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aea885442a54a227775fafaf9ebef57c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea885442a54a227775fafaf9ebef57c2">&#9670;&nbsp;</a></span>GetSampleEndBin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetSampleEndBin </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get bin number corresponding to where given sample ends. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00115">115</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                          {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (Sample == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>.size()) - 1) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classBinningHandler.html#a9a207f774a69f371cd2d221e21bad6f4">GetNBins</a>();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[Sample+1].GlobalOffset);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="ttc" id="aclassBinningHandler_html_a9a207f774a69f371cd2d221e21bad6f4"><div class="ttname"><a href="classBinningHandler.html#a9a207f774a69f371cd2d221e21bad6f4">BinningHandler::GetNBins</a></div><div class="ttdeci">int GetNBins() const</div><div class="ttdoc">Get total number of bins over all samples/kinematic bins etc.</div><div class="ttdef"><b>Definition:</b> <a href="BinningHandler_8h_source.html#l00153">BinningHandler.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3add6a17401b21279d695d23c7f94d86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3add6a17401b21279d695d23c7f94d86">&#9670;&nbsp;</a></span>GetSampleStartBin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::GetSampleStartBin </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get bin number corresponding to where given sample starts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00109">109</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                                            {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[Sample].GlobalOffset);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adb5f10e563cdb904a0026952e40a153a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb5f10e563cdb904a0026952e40a153a">&#9670;&nbsp;</a></span>IsUniform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BinningHandler::IsUniform </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>iSample</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells whether given sample is using unform binning. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSample</td><td>index of a given sample </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00230">230</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                                      {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; Binning = <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample];</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">return</span> Binning.Uniform;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a35ddcc9c8bbf662c26bb977e3757cfc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ddcc9c8bbf662c26bb977e3757cfc4">&#9670;&nbsp;</a></span>SetGlobalBinNumbers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinningHandler::SetGlobalBinNumbers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the GlobalOffset for each <a class="el" href="structSampleBinningInfo.html" title="KS: Struct storing all information required for sample binning.">SampleBinningInfo</a> to enable linearization of multiple 2D binning samples. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00126">126</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                         {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>.empty()) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;No binning samples provided.&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">int</span> GlobalOffsetCounter = 0;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iSample = 0; iSample &lt; <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>.size(); iSample++){</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample].GlobalOffset = GlobalOffsetCounter;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    GlobalOffsetCounter += <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>[iSample].nBins;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// lastly modify total number of bins</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classBinningHandler.html#af2423b4a7e2402f297d69f493f28d81d">TotalNumberOfBins</a> = GlobalOffsetCounter;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b9cf265f24b8c911aad06996c005404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b9cf265f24b8c911aad06996c005404">&#9670;&nbsp;</a></span>SetupSampleBinning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinningHandler::SetupSampleBinning </td>
          <td>(</td>
          <td class="paramtype">const YAML::Node &amp;&#160;</td>
          <td class="paramname"><em>Settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSampleInfo.html">SampleInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>SingleSample</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to setup the binning of your sample histograms and the underlying arrays that get handled in fillArray() and fillArray_MP(). </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8cpp_source.html#l00013">13</a> of file <a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// ************************************************</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Setting up Sample Binning&quot;</span>);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <span class="comment">//Binning</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  SingleSample.<a class="code" href="structSampleInfo.html#a8bd0ea5113b3152d282b7bc7db1a606c">VarStr</a> = Get&lt;std::vector&lt;std::string&gt;&gt;(Settings[<span class="stringliteral">&quot;VarStr&quot;</span>], __FILE__ , __LINE__);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  SingleSample.<a class="code" href="structSampleInfo.html#a4402b585d1e3fde1dcd040ea59a0b209">nDimensions</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(SingleSample.<a class="code" href="structSampleInfo.html#a8bd0ea5113b3152d282b7bc7db1a606c">VarStr</a>.size());</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <a class="code" href="structSampleBinningInfo.html">SampleBinningInfo</a> SingleBinning;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <span class="keywordtype">bool</span> Uniform = Get&lt;bool&gt;(Settings[<span class="stringliteral">&quot;Uniform&quot;</span>], __FILE__ , __LINE__);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="keywordflow">if</span>(Uniform == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keyword">auto</span> Bins = Get&lt;std::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt;&gt;(Settings[<span class="stringliteral">&quot;Bins&quot;</span>], __FILE__, __LINE__);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    SingleBinning.<a class="code" href="structSampleBinningInfo.html#a2cb3ae7a21eab84e153552f6442dff71">InitNonUniform</a>(Bins);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keyword">auto</span> Bin_Edges = Get&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt;(Settings[<span class="stringliteral">&quot;VarBins&quot;</span>], __FILE__ , __LINE__);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    SingleBinning.<a class="code" href="structSampleBinningInfo.html#a0810d4d807808d1cc7d261f1e986123a">InitUniform</a>(Bin_Edges);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  }</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">if</span>(SingleSample.<a class="code" href="structSampleInfo.html#a8bd0ea5113b3152d282b7bc7db1a606c">VarStr</a>.size() != SingleBinning.<a class="code" href="structSampleBinningInfo.html#aa8669cafe2c37a2ded5e5b2fdc37d215">BinEdges</a>.size()) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Number of variables ({}) does not match number of bin edge sets ({}) in sample config &#39;{}&#39;&quot;</span>,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                   SingleSample.<a class="code" href="structSampleInfo.html#a8bd0ea5113b3152d282b7bc7db1a606c">VarStr</a>.size(), SingleBinning.<a class="code" href="structSampleBinningInfo.html#aa8669cafe2c37a2ded5e5b2fdc37d215">BinEdges</a>.size(),SingleSample.<a class="code" href="structSampleInfo.html#aa08cf57ea6717add258666f4966cde6d">SampleTitle</a>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  }</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classBinningHandler.html#a59f42dcc81ff1119566f9f2e217fbb44">SampleBinning</a>.emplace_back(SingleBinning);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// now setup global numbering</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classBinningHandler.html#a35ddcc9c8bbf662c26bb977e3757cfc4">SetGlobalBinNumbers</a>();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a95fa4dffc648e4c5536c9292c2bdcac3"><div class="ttname"><a href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a></div><div class="ttdeci">#define MACH3LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00035">MaCh3Logger.h:35</a></div></div>
<div class="ttc" id="aclassBinningHandler_html_a35ddcc9c8bbf662c26bb977e3757cfc4"><div class="ttname"><a href="classBinningHandler.html#a35ddcc9c8bbf662c26bb977e3757cfc4">BinningHandler::SetGlobalBinNumbers</a></div><div class="ttdeci">void SetGlobalBinNumbers()</div><div class="ttdoc">Sets the GlobalOffset for each SampleBinningInfo to enable linearization of multiple 2D binning sampl...</div><div class="ttdef"><b>Definition:</b> <a href="BinningHandler_8cpp_source.html#l00126">BinningHandler.cpp:126</a></div></div>
<div class="ttc" id="astructSampleBinningInfo_html_a0810d4d807808d1cc7d261f1e986123a"><div class="ttname"><a href="structSampleBinningInfo.html#a0810d4d807808d1cc7d261f1e986123a">SampleBinningInfo::InitUniform</a></div><div class="ttdeci">void InitUniform(const std::vector&lt; std::vector&lt; double &gt;&gt; &amp;InputEdges)</div><div class="ttdoc">Initialise Uniform Binning.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00255">SampleStructs.h:255</a></div></div>
<div class="ttc" id="astructSampleBinningInfo_html_a2cb3ae7a21eab84e153552f6442dff71"><div class="ttname"><a href="structSampleBinningInfo.html#a2cb3ae7a21eab84e153552f6442dff71">SampleBinningInfo::InitNonUniform</a></div><div class="ttdeci">void InitNonUniform(const std::vector&lt; std::vector&lt; std::vector&lt; double &gt;&gt;&gt; &amp;InputBins)</div><div class="ttdoc">Initialise Non-Uniform Binning.</div><div class="ttdef"><b>Definition:</b> <a href="SampleStructs_8h_source.html#l00468">SampleStructs.h:468</a></div></div>
<div class="ttc" id="astructSampleInfo_html_a4402b585d1e3fde1dcd040ea59a0b209"><div class="ttname"><a href="structSampleInfo.html#a4402b585d1e3fde1dcd040ea59a0b209">SampleInfo::nDimensions</a></div><div class="ttdeci">int nDimensions</div><div class="ttdoc">Keep track of the dimensions of the sample binning.</div><div class="ttdef"><b>Definition:</b> <a href="FarDetectorCoreInfoStruct_8h_source.html#l00058">FarDetectorCoreInfoStruct.h:58</a></div></div>
<div class="ttc" id="astructSampleInfo_html_a8bd0ea5113b3152d282b7bc7db1a606c"><div class="ttname"><a href="structSampleInfo.html#a8bd0ea5113b3152d282b7bc7db1a606c">SampleInfo::VarStr</a></div><div class="ttdeci">std::vector&lt; std::string &gt; VarStr</div><div class="ttdoc">the strings associated with the variables used for the binning e.g. &quot;RecoNeutrinoEnergy&quot;</div><div class="ttdef"><b>Definition:</b> <a href="FarDetectorCoreInfoStruct_8h_source.html#l00052">FarDetectorCoreInfoStruct.h:52</a></div></div>
<div class="ttc" id="astructSampleInfo_html_aa08cf57ea6717add258666f4966cde6d"><div class="ttname"><a href="structSampleInfo.html#aa08cf57ea6717add258666f4966cde6d">SampleInfo::SampleTitle</a></div><div class="ttdeci">std::string SampleTitle</div><div class="ttdoc">the name of this sample e.g.&quot;muon-like&quot;</div><div class="ttdef"><b>Definition:</b> <a href="FarDetectorCoreInfoStruct_8h_source.html#l00055">FarDetectorCoreInfoStruct.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a59f42dcc81ff1119566f9f2e217fbb44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f42dcc81ff1119566f9f2e217fbb44">&#9670;&nbsp;</a></span>SampleBinning</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structSampleBinningInfo.html">SampleBinningInfo</a>&gt; BinningHandler::SampleBinning</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Binning info for individual sample. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00199">199</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>

</div>
</div>
<a id="af2423b4a7e2402f297d69f493f28d81d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2423b4a7e2402f297d69f493f28d81d">&#9670;&nbsp;</a></span>TotalNumberOfBins</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BinningHandler::TotalNumberOfBins</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total number of bins. </p>

<p class="definition">Definition at line <a class="el" href="BinningHandler_8h_source.html#l00197">197</a> of file <a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Samples/<a class="el" href="BinningHandler_8h_source.html">BinningHandler.h</a></li>
<li>Samples/<a class="el" href="BinningHandler_8cpp_source.html">BinningHandler.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- Footer for MaCh3 Doxygen documentation -->
<footer class="mach3-footer" style="text-align: center;">
    <div style="margin-bottom: 15px;">
        <span style="font-weight: bold;">The MaCh3 Collaboration</span>
    </div>
    <!-- Dropdown to jump between doc versions -->
    <div style="margin-bottom: 10px;">
        <span>Select Software Version: </span>
        <select id="versionSelector" onchange="window.location.href=this.value" style="padding: 5px; border-radius: 4px; border: 1px solid #ccc;">
            <option value="">-- Select --</option>
            <option value="https://mach3-software.github.io/MaCh3/">develop</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.4.0/index.html">v2.4.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.3.0/index.html">v2.3.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.2.0/index.html">v2.2.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.1.0/index.html">v2.1.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.0.0/index.html">v2.0.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.5.0/index.html">v1.5.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.4.0/index.html">v1.4.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.3.0/index.html">v1.3.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.2.0/index.html">v1.2.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.1.0/index.html">v1.1.0</option>
        </select>
    </div>
    <!-- Footer info about doxygen -->
    <div style="font-size: 0.9em; color: #666; margin-top: 10px;">
        Documentation generated with
        <a href="https://www.doxygen.nl/" target="_blank" style="color: #666;">Doxygen</a>
        <span id="doxygenVersion"></span>
    </div>
    <!-- Now grab doxygen version from metadata -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const meta = document.querySelector('meta[name="generator"]');
        if (meta) {
            const version = meta.getAttribute("content").replace("Doxygen ", "");
            document.getElementById("doxygenVersion").textContent = " " + version;
        }
    });
    </script>
</footer>
