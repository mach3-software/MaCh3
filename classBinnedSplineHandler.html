<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaCh3: BinnedSplineHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="MaCh3.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mach3logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MaCh3
   &#160;<span id="projectnumber">2.4.2</span>
   </div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classBinnedSplineHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BinnedSplineHandler Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Bin-by-bin class calculating response for spline parameters.  
 <a href="classBinnedSplineHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BinnedSplineHandler_8h_source.html">Splines/BinnedSplineHandler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BinnedSplineHandler:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classBinnedSplineHandler__inherit__graph.svg" width="154" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for BinnedSplineHandler:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classBinnedSplineHandler__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab4747c7d1cc21664305a72966d44a4b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ab4747c7d1cc21664305a72966d44a4b6">BinnedSplineHandler</a> (<a class="el" href="classParameterHandlerGeneric.html">ParameterHandlerGeneric</a> *xsec_, <a class="el" href="classMaCh3Modes.html">MaCh3Modes</a> *Modes_)</td></tr>
<tr class="memdesc:ab4747c7d1cc21664305a72966d44a4b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classBinnedSplineHandler.html#ab4747c7d1cc21664305a72966d44a4b6">More...</a><br /></td></tr>
<tr class="separator:ab4747c7d1cc21664305a72966d44a4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae34e0b1344880e3a4d532244a801ef74"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ae34e0b1344880e3a4d532244a801ef74">~BinnedSplineHandler</a> ()</td></tr>
<tr class="memdesc:ae34e0b1344880e3a4d532244a801ef74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classBinnedSplineHandler.html#ae34e0b1344880e3a4d532244a801ef74">More...</a><br /></td></tr>
<tr class="separator:ae34e0b1344880e3a4d532244a801ef74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45e151624b2e80880299293fb2cc4673"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a45e151624b2e80880299293fb2cc4673">Evaluate</a> () override</td></tr>
<tr class="memdesc:a45e151624b2e80880299293fb2cc4673"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations.  <a href="classBinnedSplineHandler.html#a45e151624b2e80880299293fb2cc4673">More...</a><br /></td></tr>
<tr class="separator:a45e151624b2e80880299293fb2cc4673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1eb83224262073a7ea324f288d80c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aa1eb83224262073a7ea324f288d80c35">AddSample</a> (const std::string &amp;SampleName, const std::string &amp;SampleTitle, const std::vector&lt; std::string &gt; &amp;OscChanFileNames, const std::vector&lt; std::string &gt; &amp;SplineVarNames)</td></tr>
<tr class="memdesc:aa1eb83224262073a7ea324f288d80c35"><td class="mdescLeft">&#160;</td><td class="mdescRight">add oscillation channel to spline monolith  <a href="classBinnedSplineHandler.html#aa1eb83224262073a7ea324f288d80c35">More...</a><br /></td></tr>
<tr class="separator:aa1eb83224262073a7ea324f288d80c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb3c81a5a0f422eb2807a67afc8844d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aecb3c81a5a0f422eb2807a67afc8844d">TransferToMonolith</a> ()</td></tr>
<tr class="memdesc:aecb3c81a5a0f422eb2807a67afc8844d"><td class="mdescLeft">&#160;</td><td class="mdescRight">flatten multidimensional spline array into proper monolith  <a href="classBinnedSplineHandler.html#aecb3c81a5a0f422eb2807a67afc8844d">More...</a><br /></td></tr>
<tr class="separator:aecb3c81a5a0f422eb2807a67afc8844d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d7fe695a7924712cd9c8bfc262f2ff3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a2d7fe695a7924712cd9c8bfc262f2ff3">cleanUpMemory</a> ()</td></tr>
<tr class="memdesc:a2d7fe695a7924712cd9c8bfc262f2ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove setup variables not needed for spline evaluations.  <a href="classBinnedSplineHandler.html#a2d7fe695a7924712cd9c8bfc262f2ff3">More...</a><br /></td></tr>
<tr class="separator:a2d7fe695a7924712cd9c8bfc262f2ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4621f7bc5aa24a97fca813018b86b4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a9a4621f7bc5aa24a97fca813018b86b4">FillSampleArray</a> (std::string SampleTitle, std::vector&lt; std::string &gt; OscChanFileNames)</td></tr>
<tr class="memdesc:a9a4621f7bc5aa24a97fca813018b86b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads and processes splines from ROOT files for a given sample.  <a href="classBinnedSplineHandler.html#a9a4621f7bc5aa24a97fca813018b86b4">More...</a><br /></td></tr>
<tr class="separator:a9a4621f7bc5aa24a97fca813018b86b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960a64e0a855d797d74d052764f5ea3a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a960a64e0a855d797d74d052764f5ea3a">StripDuplicatedModes</a> (const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;InputVector)</td></tr>
<tr class="memdesc:a960a64e0a855d797d74d052764f5ea3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there are any repeated modes. This is used to reduce the number of modes in case many interaction modes get averaged into one spline.  <a href="classBinnedSplineHandler.html#a960a64e0a855d797d74d052764f5ea3a">More...</a><br /></td></tr>
<tr class="separator:a960a64e0a855d797d74d052764f5ea3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e3cd817c57cfbce64d08db8854bbdc0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a7e3cd817c57cfbce64d08db8854bbdc0">GetEventSplines</a> (const std::string &amp;SampleTitle, int iOscChan, int EventMode, double Var1Val, double Var2Val, double Var3Val)</td></tr>
<tr class="memdesc:a7e3cd817c57cfbce64d08db8854bbdc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the splines which affect a given event.  <a href="classBinnedSplineHandler.html#a7e3cd817c57cfbce64d08db8854bbdc0">More...</a><br /></td></tr>
<tr class="separator:a7e3cd817c57cfbce64d08db8854bbdc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3cfd3c0730281791227f25f04c944ee"><td class="memItemLeft" align="right" valign="top">std::vector&lt; TAxis * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aa3cfd3c0730281791227f25f04c944ee">FindSplineBinning</a> (const std::string &amp;FileName, const std::string &amp;SampleTitle)</td></tr>
<tr class="memdesc:aa3cfd3c0730281791227f25f04c944ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grab histograms with spline binning.  <a href="classBinnedSplineHandler.html#aa3cfd3c0730281791227f25f04c944ee">More...</a><br /></td></tr>
<tr class="separator:aa3cfd3c0730281791227f25f04c944ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19b93ef716d594de4b0266dd84580cfe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a19b93ef716d594de4b0266dd84580cfe">CountNumberOfLoadedSplines</a> (bool NonFlat=false, int Verbosity=0)</td></tr>
<tr class="separator:a19b93ef716d594de4b0266dd84580cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8ef77922fdeddb085c3a9d0d1cb6c9"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a0b8ef77922fdeddb085c3a9d0d1cb6c9">getDimLabel</a> (const int BinningOpt, const unsigned int Axis) const</td></tr>
<tr class="separator:a0b8ef77922fdeddb085c3a9d0d1cb6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4be12b4e410259ec60d311cdfeb1a99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a> (const std::string &amp;SampleTitle) const</td></tr>
<tr class="memdesc:af4be12b4e410259ec60d311cdfeb1a99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get index of sample based on name.  <a href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">More...</a><br /></td></tr>
<tr class="separator:af4be12b4e410259ec60d311cdfeb1a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8cf7e65f7d3ff6e9a3b9dbabb389f42"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ab8cf7e65f7d3ff6e9a3b9dbabb389f42">isValidSplineIndex</a> (const std::string &amp;SampleTitle, int iSyst, int iOscChan, int iMode, int iVar1, int iVar2, int iVar3)</td></tr>
<tr class="memdesc:ab8cf7e65f7d3ff6e9a3b9dbabb389f42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure we have spline for a given bin.  <a href="classBinnedSplineHandler.html#ab8cf7e65f7d3ff6e9a3b9dbabb389f42">More...</a><br /></td></tr>
<tr class="separator:ab8cf7e65f7d3ff6e9a3b9dbabb389f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9112bad5ade2818e33a969429db514cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a9112bad5ade2818e33a969429db514cd">BuildSampleIndexingArray</a> (const std::string &amp;SampleTitle)</td></tr>
<tr class="separator:a9112bad5ade2818e33a969429db514cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f82ff6646004c7030110aafabb52e8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a3f82ff6646004c7030110aafabb52e8a">PrepForReweight</a> ()</td></tr>
<tr class="separator:a3f82ff6646004c7030110aafabb52e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05fd3d9253866f067ca3a184fa1ece06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a05fd3d9253866f067ca3a184fa1ece06">getSplineCoeff_SepMany</a> (int splineindex, <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;xArray, <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;manyArray)</td></tr>
<tr class="separator:a05fd3d9253866f067ca3a184fa1ece06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c341f5f23957b0e928e617486842da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a37c341f5f23957b0e928e617486842da">PrintBinning</a> (TAxis *Axis) const</td></tr>
<tr class="separator:a37c341f5f23957b0e928e617486842da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61753ed3e44cda6fabb031fd8ef19e79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a61753ed3e44cda6fabb031fd8ef19e79">PrintSampleDetails</a> (const std::string &amp;SampleTitle) const</td></tr>
<tr class="memdesc:a61753ed3e44cda6fabb031fd8ef19e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print info like Sample ID of spline params etc.  <a href="classBinnedSplineHandler.html#a61753ed3e44cda6fabb031fd8ef19e79">More...</a><br /></td></tr>
<tr class="separator:a61753ed3e44cda6fabb031fd8ef19e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad580bcacf16ba7a69a3ed157ae598a5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ad580bcacf16ba7a69a3ed157ae598a5c">PrintArrayDetails</a> (const std::string &amp;SampleTitle) const</td></tr>
<tr class="separator:ad580bcacf16ba7a69a3ed157ae598a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3aceb2ecabad9196e0c6cc96ec96c7d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ae3aceb2ecabad9196e0c6cc96ec96c7d">retPointer</a> (const int sample, const int oscchan, const int syst, const int mode, const int var1bin, const int var2bin, const int var3bin) const</td></tr>
<tr class="memdesc:ae3aceb2ecabad9196e0c6cc96ec96c7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">get pointer to spline weight based on bin variables  <a href="classBinnedSplineHandler.html#ae3aceb2ecabad9196e0c6cc96ec96c7d">More...</a><br /></td></tr>
<tr class="separator:ae3aceb2ecabad9196e0c6cc96ec96c7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bee3ae76bfe1d7be8240194409a9794"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a0bee3ae76bfe1d7be8240194409a9794">PrepareSplineFile</a> (std::string FileName) override</td></tr>
<tr class="memdesc:a0bee3ae76bfe1d7be8240194409a9794"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Prepare spline file that can be used for fast loading.  <a href="classBinnedSplineHandler.html#a0bee3ae76bfe1d7be8240194409a9794">More...</a><br /></td></tr>
<tr class="separator:a0bee3ae76bfe1d7be8240194409a9794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a614d30bc719514ec496221303e1330c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a614d30bc719514ec496221303e1330c5">LoadSplineFile</a> (std::string FileName) override</td></tr>
<tr class="memdesc:a614d30bc719514ec496221303e1330c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Load preprocessed spline file.  <a href="classBinnedSplineHandler.html#a614d30bc719514ec496221303e1330c5">More...</a><br /></td></tr>
<tr class="separator:a614d30bc719514ec496221303e1330c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classSplineBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classSplineBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classSplineBase.html">SplineBase</a></td></tr>
<tr class="memitem:aa6965d1522cc68ecf81ac3bfd2dcd6f1 inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase</a> ()</td></tr>
<tr class="memdesc:aa6965d1522cc68ecf81ac3bfd2dcd6f1 inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">More...</a><br /></td></tr>
<tr class="separator:aa6965d1522cc68ecf81ac3bfd2dcd6f1 inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de19b2322edb4197380506d594456bd inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a0de19b2322edb4197380506d594456bd">~SplineBase</a> ()</td></tr>
<tr class="memdesc:a0de19b2322edb4197380506d594456bd inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classSplineBase.html#a0de19b2322edb4197380506d594456bd">More...</a><br /></td></tr>
<tr class="separator:a0de19b2322edb4197380506d594456bd inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1534f622ae1976b21df1ebf984eec5 inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a2e1534f622ae1976b21df1ebf984eec5">GetName</a> () const</td></tr>
<tr class="memdesc:a2e1534f622ae1976b21df1ebf984eec5 inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get class name.  <a href="classSplineBase.html#a2e1534f622ae1976b21df1ebf984eec5">More...</a><br /></td></tr>
<tr class="separator:a2e1534f622ae1976b21df1ebf984eec5 inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af825e2661f4a52c146973edf35de9afb inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">short int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#af825e2661f4a52c146973edf35de9afb">GetNParams</a> () const</td></tr>
<tr class="memdesc:af825e2661f4a52c146973edf35de9afb inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of spline parameters.  <a href="classSplineBase.html#af825e2661f4a52c146973edf35de9afb">More...</a><br /></td></tr>
<tr class="separator:af825e2661f4a52c146973edf35de9afb inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:aed96ca823d82fe9754e8961f4adcb660"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660">TokenOrdering</a> { <br />
&#160;&#160;<a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a81e819b2ed8cee4b21ce534a166eeeb5">kSystToken</a>
, <a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a711ee221711365c7ba45d51b8f027d54">kModeToken</a>
, <a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660ab6a3523389a1dca6a5775e525c048dfd">kVar1BinToken</a>
, <a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a3f0cc3b1b494394308167a877e8f3333">kVar2BinToken</a>
, <br />
&#160;&#160;<a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660abb66cca77f4df329ac10abca491d7d23">kVar3BinToken</a>
, <a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572">kNTokens</a>
<br />
 }</td></tr>
<tr class="separator:aed96ca823d82fe9754e8961f4adcb660"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a279a6350c12647741b5e903b8269a56c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a279a6350c12647741b5e903b8269a56c">CalcSplineWeights</a> () override</td></tr>
<tr class="memdesc:a279a6350c12647741b5e903b8269a56c"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU based code which eval weight for each spline.  <a href="classBinnedSplineHandler.html#a279a6350c12647741b5e903b8269a56c">More...</a><br /></td></tr>
<tr class="separator:a279a6350c12647741b5e903b8269a56c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4df71482a066069b712a72f7108ffbcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a4df71482a066069b712a72f7108ffbcf">ModifyWeights</a> () override</td></tr>
<tr class="memdesc:a4df71482a066069b712a72f7108ffbcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calc total event weight, not used by Bin-by-bin splines.  <a href="classBinnedSplineHandler.html#a4df71482a066069b712a72f7108ffbcf">More...</a><br /></td></tr>
<tr class="separator:a4df71482a066069b712a72f7108ffbcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99efbdc5327faf9be83ec01b9462159"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ab99efbdc5327faf9be83ec01b9462159">GetTokensFromSplineName</a> (std::string FullSplineName)=0</td></tr>
<tr class="separator:ab99efbdc5327faf9be83ec01b9462159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classSplineBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classSplineBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classSplineBase.html">SplineBase</a></td></tr>
<tr class="memitem:a589011b547ff70262ed43021a016ef30 inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">FindSplineSegment</a> ()</td></tr>
<tr class="memdesc:a589011b547ff70262ed43021a016ef30 inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW:Code used in step by step reweighting, Find Spline Segment for each param.  <a href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">More...</a><br /></td></tr>
<tr class="separator:a589011b547ff70262ed43021a016ef30 inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7797e26d48519c885e1537373505fcb inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#ae7797e26d48519c885e1537373505fcb">PrepareFastSplineInfoDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</td></tr>
<tr class="memdesc:ae7797e26d48519c885e1537373505fcb inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Prepare Fast Spline Info within SplineFile.  <a href="classSplineBase.html#ae7797e26d48519c885e1537373505fcb">More...</a><br /></td></tr>
<tr class="separator:ae7797e26d48519c885e1537373505fcb inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4f4b51619ef0573c7f1497f5d1fd52d inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#ad4f4b51619ef0573c7f1497f5d1fd52d">LoadFastSplineInfoDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</td></tr>
<tr class="memdesc:ad4f4b51619ef0573c7f1497f5d1fd52d inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Load preprocessed <a class="el" href="structFastSplineInfo.html" title="CW: Add a struct to hold info about the splinified xsec parameters and help with FindSplineSegment.">FastSplineInfo</a>.  <a href="classSplineBase.html#ad4f4b51619ef0573c7f1497f5d1fd52d">More...</a><br /></td></tr>
<tr class="separator:ad4f4b51619ef0573c7f1497f5d1fd52d inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a5f86ac6f156a7e11ef188b06f425f inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#ac8a5f86ac6f156a7e11ef188b06f425f">getTF1Coeff</a> (<a class="el" href="classTF1__red.html">TF1_red</a> *&amp;spl, int &amp;nPoints, float *&amp;coeffs)</td></tr>
<tr class="memdesc:ac8a5f86ac6f156a7e11ef188b06f425f inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW: Gets the polynomial coefficients for TF1.  <a href="classSplineBase.html#ac8a5f86ac6f156a7e11ef188b06f425f">More...</a><br /></td></tr>
<tr class="separator:ac8a5f86ac6f156a7e11ef188b06f425f inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a4360c772f9cad0aeccbf7e9a7bf86595"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classParameterHandlerGeneric.html">ParameterHandlerGeneric</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a></td></tr>
<tr class="memdesc:a4360c772f9cad0aeccbf7e9a7bf86595"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to covariance from which we get information about spline params.  <a href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">More...</a><br /></td></tr>
<tr class="separator:a4360c772f9cad0aeccbf7e9a7bf86595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66666026b08ba7f67c21c41b9c46f02"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a></td></tr>
<tr class="separator:ae66666026b08ba7f67c21c41b9c46f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e27e7861b7f06b2d42aedb54b77d03"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a></td></tr>
<tr class="separator:a60e27e7861b7f06b2d42aedb54b77d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8824387f90bd051b370bebd843691b83"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a></td></tr>
<tr class="separator:a8824387f90bd051b370bebd843691b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3db668a55f3d3356f63cb055819b2b0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aa3db668a55f3d3356f63cb055819b2b0">DimensionLabels</a></td></tr>
<tr class="separator:aa3db668a55f3d3356f63cb055819b2b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dbb81c0f4c8641580a9f9dd4231c8b1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a4dbb81c0f4c8641580a9f9dd4231c8b1">nSplineParams</a></td></tr>
<tr class="separator:a4dbb81c0f4c8641580a9f9dd4231c8b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54efbb1b4af41a83ef2c12599b0e4a92"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">nOscChans</a></td></tr>
<tr class="separator:a54efbb1b4af41a83ef2c12599b0e4a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54b0bf1e1f45af6362300ead59a1b8b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::vector&lt; TAxis * &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a></td></tr>
<tr class="separator:ab54b0bf1e1f45af6362300ead59a1b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26abd2a3fead4879ac1eb9c170658ba0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a></td></tr>
<tr class="separator:a26abd2a3fead4879ac1eb9c170658ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc9418367526011494eea1266da4b51"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a></td></tr>
<tr class="separator:a4fc9418367526011494eea1266da4b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7470dbc245ccb614f6f92159522b1cf"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ad7470dbc245ccb614f6f92159522b1cf">GlobalSystIndex</a></td></tr>
<tr class="memdesc:ad7470dbc245ccb614f6f92159522b1cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This holds the global spline index and is used to grab the current parameter value to evaluate splines at. Each internal vector will be of size of the number of spline systematics which affect that sample.  <a href="classBinnedSplineHandler.html#ad7470dbc245ccb614f6f92159522b1cf">More...</a><br /></td></tr>
<tr class="separator:ad7470dbc245ccb614f6f92159522b1cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75583f3110d18b04557262520281503e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; <a class="el" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4">SplineInterpolation</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a75583f3110d18b04557262520281503e">SplineInterpolationTypes</a></td></tr>
<tr class="memdesc:a75583f3110d18b04557262520281503e"><td class="mdescLeft">&#160;</td><td class="mdescRight">spline interpolation types for each sample. These vectors are from a call to GetSplineInterpolationFromSampleID()  <a href="classBinnedSplineHandler.html#a75583f3110d18b04557262520281503e">More...</a><br /></td></tr>
<tr class="separator:a75583f3110d18b04557262520281503e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6387e407a74af8f40202c573024c48ef"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a></td></tr>
<tr class="memdesc:a6387e407a74af8f40202c573024c48ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of each spline parameter  <a href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">More...</a><br /></td></tr>
<tr class="separator:a6387e407a74af8f40202c573024c48ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb1c578eddc904c39b08aca36e5f75d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a></td></tr>
<tr class="memdesc:aedb1c578eddc904c39b08aca36e5f75d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global index of each spline param, it allows us to match spline ordering with global.  <a href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">More...</a><br /></td></tr>
<tr class="separator:aedb1c578eddc904c39b08aca36e5f75d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0e6f58e9d7b67a4c4a20987f927ff8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &gt; &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a></td></tr>
<tr class="memdesc:a1e0e6f58e9d7b67a4c4a20987f927ff8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variables related to determined which modes have splines and which piggy-back of other modes.  <a href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">More...</a><br /></td></tr>
<tr class="separator:a1e0e6f58e9d7b67a4c4a20987f927ff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bf7d919dd21b6fa26356e6ac7ce61f6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">coeffindexvec</a></td></tr>
<tr class="separator:a2bf7d919dd21b6fa26356e6ac7ce61f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac032bf729105a8848e3058a430d54250"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">uniquecoeffindices</a></td></tr>
<tr class="memdesc:ac032bf729105a8848e3058a430d54250"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique coefficient indices.  <a href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">More...</a><br /></td></tr>
<tr class="separator:ac032bf729105a8848e3058a430d54250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac029b5a9c5b3b11874f5f1ada5acc31f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classTSpline3__red.html">TSpline3_red</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a></td></tr>
<tr class="memdesc:ac029b5a9c5b3b11874f5f1ada5acc31f"><td class="mdescLeft">&#160;</td><td class="mdescRight">holds each spline object before stripping into coefficient monolith  <a href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">More...</a><br /></td></tr>
<tr class="separator:ac029b5a9c5b3b11874f5f1ada5acc31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb076b2a7c8cdb53d70dfb33ddd344b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a></td></tr>
<tr class="separator:acb076b2a7c8cdb53d70dfb33ddd344b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0d538654de1ffcdf3e1c4161878bd6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a></td></tr>
<tr class="separator:a4a0d538654de1ffcdf3e1c4161878bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa55e0f149fa734a358759d12c46ca6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a></td></tr>
<tr class="separator:aeaa55e0f149fa734a358759d12c46ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13329dc38e92088744a5a49a60c01a83"><td class="memItemLeft" align="right" valign="top">bool *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a></td></tr>
<tr class="memdesc:a13329dc38e92088744a5a49a60c01a83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Need to keep track of which splines are flat and which aren't.  <a href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">More...</a><br /></td></tr>
<tr class="separator:a13329dc38e92088744a5a49a60c01a83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a565b03441c146e0a351f9aee09ea0836"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a></td></tr>
<tr class="memdesc:a565b03441c146e0a351f9aee09ea0836"><td class="mdescLeft">&#160;</td><td class="mdescRight">x coefficients for each spline  <a href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">More...</a><br /></td></tr>
<tr class="separator:a565b03441c146e0a351f9aee09ea0836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbff241a0ea99c0872ee56a71c0633d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a></td></tr>
<tr class="memdesc:afbff241a0ea99c0872ee56a71c0633d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">ybcd coefficients for each spline  <a href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">More...</a><br /></td></tr>
<tr class="separator:afbff241a0ea99c0872ee56a71c0633d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e433fb12f9c6759bbf1b0eb61f1f34a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">weightvec_Monolith</a></td></tr>
<tr class="memdesc:a9e433fb12f9c6759bbf1b0eb61f1f34a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores weight from spline evaluation for each single spline.  <a href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">More...</a><br /></td></tr>
<tr class="separator:a9e433fb12f9c6759bbf1b0eb61f1f34a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e746122fde570e5ec454a708d61b6c8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">uniquesplinevec_Monolith</a></td></tr>
<tr class="memdesc:a8e746122fde570e5ec454a708d61b6c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps single spline object with single parameter.  <a href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">More...</a><br /></td></tr>
<tr class="separator:a8e746122fde570e5ec454a708d61b6c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18810d957169226bcd66d4bc8fa274f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaCh3Modes.html">MaCh3Modes</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a></td></tr>
<tr class="memdesc:ad18810d957169226bcd66d4bc8fa274f"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to MaCh3 Mode from which we get spline suffix  <a href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">More...</a><br /></td></tr>
<tr class="separator:ad18810d957169226bcd66d4bc8fa274f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classSplineBase"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classSplineBase')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classSplineBase.html">SplineBase</a></td></tr>
<tr class="memitem:a9452897aecfe016466543dfe19c0628b inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structFastSplineInfo.html">FastSplineInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a></td></tr>
<tr class="separator:a9452897aecfe016466543dfe19c0628b inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938e3a60326137037f868b9930e2a972 inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">short int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a></td></tr>
<tr class="separator:a938e3a60326137037f868b9930e2a972 inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0b1d3a1adf7cffa7e74581bc7d58d4c inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a></td></tr>
<tr class="memdesc:aa0b1d3a1adf7cffa7e74581bc7d58d4c inherit pro_attribs_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store parameter values they are not in <a class="el" href="structFastSplineInfo.html" title="CW: Add a struct to hold info about the splinified xsec parameters and help with FindSplineSegment.">FastSplineInfo</a> as in case of GPU we need to copy paste it to GPU.  <a href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">More...</a><br /></td></tr>
<tr class="separator:aa0b1d3a1adf7cffa7e74581bc7d58d4c inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2165b057a0125a28d96f247ca8680b42 inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">short int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a></td></tr>
<tr class="memdesc:a2165b057a0125a28d96f247ca8680b42 inherit pro_attribs_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of parameters that have splines.  <a href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">More...</a><br /></td></tr>
<tr class="separator:a2165b057a0125a28d96f247ca8680b42 inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a443ea4b9ad0d8c5f065048bb67a91ed3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a443ea4b9ad0d8c5f065048bb67a91ed3">InvestigateMissingSplines</a> () const</td></tr>
<tr class="memdesc:a443ea4b9ad0d8c5f065048bb67a91ed3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will find missing splines in file.  <a href="classBinnedSplineHandler.html#a443ea4b9ad0d8c5f065048bb67a91ed3">More...</a><br /></td></tr>
<tr class="separator:a443ea4b9ad0d8c5f065048bb67a91ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad4f3e2807dc537f450a5893bfe6246"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a2ad4f3e2807dc537f450a5893bfe6246">LoadSettingsDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</td></tr>
<tr class="memdesc:a2ad4f3e2807dc537f450a5893bfe6246"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Load preprocessed Settings.  <a href="classBinnedSplineHandler.html#a2ad4f3e2807dc537f450a5893bfe6246">More...</a><br /></td></tr>
<tr class="separator:a2ad4f3e2807dc537f450a5893bfe6246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4affb91911fc7fd636bcd675d67dcf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ab4affb91911fc7fd636bcd675d67dcf2">LoadMonolithDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</td></tr>
<tr class="memdesc:ab4affb91911fc7fd636bcd675d67dcf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Load preprocessed Monolith.  <a href="classBinnedSplineHandler.html#ab4affb91911fc7fd636bcd675d67dcf2">More...</a><br /></td></tr>
<tr class="separator:ab4affb91911fc7fd636bcd675d67dcf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176d5a7858bbbb69b2ff3bdebc6d02a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a176d5a7858bbbb69b2ff3bdebc6d02a7">LoadIndexDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</td></tr>
<tr class="memdesc:a176d5a7858bbbb69b2ff3bdebc6d02a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Load preprocessed Index.  <a href="classBinnedSplineHandler.html#a176d5a7858bbbb69b2ff3bdebc6d02a7">More...</a><br /></td></tr>
<tr class="separator:a176d5a7858bbbb69b2ff3bdebc6d02a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace1b638715e5b159e2d936b1683220dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ace1b638715e5b159e2d936b1683220dd">PrepareSettingsDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</td></tr>
<tr class="memdesc:ace1b638715e5b159e2d936b1683220dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Prepare Settings Info within SplineFile.  <a href="classBinnedSplineHandler.html#ace1b638715e5b159e2d936b1683220dd">More...</a><br /></td></tr>
<tr class="separator:ace1b638715e5b159e2d936b1683220dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf273740a50b7a667e10d352d28451c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#aaf273740a50b7a667e10d352d28451c7">PrepareMonolithDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</td></tr>
<tr class="memdesc:aaf273740a50b7a667e10d352d28451c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Prepare Monolith Info within SplineFile.  <a href="classBinnedSplineHandler.html#aaf273740a50b7a667e10d352d28451c7">More...</a><br /></td></tr>
<tr class="separator:aaf273740a50b7a667e10d352d28451c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f150cb18bfcdbeb7d2f45aaa150f2a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#a8f150cb18bfcdbeb7d2f45aaa150f2a5">PrepareIndexDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</td></tr>
<tr class="memdesc:a8f150cb18bfcdbeb7d2f45aaa150f2a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Prepare Index Info within SplineFile.  <a href="classBinnedSplineHandler.html#a8f150cb18bfcdbeb7d2f45aaa150f2a5">More...</a><br /></td></tr>
<tr class="separator:a8f150cb18bfcdbeb7d2f45aaa150f2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac093836707360769e153d222559aa3d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinnedSplineHandler.html#ac093836707360769e153d222559aa3d7">PrepareOtherInfoDir</a> (std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</td></tr>
<tr class="memdesc:ac093836707360769e153d222559aa3d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">KS: Prepare Other Info within SplineFile.  <a href="classBinnedSplineHandler.html#ac093836707360769e153d222559aa3d7">More...</a><br /></td></tr>
<tr class="separator:ac093836707360769e153d222559aa3d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bin-by-bin class calculating response for spline parameters. </p>
<dl class="section see"><dt>See also</dt><dd>For more details, visit the <a href="https://github.com/mach3-software/MaCh3/wiki/05.-Splines">Wiki</a>. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Dan Barrow </dd>
<dd>
Ed Atkin </dd>
<dd>
Henry Wallace </dd></dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00012">12</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aed96ca823d82fe9754e8961f4adcb660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed96ca823d82fe9754e8961f4adcb660">&#9670;&nbsp;</a></span>TokenOrdering</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660">BinnedSplineHandler::TokenOrdering</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aed96ca823d82fe9754e8961f4adcb660a81e819b2ed8cee4b21ce534a166eeeb5"></a>kSystToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aed96ca823d82fe9754e8961f4adcb660a711ee221711365c7ba45d51b8f027d54"></a>kModeToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aed96ca823d82fe9754e8961f4adcb660ab6a3523389a1dca6a5775e525c048dfd"></a>kVar1BinToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aed96ca823d82fe9754e8961f4adcb660a3f0cc3b1b494394308167a877e8f3333"></a>kVar2BinToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aed96ca823d82fe9754e8961f4adcb660abb66cca77f4df329ac10abca491d7d23"></a>kVar3BinToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572"></a>kNTokens&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00138">138</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a81e819b2ed8cee4b21ce534a166eeeb5">kSystToken</a>,<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a711ee221711365c7ba45d51b8f027d54">kModeToken</a>,<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660ab6a3523389a1dca6a5775e525c048dfd">kVar1BinToken</a>,<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a3f0cc3b1b494394308167a877e8f3333">kVar2BinToken</a>,<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660abb66cca77f4df329ac10abca491d7d23">kVar3BinToken</a>,<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572">kNTokens</a>};</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aed96ca823d82fe9754e8961f4adcb660a3f0cc3b1b494394308167a877e8f3333"><div class="ttname"><a href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a3f0cc3b1b494394308167a877e8f3333">BinnedSplineHandler::kVar2BinToken</a></div><div class="ttdeci">@ kVar2BinToken</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00138">BinnedSplineHandler.h:138</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aed96ca823d82fe9754e8961f4adcb660a711ee221711365c7ba45d51b8f027d54"><div class="ttname"><a href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a711ee221711365c7ba45d51b8f027d54">BinnedSplineHandler::kModeToken</a></div><div class="ttdeci">@ kModeToken</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00138">BinnedSplineHandler.h:138</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572"><div class="ttname"><a href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572">BinnedSplineHandler::kNTokens</a></div><div class="ttdeci">@ kNTokens</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00138">BinnedSplineHandler.h:138</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aed96ca823d82fe9754e8961f4adcb660a81e819b2ed8cee4b21ce534a166eeeb5"><div class="ttname"><a href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a81e819b2ed8cee4b21ce534a166eeeb5">BinnedSplineHandler::kSystToken</a></div><div class="ttdeci">@ kSystToken</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00138">BinnedSplineHandler.h:138</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aed96ca823d82fe9754e8961f4adcb660ab6a3523389a1dca6a5775e525c048dfd"><div class="ttname"><a href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660ab6a3523389a1dca6a5775e525c048dfd">BinnedSplineHandler::kVar1BinToken</a></div><div class="ttdeci">@ kVar1BinToken</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00138">BinnedSplineHandler.h:138</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aed96ca823d82fe9754e8961f4adcb660abb66cca77f4df329ac10abca491d7d23"><div class="ttname"><a href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660abb66cca77f4df329ac10abca491d7d23">BinnedSplineHandler::kVar3BinToken</a></div><div class="ttdeci">@ kVar3BinToken</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00138">BinnedSplineHandler.h:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab4747c7d1cc21664305a72966d44a4b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4747c7d1cc21664305a72966d44a4b6">&#9670;&nbsp;</a></span>BinnedSplineHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Core_8h.html#a46b8fa28114cf68de4549061568b5ade">_MaCh3_Safe_Include_Start_</a> <a class="el" href="Core_8h.html#a91209a17295738b34b124b79faa68a1b">_MaCh3_Safe_Include_End_</a> BinnedSplineHandler::BinnedSplineHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classParameterHandlerGeneric.html">ParameterHandlerGeneric</a> *&#160;</td>
          <td class="paramname"><em>xsec_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaCh3Modes.html">MaCh3Modes</a> *&#160;</td>
          <td class="paramname"><em>Modes_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>ETA - do all of these functions and members actually need to be public? </dd></dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00014">14</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                                                                                           : <a class="code" href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase</a>() {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <span class="keywordflow">if</span> (!xsec_) {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to create BinnedSplineHandler with uninitialized covariance object&quot;</span>);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  }</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a> = xsec_;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="keywordflow">if</span> (!Modes_) {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to create BinnedSplineHandler with uninitialized MaCh3Modes object&quot;</span>);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  }</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a> = Modes_;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// Keep these in class scope, important for using 1 monolith/sample!</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a> = 0; <span class="comment">//Keeps track of the monolith index we&#39;re on when filling arrays (declared here so we can have multiple FillSampleArray calls)</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a> = 0; <span class="comment">//Keeps track of our indexing the coefficient arrays [x, ybcd]</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a61052119a625282d0ec6d4a97adf3ee2"><div class="ttname"><a href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a></div><div class="ttdeci">#define MACH3LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00037">MaCh3Logger.h:37</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a13329dc38e92088744a5a49a60c01a83"><div class="ttname"><a href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">BinnedSplineHandler::isflatarray</a></div><div class="ttdeci">bool * isflatarray</div><div class="ttdoc">Need to keep track of which splines are flat and which aren't.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00125">BinnedSplineHandler.h:125</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a4360c772f9cad0aeccbf7e9a7bf86595"><div class="ttname"><a href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">BinnedSplineHandler::xsec</a></div><div class="ttdeci">ParameterHandlerGeneric * xsec</div><div class="ttdoc">Pointer to covariance from which we get information about spline params.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00082">BinnedSplineHandler.h:80</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a4a0d538654de1ffcdf3e1c4161878bd6"><div class="ttname"><a href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">BinnedSplineHandler::MonolithIndex</a></div><div class="ttdeci">int MonolithIndex</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00121">BinnedSplineHandler.h:121</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ad18810d957169226bcd66d4bc8fa274f"><div class="ttname"><a href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">BinnedSplineHandler::Modes</a></div><div class="ttdeci">MaCh3Modes * Modes</div><div class="ttdoc">pointer to MaCh3 Mode from which we get spline suffix</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00137">BinnedSplineHandler.h:137</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aeaa55e0f149fa734a358759d12c46ca6"><div class="ttname"><a href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">BinnedSplineHandler::CoeffIndex</a></div><div class="ttdeci">int CoeffIndex</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00122">BinnedSplineHandler.h:122</a></div></div>
<div class="ttc" id="aclassMaCh3Exception_html"><div class="ttname"><a href="classMaCh3Exception.html">MaCh3Exception</a></div><div class="ttdoc">Custom exception class used throughout MaCh3.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Exception_8h_source.html#l00023">MaCh3Exception.h:23</a></div></div>
<div class="ttc" id="aclassSplineBase_html_aa6965d1522cc68ecf81ac3bfd2dcd6f1"><div class="ttname"><a href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase::SplineBase</a></div><div class="ttdeci">SplineBase()</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00007">SplineBase.cpp:7</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae34e0b1344880e3a4d532244a801ef74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae34e0b1344880e3a4d532244a801ef74">&#9670;&nbsp;</a></span>~BinnedSplineHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BinnedSplineHandler::~BinnedSplineHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>it need some love </dd></dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00035">35</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                         {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a565b03441c146e0a351f9aee09ea0836"><div class="ttname"><a href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">BinnedSplineHandler::xcoeff_arr</a></div><div class="ttdeci">M3::float_t * xcoeff_arr</div><div class="ttdoc">x coefficients for each spline</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00127">BinnedSplineHandler.h:127</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_afbff241a0ea99c0872ee56a71c0633d1"><div class="ttname"><a href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">BinnedSplineHandler::manycoeff_arr</a></div><div class="ttdeci">M3::float_t * manycoeff_arr</div><div class="ttdoc">ybcd coefficients for each spline</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00129">BinnedSplineHandler.h:129</a></div></div>
<div class="ttc" id="aclassSplineBase_html_a938e3a60326137037f868b9930e2a972"><div class="ttname"><a href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineBase::SplineSegments</a></div><div class="ttdeci">short int * SplineSegments</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00074">SplineBase.h:74</a></div></div>
<div class="ttc" id="aclassSplineBase_html_aa0b1d3a1adf7cffa7e74581bc7d58d4c"><div class="ttname"><a href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">SplineBase::ParamValues</a></div><div class="ttdeci">float * ParamValues</div><div class="ttdoc">Store parameter values they are not in FastSplineInfo as in case of GPU we need to copy paste it to G...</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00076">SplineBase.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa1eb83224262073a7ea324f288d80c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1eb83224262073a7ea324f288d80c35">&#9670;&nbsp;</a></span>AddSample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::AddSample </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>OscChanFileNames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineVarNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>add oscillation channel to spline monolith </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00067">67</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a>.push_back(SampleName);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>.push_back(SampleTitle);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>.push_back(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(SplineVarNames.size()));</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#aa3db668a55f3d3356f63cb055819b2b0">DimensionLabels</a>.push_back(SplineVarNames);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">int</span> nSplineParam = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#ga9b25b6f2f2d032d086963293eeb981c4">GetNumParamsFromSampleName</a>(SampleName, <a class="code" href="ParameterStructs_8h.html#affc27d8b7b82d3713f45af17873fde2fa29d6ccf6cf507f6e66c72b1d3c2aed00">SystType::kSpline</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a4dbb81c0f4c8641580a9f9dd4231c8b1">nSplineParams</a>.push_back(nSplineParam);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">//This holds the global index of the spline i.e. 0 -&gt; _fNumPar</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  std::vector&lt;int&gt; GlobalSystIndex_Sample = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#ga58ccccc2b9a4280021e4663202612038">GetGlobalSystIndexFromSampleName</a>(SampleName, <a class="code" href="ParameterStructs_8h.html#affc27d8b7b82d3713f45af17873fde2fa29d6ccf6cf507f6e66c72b1d3c2aed00">SystType::kSpline</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">//Keep track of this for all the samples</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ad7470dbc245ccb614f6f92159522b1cf">GlobalSystIndex</a>.push_back(GlobalSystIndex_Sample);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  std::vector&lt;SplineInterpolation&gt; SplineInterpolation_Sample = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#gaedc568e5a86735a4b3d823d204431f99">GetSplineInterpolationFromSampleName</a>(SampleName);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Keep track of this for all samples</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a75583f3110d18b04557262520281503e">SplineInterpolationTypes</a>.push_back(SplineInterpolation_Sample);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  std::vector&lt;std::string&gt; SplineFileParPrefixNames_Sample = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#gadc9644bbd41005c36945bc9504ef91fd">GetSplineParsNamesFromSampleName</a>(SampleName);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>.push_back(SplineFileParPrefixNames_Sample);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Create SplineModeVecs_Sample&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  std::vector&lt;std::vector&lt;int&gt;&gt; SplineModeVecs_Sample = <a class="code" href="classBinnedSplineHandler.html#a960a64e0a855d797d74d052764f5ea3a">StripDuplicatedModes</a>(<a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#gaf39a139867ff4837b7c6845636c9dcdc">GetSplineModeVecFromSampleName</a>(SampleName));</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;SplineModeVecs_Sample is of size {}&quot;</span>, SplineModeVecs_Sample.size());</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>.push_back(SplineModeVecs_Sample);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;SplineModeVecs is of size {}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>.size());</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordtype">int</span> nOscChan = int(OscChanFileNames.size());</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">nOscChans</a>.push_back(nOscChan);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a61753ed3e44cda6fabb031fd8ef19e79">PrintSampleDetails</a>(SampleTitle);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  std::vector&lt;std::vector&lt;TAxis *&gt;&gt; SampleBinning(nOscChan);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChan; iOscChan++)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    SampleBinning[iOscChan] = <a class="code" href="classBinnedSplineHandler.html#aa3cfd3c0730281791227f25f04c944ee">FindSplineBinning</a>(OscChanFileNames[iOscChan], SampleTitle);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>.push_back(SampleBinning);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a9112bad5ade2818e33a969429db514cd">BuildSampleIndexingArray</a>(SampleTitle);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ad580bcacf16ba7a69a3ed157ae598a5c">PrintArrayDetails</a>(SampleTitle);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a9a4621f7bc5aa24a97fca813018b86b4">FillSampleArray</a>(SampleTitle, OscChanFileNames);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a95fa4dffc648e4c5536c9292c2bdcac3"><div class="ttname"><a href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a></div><div class="ttdeci">#define MACH3LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00035">MaCh3Logger.h:35</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_affc27d8b7b82d3713f45af17873fde2fa29d6ccf6cf507f6e66c72b1d3c2aed00"><div class="ttname"><a href="ParameterStructs_8h.html#affc27d8b7b82d3713f45af17873fde2fa29d6ccf6cf507f6e66c72b1d3c2aed00">kSpline</a></div><div class="ttdeci">@ kSpline</div><div class="ttdoc">For splined parameters (1D)</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00341">ParameterStructs.h:341</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a26abd2a3fead4879ac1eb9c170658ba0"><div class="ttname"><a href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">BinnedSplineHandler::SplineFileParPrefixNames</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::string &gt; &gt; SplineFileParPrefixNames</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00093">BinnedSplineHandler.h:93</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a4dbb81c0f4c8641580a9f9dd4231c8b1"><div class="ttname"><a href="classBinnedSplineHandler.html#a4dbb81c0f4c8641580a9f9dd4231c8b1">BinnedSplineHandler::nSplineParams</a></div><div class="ttdeci">std::vector&lt; int &gt; nSplineParams</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00089">BinnedSplineHandler.h:89</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a4fc9418367526011494eea1266da4b51"><div class="ttname"><a href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">BinnedSplineHandler::SplineModeVecs</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; SplineModeVecs</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00097">BinnedSplineHandler.h:97</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a54efbb1b4af41a83ef2c12599b0e4a92"><div class="ttname"><a href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">BinnedSplineHandler::nOscChans</a></div><div class="ttdeci">std::vector&lt; int &gt; nOscChans</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00090">BinnedSplineHandler.h:90</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a60e27e7861b7f06b2d42aedb54b77d03"><div class="ttname"><a href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">BinnedSplineHandler::SampleTitles</a></div><div class="ttdeci">std::vector&lt; std::string &gt; SampleTitles</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00086">BinnedSplineHandler.h:86</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a61753ed3e44cda6fabb031fd8ef19e79"><div class="ttname"><a href="classBinnedSplineHandler.html#a61753ed3e44cda6fabb031fd8ef19e79">BinnedSplineHandler::PrintSampleDetails</a></div><div class="ttdeci">void PrintSampleDetails(const std::string &amp;SampleTitle) const</div><div class="ttdoc">Print info like Sample ID of spline params etc.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00747">BinnedSplineHandler.cpp:747</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a75583f3110d18b04557262520281503e"><div class="ttname"><a href="classBinnedSplineHandler.html#a75583f3110d18b04557262520281503e">BinnedSplineHandler::SplineInterpolationTypes</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; SplineInterpolation &gt; &gt; SplineInterpolationTypes</div><div class="ttdoc">spline interpolation types for each sample. These vectors are from a call to GetSplineInterpolationFr...</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00104">BinnedSplineHandler.h:104</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a8824387f90bd051b370bebd843691b83"><div class="ttname"><a href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">BinnedSplineHandler::Dimensions</a></div><div class="ttdeci">std::vector&lt; int &gt; Dimensions</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00087">BinnedSplineHandler.h:87</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a9112bad5ade2818e33a969429db514cd"><div class="ttname"><a href="classBinnedSplineHandler.html#a9112bad5ade2818e33a969429db514cd">BinnedSplineHandler::BuildSampleIndexingArray</a></div><div class="ttdeci">void BuildSampleIndexingArray(const std::string &amp;SampleTitle)</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00350">BinnedSplineHandler.cpp:350</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a960a64e0a855d797d74d052764f5ea3a"><div class="ttname"><a href="classBinnedSplineHandler.html#a960a64e0a855d797d74d052764f5ea3a">BinnedSplineHandler::StripDuplicatedModes</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; StripDuplicatedModes(const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;InputVector)</div><div class="ttdoc">Check if there are any repeated modes. This is used to reduce the number of modes in case many intera...</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00892">BinnedSplineHandler.cpp:892</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a9a4621f7bc5aa24a97fca813018b86b4"><div class="ttname"><a href="classBinnedSplineHandler.html#a9a4621f7bc5aa24a97fca813018b86b4">BinnedSplineHandler::FillSampleArray</a></div><div class="ttdeci">virtual void FillSampleArray(std::string SampleTitle, std::vector&lt; std::string &gt; OscChanFileNames)</div><div class="ttdoc">Loads and processes splines from ROOT files for a given sample.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00926">BinnedSplineHandler.cpp:926</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aa3cfd3c0730281791227f25f04c944ee"><div class="ttname"><a href="classBinnedSplineHandler.html#aa3cfd3c0730281791227f25f04c944ee">BinnedSplineHandler::FindSplineBinning</a></div><div class="ttdeci">std::vector&lt; TAxis * &gt; FindSplineBinning(const std::string &amp;FileName, const std::string &amp;SampleTitle)</div><div class="ttdoc">Grab histograms with spline binning.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00382">BinnedSplineHandler.cpp:382</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aa3db668a55f3d3356f63cb055819b2b0"><div class="ttname"><a href="classBinnedSplineHandler.html#aa3db668a55f3d3356f63cb055819b2b0">BinnedSplineHandler::DimensionLabels</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::string &gt; &gt; DimensionLabels</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00088">BinnedSplineHandler.h:88</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ab54b0bf1e1f45af6362300ead59a1b8b"><div class="ttname"><a href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">BinnedSplineHandler::SplineBinning</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; TAxis * &gt; &gt; &gt; SplineBinning</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00092">BinnedSplineHandler.h:92</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ad580bcacf16ba7a69a3ed157ae598a5c"><div class="ttname"><a href="classBinnedSplineHandler.html#ad580bcacf16ba7a69a3ed157ae598a5c">BinnedSplineHandler::PrintArrayDetails</a></div><div class="ttdeci">void PrintArrayDetails(const std::string &amp;SampleTitle) const</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00759">BinnedSplineHandler.cpp:759</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ad7470dbc245ccb614f6f92159522b1cf"><div class="ttname"><a href="classBinnedSplineHandler.html#ad7470dbc245ccb614f6f92159522b1cf">BinnedSplineHandler::GlobalSystIndex</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; GlobalSystIndex</div><div class="ttdoc">This holds the global spline index and is used to grab the current parameter value to evaluate spline...</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00101">BinnedSplineHandler.h:101</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ae66666026b08ba7f67c21c41b9c46f02"><div class="ttname"><a href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">BinnedSplineHandler::SampleNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; SampleNames</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00085">BinnedSplineHandler.h:85</a></div></div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_ga58ccccc2b9a4280021e4663202612038"><div class="ttname"><a href="group__ParameterHandlerGetters.html#ga58ccccc2b9a4280021e4663202612038">ParameterHandlerGeneric::GetGlobalSystIndexFromSampleName</a></div><div class="ttdeci">const std::vector&lt; int &gt; GetGlobalSystIndexFromSampleName(const std::string &amp;SampleName, const SystType Type)</div><div class="ttdoc">DB Get spline parameters depending on given SampleName.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerGeneric_8cpp_source.html#l00233">ParameterHandlerGeneric.cpp:233</a></div></div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_ga9b25b6f2f2d032d086963293eeb981c4"><div class="ttname"><a href="group__ParameterHandlerGetters.html#ga9b25b6f2f2d032d086963293eeb981c4">ParameterHandlerGeneric::GetNumParamsFromSampleName</a></div><div class="ttdeci">int GetNumParamsFromSampleName(const std::string &amp;SampleName, const SystType Type)</div><div class="ttdoc">DB Grab the number of parameters for the relevant SampleName.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerGeneric_8cpp_source.html#l00378">ParameterHandlerGeneric.cpp:378</a></div></div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_gadc9644bbd41005c36945bc9504ef91fd"><div class="ttname"><a href="group__ParameterHandlerGetters.html#gadc9644bbd41005c36945bc9504ef91fd">ParameterHandlerGeneric::GetSplineParsNamesFromSampleName</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; GetSplineParsNamesFromSampleName(const std::string &amp;SampleName)</div><div class="ttdoc">DB Get spline parameters depending on given SampleName.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerGeneric_8cpp_source.html#l00115">ParameterHandlerGeneric.cpp:115</a></div></div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_gaedc568e5a86735a4b3d823d204431f99"><div class="ttname"><a href="group__ParameterHandlerGetters.html#gaedc568e5a86735a4b3d823d204431f99">ParameterHandlerGeneric::GetSplineInterpolationFromSampleName</a></div><div class="ttdeci">const std::vector&lt; SplineInterpolation &gt; GetSplineInterpolationFromSampleName(const std::string &amp;SampleName)</div><div class="ttdoc">Get the interpolation types for splines affecting a particular SampleName.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerGeneric_8cpp_source.html#l00129">ParameterHandlerGeneric.cpp:129</a></div></div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_gaf39a139867ff4837b7c6845636c9dcdc"><div class="ttname"><a href="group__ParameterHandlerGetters.html#gaf39a139867ff4837b7c6845636c9dcdc">ParameterHandlerGeneric::GetSplineModeVecFromSampleName</a></div><div class="ttdeci">const std::vector&lt; std::vector&lt; int &gt; &gt; GetSplineModeVecFromSampleName(const std::string &amp;SampleName)</div><div class="ttdoc">DB Grab the Spline Modes for the relevant SampleName.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerGeneric_8cpp_source.html#l00145">ParameterHandlerGeneric.cpp:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9112bad5ade2818e33a969429db514cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9112bad5ade2818e33a969429db514cd">&#9670;&nbsp;</a></span>BuildSampleIndexingArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::BuildSampleIndexingArray </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00350">350</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{  </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">int</span> iSample = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordtype">int</span> nSplineSysts = <a class="code" href="classBinnedSplineHandler.html#a4dbb81c0f4c8641580a9f9dd4231c8b1">nSplineParams</a>[iSample];</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">int</span> nOscChannels = <a class="code" href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">nOscChans</a>[iSample];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// Resize the main indexing structure</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.emplace_back(nOscChannels);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChannels; ++iOscChan)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.back()[iOscChan].resize(nSplineSysts);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSyst = 0; iSyst &lt; nSplineSysts; ++iSyst)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordtype">int</span> nModesInSyst = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[iSample][iSyst].size());</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.back()[iOscChan][iSyst].resize(nModesInSyst);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iMode = 0; iMode &lt; nModesInSyst; ++iMode)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nBins1 = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[iSample][iOscChan][0]-&gt;GetNbins();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nBins2 = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[iSample][iOscChan][1]-&gt;GetNbins();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nBins3 = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[iSample][iOscChan][2]-&gt;GetNbins();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.back()[iOscChan][iSyst][iMode]</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                .resize(nBins1,std::vector&lt;std::vector&lt;int&gt;&gt;(nBins2, std::vector&lt;int&gt;(nBins3, 0)));</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    } <span class="comment">// end of iSyst loop</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  } <span class="comment">// end of iOscChan loop</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a1e0e6f58e9d7b67a4c4a20987f927ff8"><div class="ttname"><a href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">BinnedSplineHandler::indexvec</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &gt; &gt; &gt; &gt; indexvec</div><div class="ttdoc">Variables related to determined which modes have splines and which piggy-back of other modes.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00112">BinnedSplineHandler.h:112</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_af4be12b4e410259ec60d311cdfeb1a99"><div class="ttname"><a href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">BinnedSplineHandler::GetSampleIndex</a></div><div class="ttdeci">int GetSampleIndex(const std::string &amp;SampleTitle) const</div><div class="ttdoc">Get index of sample based on name.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00735">BinnedSplineHandler.cpp:735</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a279a6350c12647741b5e903b8269a56c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a279a6350c12647741b5e903b8269a56c">&#9670;&nbsp;</a></span>CalcSplineWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::CalcSplineWeights </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CPU based code which eval weight for each spline. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>KS: Once could use "ParamValues" but this will result in tiny bit different results due to floating point precision </dd></dl>

<p>Implements <a class="el" href="classSplineBase.html#a1ceacf5fee1fc8438501582bef93a9b5">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00309">309</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">  #ifdef MULTITHREAD</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">  #pragma omp parallel for simd</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iCoeff = 0; iCoeff &lt; <a class="code" href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">uniquecoeffindices</a>.size(); ++iCoeff)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> iSpline = <a class="code" href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">uniquecoeffindices</a>[iCoeff];</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> uniqueIndex = short(<a class="code" href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">uniquesplinevec_Monolith</a>[iSpline]);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> currentsegment = short(<a class="code" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a>[uniqueIndex]);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> segCoeff = <a class="code" href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">coeffindexvec</a>[iSpline]+currentsegment;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> coeffOffset = segCoeff * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// These are what we can extract from the TSpline3</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> y = <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>[coeffOffset+<a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6">kCoeffY</a>];</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> b = <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>[coeffOffset+<a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42">kCoeffB</a>];</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> c = <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>[coeffOffset+<a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36">kCoeffC</a>];</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> d = <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>[coeffOffset+<a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d">kCoeffD</a>];</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Get the variation for this reconfigure for the ith parameter</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> xvar = (*<a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[uniqueIndex].splineParsPointer);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// The Delta(x) = xvar - x</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> dx = xvar - <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a>[segCoeff];</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">//Speedy 1% time boost https://en.cppreference.com/w/c/numeric/math/fma (see ND code!)</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> weight = <a class="code" href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a>(dx, <a class="code" href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a>(dx, <a class="code" href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a>(dx, d, c), b), y);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">//This is the speedy version of writing dx^3+b*dx^2+c*dx+d</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">//ETA - do we need this? We check later for negative weights and I wonder if this is even</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">//possible with the fmaf line above?</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span>(weight &lt; 0){weight = 0.;}  <span class="comment">//Stops is getting negative weights</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">weightvec_Monolith</a>[iSpline] = weight;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
<div class="ttc" id="aSplineCommon_8h_html_a790348db7c20fb9896e94403fbee52cf"><div class="ttname"><a href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a></div><div class="ttdeci">constexpr int _nCoeff_</div><div class="ttdoc">KS: We store coefficients {y,b,c,d} in one array one by one, this is only to define it once rather th...</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00013">SplineCommon.h:13</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42">kCoeffB</a></div><div class="ttdeci">@ kCoeffB</div><div class="ttdoc">Coefficient B.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00021">SplineCommon.h:21</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d">kCoeffD</a></div><div class="ttdeci">@ kCoeffD</div><div class="ttdoc">Coefficient D.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00024">SplineCommon.h:23</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6">kCoeffY</a></div><div class="ttdeci">@ kCoeffY</div><div class="ttdoc">Coefficient Y.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00020">SplineCommon.h:20</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36">kCoeffC</a></div><div class="ttdeci">@ kCoeffC</div><div class="ttdoc">Coefficient C.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00022">SplineCommon.h:22</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a2bf7d919dd21b6fa26356e6ac7ce61f6"><div class="ttname"><a href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">BinnedSplineHandler::coeffindexvec</a></div><div class="ttdeci">std::vector&lt; int &gt; coeffindexvec</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00113">BinnedSplineHandler.h:113</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a8e746122fde570e5ec454a708d61b6c8"><div class="ttname"><a href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">BinnedSplineHandler::uniquesplinevec_Monolith</a></div><div class="ttdeci">std::vector&lt; int &gt; uniquesplinevec_Monolith</div><div class="ttdoc">Maps single spline object with single parameter.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00134">BinnedSplineHandler.h:134</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a9e433fb12f9c6759bbf1b0eb61f1f34a"><div class="ttname"><a href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">BinnedSplineHandler::weightvec_Monolith</a></div><div class="ttdeci">std::vector&lt; M3::float_t &gt; weightvec_Monolith</div><div class="ttdoc">Stores weight from spline evaluation for each single spline.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00132">BinnedSplineHandler.h:132</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ac032bf729105a8848e3058a430d54250"><div class="ttname"><a href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">BinnedSplineHandler::uniquecoeffindices</a></div><div class="ttdeci">std::vector&lt; int &gt; uniquecoeffindices</div><div class="ttdoc">Unique coefficient indices.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00115">BinnedSplineHandler.h:115</a></div></div>
<div class="ttc" id="aclassSplineBase_html_a9452897aecfe016466543dfe19c0628b"><div class="ttname"><a href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineBase::SplineInfoArray</a></div><div class="ttdeci">std::vector&lt; FastSplineInfo &gt; SplineInfoArray</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00071">SplineBase.h:71</a></div></div>
<div class="ttc" id="anamespaceM3_html_a1f95274549f25fc19fe7db343c8a7a68"><div class="ttname"><a href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a></div><div class="ttdeci">double float_t</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00037">Core.h:37</a></div></div>
<div class="ttc" id="anamespaceM3_html_ad501f876b26ca2cef7bb5f434deaffb8"><div class="ttname"><a href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a></div><div class="ttdeci">constexpr T fmaf_t(T x, T y, T z)</div><div class="ttdoc">Function template for fused multiply-add.</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00045">Core.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d7fe695a7924712cd9c8bfc262f2ff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d7fe695a7924712cd9c8bfc262f2ff3">&#9670;&nbsp;</a></span>cleanUpMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::cleanUpMemory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove setup variables not needed for spline evaluations. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00043">43</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                                        {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">//Call once everything&#39;s been allocated in SampleHandlerFDBase, cleans up junk from memory!</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">//Not a huge saving but it&#39;s better than leaving everything up to the compiler</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Cleaning up spline memory&quot;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#ad7470dbc245ccb614f6f92159522b1cf">GlobalSystIndex</a>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a75583f3110d18b04557262520281503e">SplineInterpolationTypes</a>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">nOscChans</a>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a4dbb81c0f4c8641580a9f9dd4231c8b1">nSplineParams</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#aa3db668a55f3d3356f63cb055819b2b0">DimensionLabels</a>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="ParameterStructs_8h.html#ae6c2cd427c808007fa2a96f65663b976">CleanContainer</a>(<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="ParameterStructs_8h.html#ae6c2cd427c808007fa2a96f65663b976">CleanContainer</a>(<a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>) <span class="keyword">delete</span> [] <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
<div class="ttc" id="aParameterStructs_8h_html_a85aef80dc0fb38ccb4ff2f7b6a49a5ab"><div class="ttname"><a href="ParameterStructs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a></div><div class="ttdeci">void CleanVector(std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Generic cleanup function.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00043">ParameterStructs.h:43</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_ae6c2cd427c808007fa2a96f65663b976"><div class="ttname"><a href="ParameterStructs_8h.html#ae6c2cd427c808007fa2a96f65663b976">CleanContainer</a></div><div class="ttdeci">void CleanContainer(std::vector&lt; T * &gt; &amp;container)</div><div class="ttdoc">Generic cleanup function.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00116">ParameterStructs.h:116</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a6387e407a74af8f40202c573024c48ef"><div class="ttname"><a href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">BinnedSplineHandler::UniqueSystNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; UniqueSystNames</div><div class="ttdoc">name of each spline parameter</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00107">BinnedSplineHandler.h:107</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ac029b5a9c5b3b11874f5f1ada5acc31f"><div class="ttname"><a href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">BinnedSplineHandler::splinevec_Monolith</a></div><div class="ttdeci">std::vector&lt; TSpline3_red * &gt; splinevec_Monolith</div><div class="ttdoc">holds each spline object before stripping into coefficient monolith</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00118">BinnedSplineHandler.h:118</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aedb1c578eddc904c39b08aca36e5f75d"><div class="ttname"><a href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">BinnedSplineHandler::UniqueSystIndices</a></div><div class="ttdeci">std::vector&lt; int &gt; UniqueSystIndices</div><div class="ttdoc">Global index of each spline param, it allows us to match spline ordering with global.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00109">BinnedSplineHandler.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19b93ef716d594de4b0266dd84580cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19b93ef716d594de4b0266dd84580cfe">&#9670;&nbsp;</a></span>CountNumberOfLoadedSplines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinnedSplineHandler::CountNumberOfLoadedSplines </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>NonFlat</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Verbosity</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00485">485</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordtype">int</span> SampleCounter_NonFlat = 0;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordtype">int</span> SampleCounter_All = 0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordtype">int</span> FullCounter_NonFlat = 0;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordtype">int</span> FullCounter_All = 0;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(); iSample++)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    SampleCounter_NonFlat = 0;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    SampleCounter_All = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    std::string SampleTitle = <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>[iSample];</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size(); iSyst++)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        { <span class="comment">// Loop over modes</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;              { <span class="comment">// Loop over third dimension</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#ab8cf7e65f7d3ff6e9a3b9dbabb389f42">isValidSplineIndex</a>(SampleTitle, iOscChan, iSyst, iMode, iVar1, iVar2, iVar3))</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                  <span class="keywordtype">int</span> splineindex = <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex])</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                  {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    SampleCounter_NonFlat += 1;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                  }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                  SampleCounter_All += 1;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;              }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;{:&lt;10} has {:&lt;10} splines, of which {:&lt;10} are not flat&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>[iSample], SampleCounter_All, SampleCounter_NonFlat);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    FullCounter_NonFlat += SampleCounter_NonFlat;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    FullCounter_All += SampleCounter_All;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (Verbosity &gt; 0)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Total number of splines loaded: {}&quot;</span>, FullCounter_All);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Total number of non-flat splines loaded: {}&quot;</span>, FullCounter_NonFlat);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (NonFlat) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> FullCounter_NonFlat;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span> FullCounter_All;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a4db4657acad5c79ac4bbb66a9d1c5905"><div class="ttname"><a href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a></div><div class="ttdeci">#define MACH3LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00034">MaCh3Logger.h:34</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ab8cf7e65f7d3ff6e9a3b9dbabb389f42"><div class="ttname"><a href="classBinnedSplineHandler.html#ab8cf7e65f7d3ff6e9a3b9dbabb389f42">BinnedSplineHandler::isValidSplineIndex</a></div><div class="ttdeci">bool isValidSplineIndex(const std::string &amp;SampleTitle, int iSyst, int iOscChan, int iMode, int iVar1, int iVar2, int iVar3)</div><div class="ttdoc">Ensure we have spline for a given bin.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00785">BinnedSplineHandler.cpp:785</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45e151624b2e80880299293fb2cc4673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e151624b2e80880299293fb2cc4673">&#9670;&nbsp;</a></span>Evaluate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::Evaluate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations. </p>

<p>Implements <a class="el" href="classSplineBase.html#a86e629f3eef59b2f3800136c86fe90c3">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00295">295</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                   {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// There&#39;s a parameter mapping that goes from spline parameter to a global parameter index</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Find the spline segments</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">FindSplineSegment</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">//KS: Huge MP loop over all valid splines</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a279a6350c12647741b5e903b8269a56c">CalcSplineWeights</a>();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">//KS: Huge MP loop over all events calculating total weight</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a4df71482a066069b712a72f7108ffbcf">ModifyWeights</a>();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a279a6350c12647741b5e903b8269a56c"><div class="ttname"><a href="classBinnedSplineHandler.html#a279a6350c12647741b5e903b8269a56c">BinnedSplineHandler::CalcSplineWeights</a></div><div class="ttdeci">void CalcSplineWeights() override</div><div class="ttdoc">CPU based code which eval weight for each spline.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00309">BinnedSplineHandler.cpp:309</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a4df71482a066069b712a72f7108ffbcf"><div class="ttname"><a href="classBinnedSplineHandler.html#a4df71482a066069b712a72f7108ffbcf">BinnedSplineHandler::ModifyWeights</a></div><div class="ttdeci">void ModifyWeights() override</div><div class="ttdoc">Calc total event weight, not used by Bin-by-bin splines.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00080">BinnedSplineHandler.h:80</a></div></div>
<div class="ttc" id="aclassSplineBase_html_a589011b547ff70262ed43021a016ef30"><div class="ttname"><a href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">SplineBase::FindSplineSegment</a></div><div class="ttdeci">void FindSplineSegment()</div><div class="ttdoc">CW:Code used in step by step reweighting, Find Spline Segment for each param.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00024">SplineBase.cpp:24</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a4621f7bc5aa24a97fca813018b86b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a4621f7bc5aa24a97fca813018b86b4">&#9670;&nbsp;</a></span>FillSampleArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::FillSampleArray </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>SampleTitle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>OscChanFileNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads and processes splines from ROOT files for a given sample. </p>
<dl class="section note"><dt>Note</dt><dd>DB Add virtual so it can be overridden in experiment specific (if needed) </dd></dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00926">926</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;{</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordtype">int</span> iSample = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordtype">int</span> nOscChannels = <a class="code" href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">nOscChans</a>[iSample];</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChannels; iOscChan++) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Processing: {}&quot;</span>, OscChanFileNames[iOscChan]);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    TSpline3* mySpline = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="classTSpline3__red.html">TSpline3_red</a>* Spline = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    TString Syst, Mode;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordtype">int</span> nKnots, SystNum, ModeNum, Var1Bin, Var2Bin, Var3Bin = <a class="code" href="namespaceM3.html#ac289df32a5b3b05c61a87cbac5702b25">M3::_BAD_INT_</a>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordtype">double</span> x,y = <a class="code" href="namespaceM3.html#a2aed672aeeb4fcf51069966193176ff3">M3::_BAD_DOUBLE_</a>;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="SplineStructs_8h.html#aee66563def836e531cda07c5efa45d87">isFlat</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    std::set&lt;std::string&gt; SplineFileNames;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keyword">auto</span> File = std::unique_ptr&lt;TFile&gt;(<a class="code" href="namespaceM3.html#a87841bdbf0e0a2a733d9e4ca499f820d">TFile::Open</a>(OscChanFileNames[iOscChan].c_str()));</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (!File || File-&gt;IsZombie()) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;File {} not found&quot;</span>, OscChanFileNames[iOscChan]);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">//This is the MC specific part of the code</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">//i.e. we always assume that the splines are just store in  single TDirectory and they&#39;re all in there as single objects   </span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> k : *File-&gt;GetListOfKeys()) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keyword">auto</span> Key = <span class="keyword">static_cast&lt;</span>TKey*<span class="keyword">&gt;</span>(k);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      TClass *Class = gROOT-&gt;GetClass(Key-&gt;GetClassName(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">if</span>(!Class-&gt;InheritsFrom(<span class="stringliteral">&quot;TSpline3&quot;</span>)) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      std::string FullSplineName = std::string(Key-&gt;GetName());</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keywordflow">if</span> (SplineFileNames.count(FullSplineName) &gt; 0) {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#a07ff6d6a15b24f94afc88a1b89779beb">MACH3LOG_CRITICAL</a>(<span class="stringliteral">&quot;Skipping spline - Found a spline whose name has already been encountered before: {}&quot;</span>, FullSplineName);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      SplineFileNames.insert(FullSplineName);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      std::vector&lt;std::string&gt; Tokens = <a class="code" href="classBinnedSplineHandler.html#ab99efbdc5327faf9be83ec01b9462159">GetTokensFromSplineName</a>(FullSplineName);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">if</span> (Tokens.size() != <a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572">kNTokens</a>) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Invalid tokens from spline name - Expected {} tokens. Check implementation in GetTokensFromSplineName()&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a786e35460a66cd76056dd772055a1572">kNTokens</a>));</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      Syst = Tokens[<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a81e819b2ed8cee4b21ce534a166eeeb5">kSystToken</a>];</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      Mode = Tokens[<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a711ee221711365c7ba45d51b8f027d54">kModeToken</a>];</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      Var1Bin = std::stoi(Tokens[<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660ab6a3523389a1dca6a5775e525c048dfd">kVar1BinToken</a>]);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      Var2Bin = std::stoi(Tokens[<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660a3f0cc3b1b494394308167a877e8f3333">kVar2BinToken</a>]);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      Var3Bin = std::stoi(Tokens[<a class="code" href="classBinnedSplineHandler.html#aed96ca823d82fe9754e8961f4adcb660abb66cca77f4df329ac10abca491d7d23">kVar3BinToken</a>]);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      SystNum = -1;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>[iSample].size(); iSyst++) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">if</span> (Syst == <a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>[iSample][iSyst]) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          SystNum = iSyst;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="comment">// If the syst doesn&#39;t match any of the spline names then skip it</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">if</span> (SystNum == -1){</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Couldn&#39;t match!!&quot;</span>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Couldn&#39;t Match any systematic name in ParameterHandler with spline name: {}&quot;</span> , FullSplineName);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      ModeNum = -1;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[iSample][SystNum].size(); iMode++) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span> (Mode == <a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a>-&gt;<a class="code" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[iSample][SystNum][iMode])) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;          ModeNum = iMode;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="keywordflow">if</span> (ModeNum == -1) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="comment">//DB - If you have splines in the root file that you don&#39;t want to use (e.g. removing a mode from a syst), this will cause a throw</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="comment">//     Therefore include as debug warning and continue instead</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Couldn&#39;t find mode for {} in {}. Problem Spline is : {} &quot;</span>, Mode, Syst, FullSplineName);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      mySpline = Key-&gt;ReadObject&lt;TSpline3&gt;();</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#ab8cf7e65f7d3ff6e9a3b9dbabb389f42">isValidSplineIndex</a>(SampleTitle, iOscChan, SystNum, ModeNum, Var1Bin, Var2Bin, Var3Bin)) { <span class="comment">// loop over all the spline knots and check their value</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#afc88f0aa23c7127b2ff6e5c7ca3fa892">MACH3LOG_TRACE</a>(<span class="stringliteral">&quot;Pushed back monolith for spline {}&quot;</span>, FullSplineName);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="comment">// if the value is 1 then set the flat bool to false</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        nKnots = mySpline-&gt;GetNp();</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <a class="code" href="SplineStructs_8h.html#aee66563def836e531cda07c5efa45d87">isFlat</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iKnot = 0; iKnot &lt; nKnots; iKnot++) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;          mySpline-&gt;GetKnot(iKnot, x, y);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;          <span class="keywordflow">if</span> (y &lt; 0.99999 || y &gt; 1.00001)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;          {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <a class="code" href="SplineStructs_8h.html#aee66563def836e531cda07c5efa45d87">isFlat</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;          }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="comment">//Rather than keeping a mega vector of splines then converting, this should just keep everything nice in memory!</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][SystNum][ModeNum][Var1Bin][Var2Bin][Var3Bin]=<a class="code" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">coeffindexvec</a>.push_back(<a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">// Should save memory rather saving [x_i_0 ,... x_i_maxknots] for every spline!</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SplineStructs_8h.html#aee66563def836e531cda07c5efa45d87">isFlat</a>) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>.push_back(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;          <span class="keyword">delete</span> mySpline;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;          <a class="code" href="SplineStructs_8h.html#aa4f388789b6229f3a8a1ef237bf56583">ApplyKnotWeightCapTSpline3</a>(mySpline, SystNum, <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;          Spline = <span class="keyword">new</span> <a class="code" href="classTSpline3__red.html">TSpline3_red</a>(mySpline, <a class="code" href="classBinnedSplineHandler.html#a75583f3110d18b04557262520281503e">SplineInterpolationTypes</a>[iSample][SystNum]);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;          <span class="keywordflow">if</span>(mySpline) <span class="keyword">delete</span> mySpline;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>.push_back(Spline);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">uniquecoeffindices</a>.push_back(<a class="code" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a>); <span class="comment">//So we can get the unique coefficients and skip flat splines later on!</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>+=nKnots;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="comment">//Incrementing MonolithIndex to keep track of number of valid spline indices</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <a class="code" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a>+=1;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="comment">//Potentially you are not a valid spline index</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="keyword">delete</span> mySpline;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }<span class="comment">//End of loop over all TKeys in file</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">//A bit of clean up</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    File-&gt;Delete(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    File-&gt;Close();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  } <span class="comment">//End of oscillation channel loop</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a07ff6d6a15b24f94afc88a1b89779beb"><div class="ttname"><a href="MaCh3Logger_8h.html#a07ff6d6a15b24f94afc88a1b89779beb">MACH3LOG_CRITICAL</a></div><div class="ttdeci">#define MACH3LOG_CRITICAL</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00038">MaCh3Logger.h:38</a></div></div>
<div class="ttc" id="aMaCh3Logger_8h_html_afc88f0aa23c7127b2ff6e5c7ca3fa892"><div class="ttname"><a href="MaCh3Logger_8h.html#afc88f0aa23c7127b2ff6e5c7ca3fa892">MACH3LOG_TRACE</a></div><div class="ttdeci">#define MACH3LOG_TRACE</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00033">MaCh3Logger.h:33</a></div></div>
<div class="ttc" id="aSplineStructs_8h_html_aa4f388789b6229f3a8a1ef237bf56583"><div class="ttname"><a href="SplineStructs_8h.html#aa4f388789b6229f3a8a1ef237bf56583">ApplyKnotWeightCapTSpline3</a></div><div class="ttdeci">void ApplyKnotWeightCapTSpline3(TSpline3 *&amp;Spline, const int splineParsIndex, ParameterHandlerGeneric *XsecCov)</div><div class="ttdoc">EM: Apply capping to knot weight for specified spline parameter. param graph needs to have been set i...</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00098">SplineStructs.h:98</a></div></div>
<div class="ttc" id="aSplineStructs_8h_html_aee66563def836e531cda07c5efa45d87"><div class="ttname"><a href="SplineStructs_8h.html#aee66563def836e531cda07c5efa45d87">isFlat</a></div><div class="ttdeci">bool isFlat(TSpline3_red *&amp;spl)</div><div class="ttdoc">CW: Helper function used in the constructor, tests to see if the spline is flat.</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00780">SplineStructs.h:780</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ab99efbdc5327faf9be83ec01b9462159"><div class="ttname"><a href="classBinnedSplineHandler.html#ab99efbdc5327faf9be83ec01b9462159">BinnedSplineHandler::GetTokensFromSplineName</a></div><div class="ttdeci">virtual std::vector&lt; std::string &gt; GetTokensFromSplineName(std::string FullSplineName)=0</div></div>
<div class="ttc" id="aclassMaCh3Modes_html_a94d555d153fd328abd3c4411a285b3d3"><div class="ttname"><a href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">MaCh3Modes::GetSplineSuffixFromMaCh3Mode</a></div><div class="ttdeci">std::string GetSplineSuffixFromMaCh3Mode(const int Index)</div><div class="ttdoc">DB: Get binned spline mode suffic from MaCh3 Mode.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Modes_8cpp_source.html#l00243">MaCh3Modes.cpp:243</a></div></div>
<div class="ttc" id="aclassTSpline3__red_html"><div class="ttname"><a href="classTSpline3__red.html">TSpline3_red</a></div><div class="ttdoc">CW: Reduced TSpline3 class.</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00265">SplineStructs.h:265</a></div></div>
<div class="ttc" id="anamespaceM3_html_a2aed672aeeb4fcf51069966193176ff3"><div class="ttname"><a href="namespaceM3.html#a2aed672aeeb4fcf51069966193176ff3">M3::_BAD_DOUBLE_</a></div><div class="ttdeci">constexpr static const double _BAD_DOUBLE_</div><div class="ttdoc">Default value used for double initialisation.</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00053">Core.h:53</a></div></div>
<div class="ttc" id="anamespaceM3_html_a87841bdbf0e0a2a733d9e4ca499f820d"><div class="ttname"><a href="namespaceM3.html#a87841bdbf0e0a2a733d9e4ca499f820d">M3::Open</a></div><div class="ttdeci">TFile * Open(const std::string &amp;Name, const std::string &amp;Type, const std::string &amp;File, const int Line)</div><div class="ttdoc">Opens a ROOT file with the given name and mode.</div><div class="ttdef"><b>Definition:</b> <a href="HistogramUtils_8cpp_source.html#l00627">HistogramUtils.cpp:627</a></div></div>
<div class="ttc" id="anamespaceM3_html_ac289df32a5b3b05c61a87cbac5702b25"><div class="ttname"><a href="namespaceM3.html#ac289df32a5b3b05c61a87cbac5702b25">M3::_BAD_INT_</a></div><div class="ttdeci">constexpr static const int _BAD_INT_</div><div class="ttdoc">Default value used for int initialisation.</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00055">Core.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3cfd3c0730281791227f25f04c944ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cfd3c0730281791227f25f04c944ee">&#9670;&nbsp;</a></span>FindSplineBinning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; TAxis * &gt; BinnedSplineHandler::FindSplineBinning </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>FileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Grab histograms with spline binning. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00382">382</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordtype">int</span> iSample = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">//Try declaring these outside of TFile so they aren&#39;t owned by File</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  constexpr <span class="keywordtype">int</span> nDummyBins = 1;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  constexpr <span class="keywordtype">double</span> DummyEdges[2] = {-1e15, 1e15};</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  TAxis* DummyAxis = <span class="keyword">new</span> TAxis(nDummyBins, DummyEdges);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  TH2F* Hist2D = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  TH3F* Hist3D = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keyword">auto</span> File = std::unique_ptr&lt;TFile&gt;(<a class="code" href="namespaceM3.html#a87841bdbf0e0a2a733d9e4ca499f820d">TFile::Open</a>(FileName.c_str(), <span class="stringliteral">&quot;READ&quot;</span>));</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (!File || File-&gt;IsZombie())</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;File {} not found&quot;</span>, FileName);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;This is caused by something here! {} : {}&quot;</span>, __FILE__, __LINE__);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Finding binning for:&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{}&quot;</span>, FileName);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  std::string TemplateName = <span class="stringliteral">&quot;dev_tmp_0_0&quot;</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  TObject *Obj = File-&gt;Get(TemplateName.c_str());</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">//If you can&#39;t find dev_tmp_0_0 then this will cause a problem</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (!Obj)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    TemplateName = <span class="stringliteral">&quot;dev_tmp.0.0&quot;</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    Obj = File-&gt;Get(TemplateName.c_str());</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (!Obj)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Could not find dev_tmp_0_0 in spline file. Spline binning cannot be set!&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;FileName: {}&quot;</span>, FileName);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">//Now check if dev_tmp_0_0 is a TH2 i.e. specifying the dimensions of the splines is 2D</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">bool</span> isHist2D = Obj-&gt;IsA() == TH2F::Class();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">//For T2K annoyingly all objects are TH3Fs</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordtype">bool</span> isHist3D = Obj-&gt;IsA() == TH3F::Class();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (!isHist2D &amp;&amp; !isHist3D)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Object doesn&#39;t inherit from either TH2D and TH3D - Odd A&quot;</span>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span> (isHist2D)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample] != 2)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to load a 2D spline template when nDim={}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample]);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    Hist2D = File-&gt;Get&lt;TH2F&gt;(TemplateName.c_str());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (isHist3D)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    Hist3D = File-&gt;Get&lt;TH3F&gt;((TemplateName.c_str()));</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample] != 3 &amp;&amp; Hist3D-&gt;GetZaxis()-&gt;GetNbins() != 1)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to load a 3D spline template when nDim={}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample]);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    Hist3D = File-&gt;Get&lt;TH3F&gt;(TemplateName.c_str());</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  std::vector&lt;TAxis*&gt; ReturnVec;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// KS: Resize to reduce impact of push back and memory fragmentation</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  ReturnVec.resize(3);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample] == 2) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (isHist2D) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      ReturnVec[0] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist2D-&gt;GetXaxis()-&gt;Clone());</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      ReturnVec[1] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist2D-&gt;GetYaxis()-&gt;Clone());</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      ReturnVec[2] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(DummyAxis-&gt;Clone());</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isHist3D) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      ReturnVec[0] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetXaxis()-&gt;Clone());</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      ReturnVec[1] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetYaxis()-&gt;Clone());</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      ReturnVec[2] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(DummyAxis-&gt;Clone());</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample] == 3) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    ReturnVec[0] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetXaxis()-&gt;Clone());</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    ReturnVec[1] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetYaxis()-&gt;Clone());</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    ReturnVec[2] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetZaxis()-&gt;Clone());</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Number of dimensions not valid! Given: {}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample]);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iAxis = 0; iAxis &lt; ReturnVec.size(); ++iAxis) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a37c341f5f23957b0e928e617486842da">PrintBinning</a>(ReturnVec[iAxis]);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Left PrintBinning now tidying up&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keyword">delete</span> DummyAxis;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a37c341f5f23957b0e928e617486842da"><div class="ttname"><a href="classBinnedSplineHandler.html#a37c341f5f23957b0e928e617486842da">BinnedSplineHandler::PrintBinning</a></div><div class="ttdeci">void PrintBinning(TAxis *Axis) const</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00824">BinnedSplineHandler.cpp:824</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b8ef77922fdeddb085c3a9d0d1cb6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b8ef77922fdeddb085c3a9d0d1cb6c9">&#9670;&nbsp;</a></span>getDimLabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BinnedSplineHandler::getDimLabel </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>BinningOpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>Axis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00722">722</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;{</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span>(Axis &gt; <a class="code" href="classBinnedSplineHandler.html#aa3db668a55f3d3356f63cb055819b2b0">DimensionLabels</a>[iSample].size()){</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;The spline Axis you are trying to get the label of is larger than the number of dimensions&quot;</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;You are trying to get axis {} but have only got {}&quot;</span>, Axis, <a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample]);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classBinnedSplineHandler.html#aa3db668a55f3d3356f63cb055819b2b0">DimensionLabels</a>.at(iSample).at(Axis);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e3cd817c57cfbce64d08db8854bbdc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e3cd817c57cfbce64d08db8854bbdc0">&#9670;&nbsp;</a></span>GetEventSplines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; BinnedSplineHandler::GetEventSplines </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iOscChan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>EventMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Var1Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Var2Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Var3Val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the splines which affect a given event. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00836">836</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;{</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  std::vector&lt;std::vector&lt;int&gt;&gt; ReturnVec;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordtype">int</span> SampleIndex = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordtype">int</span> nSplineSysts = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[SampleIndex][iOscChan].size());</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordtype">int</span> Mode = -1;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  std::string SuffixForEventMode = <a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a>-&gt;<a class="code" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(EventMode);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iMode=0;iMode&lt;<a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a>-&gt;<a class="code" href="classMaCh3Modes.html#a1996581eab0194698a4ddccf3b189d49">GetNModes</a>();iMode++) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (SuffixForEventMode == <a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a>-&gt;<a class="code" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(iMode)) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      Mode = iMode;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (Mode == -1) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordtype">int</span> Var1Bin = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[SampleIndex][iOscChan][0]-&gt;FindBin(Var1Val)-1;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">if</span> (Var1Bin &lt; 0 || Var1Bin &gt;= <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[SampleIndex][iOscChan][0]-&gt;GetNbins()) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordtype">int</span> Var2Bin = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[SampleIndex][iOscChan][1]-&gt;FindBin(Var2Val)-1;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">if</span> (Var2Bin &lt; 0 || Var2Bin &gt;= <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[SampleIndex][iOscChan][1]-&gt;GetNbins()) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordtype">int</span> Var3Bin = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[SampleIndex][iOscChan][2]-&gt;FindBin(Var3Val)-1;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">if</span> (Var3Bin &lt; 0 || Var3Bin &gt;= <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[SampleIndex][iOscChan][2]-&gt;GetNbins()){</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iSyst=0; iSyst&lt;nSplineSysts; iSyst++){</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    std::vector&lt;int&gt; spline_modes = <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[SampleIndex][iSyst];</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordtype">int</span> nSampleModes = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(spline_modes.size());</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">//ETA - look here at the length of spline_modes and what you&#39;re actually comparing against</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iMode = 0; iMode&lt;nSampleModes ; iMode++){</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="comment">//Only consider if the event mode (Mode) matches ones of the spline modes</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">if</span> (Mode == spline_modes[iMode]) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordtype">int</span> splineID=<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[SampleIndex][iOscChan][iSyst][iMode][Var1Bin][Var2Bin][Var3Bin];</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">//Also check that the spline isn&#39;t flat</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>[splineID]){</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          ReturnVec.push_back({SampleIndex, iOscChan, iSyst, iMode, Var1Bin, Var2Bin, Var3Bin});</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div>
<div class="ttc" id="aclassMaCh3Modes_html_a1996581eab0194698a4ddccf3b189d49"><div class="ttname"><a href="classMaCh3Modes.html#a1996581eab0194698a4ddccf3b189d49">MaCh3Modes::GetNModes</a></div><div class="ttdeci">int GetNModes() const</div><div class="ttdoc">KS: Get number of modes, keep in mind actual number is +1 greater due to unknown category.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Modes_8h_source.html#l00054">MaCh3Modes.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4be12b4e410259ec60d311cdfeb1a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4be12b4e410259ec60d311cdfeb1a99">&#9670;&nbsp;</a></span>GetSampleIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BinnedSplineHandler::GetSampleIndex </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get index of sample based on name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SampleTitle</td><td>The title of the sample to search for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00735">735</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                                                                         {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iSample = 0; iSample &lt; <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>.size(); ++iSample) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (SampleTitle == <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>[iSample]) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(iSample);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Sample name not found: {}&quot;</span>, SampleTitle);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a05fd3d9253866f067ca3a184fa1ece06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05fd3d9253866f067ca3a184fa1ece06">&#9670;&nbsp;</a></span>getSplineCoeff_SepMany()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::getSplineCoeff_SepMany </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>splineindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>xArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>manyArray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00686">686</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                                                                                          {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">//No point evaluating a flat spline</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordtype">int</span> nPoints = <a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex]-&gt;GetNp();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nPoints; i++) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    xArray[i] = 1.0;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>; j++) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      manyArray[i*<a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>+j] = 1.0;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nPoints; i++) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> x = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> y = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> b = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> c = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> d = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex]-&gt;GetCoeff(i, x, y, b, c, d);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// Store the coefficients for each knot contiguously in memory</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// 4 because manyArray stores y,b,c,d</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    xArray[i] = x;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    manyArray[i * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a> + <a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6">kCoeffY</a>] = y;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    manyArray[i * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a> + <a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42">kCoeffB</a>] = b;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    manyArray[i * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a> + <a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36">kCoeffC</a>] = c;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    manyArray[i * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a> + <a class="code" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d">kCoeffD</a>] = d;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">//We now clean up the splines!</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keyword">delete</span> <a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex];</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab99efbdc5327faf9be83ec01b9462159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab99efbdc5327faf9be83ec01b9462159">&#9670;&nbsp;</a></span>GetTokensFromSplineName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::vector&lt;std::string&gt; BinnedSplineHandler::GetTokensFromSplineName </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>FullSplineName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a443ea4b9ad0d8c5f065048bb67a91ed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a443ea4b9ad0d8c5f065048bb67a91ed3">&#9670;&nbsp;</a></span>InvestigateMissingSplines()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::InvestigateMissingSplines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will find missing splines in file. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00123">123</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                                          {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Map: iSample  iSyst  modeSuffix  {totalSplines, zeroCount}</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  std::map&lt;unsigned int, std::map&lt;unsigned int, std::map&lt;std::string, std::pair&lt;unsigned int, unsigned int&gt;&gt;&gt;&gt; systZeroCounts;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(); iSample++) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    std::string SampleName = <a class="code" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a>[iSample];</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Get list of systematic names for this sample</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    std::vector&lt;std::string&gt; SplineFileParPrefixNames_Sample =</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#ga9b36c926e52b06b2b49df1deb7630151">GetParsNamesFromSampleName</a>(SampleName, <a class="code" href="ParameterStructs_8h.html#affc27d8b7b82d3713f45af17873fde2fa29d6ccf6cf507f6e66c72b1d3c2aed00">kSpline</a>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(); iOscChan++) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size(); iSyst++) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> zeroCount = 0;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalSplines = 0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          <span class="comment">// Get the mode suffix string</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          std::string modeSuffix =</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a>-&gt;<a class="code" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[iSample][iSyst][iMode]);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                totalSplines++;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3] == 0) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                  zeroCount++;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                  <span class="keywordflow">if</span>(zeroCount &gt; 1){</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    systZeroCounts[iSample][iSyst][modeSuffix] = {totalSplines, zeroCount};</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                  }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                  <a class="code" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    <span class="stringliteral">&quot;Sample &#39;{}&#39; | OscChan {} | Syst &#39;{}&#39; | Mode &#39;{}&#39; | Var1 {} | Var2 {} | Var3 {} =&gt; Value: {}&quot;</span>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>[iSample],</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    iOscChan,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    SplineFileParPrefixNames_Sample[iSyst],</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    modeSuffix,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    iVar1,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    iVar2,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    iVar3,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3]</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                  );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;              }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// KS: Let&#39;s print this atrocious mess...</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; samplePair : systZeroCounts) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = samplePair.first;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    std::vector&lt;std::string&gt; SplineFileParPrefixNames_Sample = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#ga9b36c926e52b06b2b49df1deb7630151">GetParsNamesFromSampleName</a>(<a class="code" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a>[iSample], <a class="code" href="ParameterStructs_8h.html#affc27d8b7b82d3713f45af17873fde2fa29d6ccf6cf507f6e66c72b1d3c2aed00">kSpline</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; systPair : samplePair.second) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = systPair.first;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; systName = SplineFileParPrefixNames_Sample[iSyst];</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; modePair : systPair.second) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; modeSuffix = modePair.first;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; counts = modePair.second;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="MaCh3Logger_8h.html#a07ff6d6a15b24f94afc88a1b89779beb">MACH3LOG_CRITICAL</a>(</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="stringliteral">&quot;Sample &#39;{}&#39;: Systematic &#39;{}&#39; has missing splines in mode &#39;{}&#39;. Expected Splines: {}, Missing Splines: {}&quot;</span>,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>[iSample],</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          systName,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          modeSuffix,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          counts.first,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          counts.second</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        );</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_ga9b36c926e52b06b2b49df1deb7630151"><div class="ttname"><a href="group__ParameterHandlerGetters.html#ga9b36c926e52b06b2b49df1deb7630151">ParameterHandlerGeneric::GetParsNamesFromSampleName</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; GetParsNamesFromSampleName(const std::string &amp;SampleName, const SystType Type)</div><div class="ttdoc">DB Grab the parameter names for the relevant SampleName.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerGeneric_8cpp_source.html#l00390">ParameterHandlerGeneric.cpp:390</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8cf7e65f7d3ff6e9a3b9dbabb389f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8cf7e65f7d3ff6e9a3b9dbabb389f42">&#9670;&nbsp;</a></span>isValidSplineIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BinnedSplineHandler::isValidSplineIndex </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iSyst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iOscChan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iVar1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iVar2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iVar3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensure we have spline for a given bin. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00785">785</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordtype">int</span> iSample = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordtype">bool</span> isValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// Lambda to check if an index is valid for a specific dimension</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keyword">auto</span> checkIndex = [&amp;isValid](<span class="keywordtype">int</span> index, <span class="keywordtype">size_t</span> size, <span class="keyword">const</span> std::string&amp; name) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= <span class="keywordtype">int</span>(size)) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;{} index is invalid! 0 &lt;= Index &lt; {} &quot;</span>, name, size);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      isValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  };</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  checkIndex(iSample, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(), <span class="stringliteral">&quot;Sample&quot;</span>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">if</span> (isValid) checkIndex(iOscChan, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(), <span class="stringliteral">&quot;OscChan&quot;</span>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">if</span> (isValid) checkIndex(iSyst, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size(), <span class="stringliteral">&quot;Syst&quot;</span>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">if</span> (isValid) checkIndex(iMode, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size(), <span class="stringliteral">&quot;Mode&quot;</span>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">if</span> (isValid) checkIndex(iVar1, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(), <span class="stringliteral">&quot;Var1&quot;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> (isValid) checkIndex(iVar2, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(), <span class="stringliteral">&quot;Var2&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">if</span> (isValid) checkIndex(iVar3, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(), <span class="stringliteral">&quot;Var3&quot;</span>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">if</span> (!isValid)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iSample: {}&quot;</span>, iSample);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iOscChan: {}&quot;</span>, iOscChan);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iSyst: {}&quot;</span>, iSyst);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iMode: {}&quot;</span>, iMode);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iVar1: {}&quot;</span>, iVar1);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iVar2: {}&quot;</span>, iVar2);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iVar3: {}&quot;</span>, iVar3);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Come visit me at : {} : {}&quot;</span>, __FILE__, __LINE__);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a176d5a7858bbbb69b2ff3bdebc6d02a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176d5a7858bbbb69b2ff3bdebc6d02a7">&#9670;&nbsp;</a></span>LoadIndexDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::LoadIndexDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Load preprocessed Index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01204">1204</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                                                                       {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  TTree *IndexTree = SplineFile-&gt;Get&lt;TTree&gt;(<span class="stringliteral">&quot;IndexVec&quot;</span>);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  std::vector&lt;int&gt; Dim(7);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordtype">int</span> value;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; 7; ++d) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    IndexTree-&gt;SetBranchAddress(Form(<span class="stringliteral">&quot;dim%d&quot;</span>, d+1), &amp;Dim[d]);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  IndexTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;value&quot;</span>, &amp;value);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// Fill indexvec with data from IndexTree</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">for</span> (Long64_t i = 0; i &lt; IndexTree-&gt;GetEntries(); ++i) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    IndexTree-&gt;GetEntry(i);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[Dim[0]][Dim[1]][Dim[2]][Dim[3]][Dim[4]][Dim[5]][Dim[6]] = value;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// Load SplineBinning data</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  TTree *SplineBinningTree = SplineFile-&gt;Get&lt;TTree&gt;(<span class="stringliteral">&quot;SplineBinningTree&quot;</span>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  std::vector&lt;int&gt; indices(3);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  SplineBinningTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;i&quot;</span>, &amp;indices[0]);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  SplineBinningTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;j&quot;</span>, &amp;indices[1]);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  SplineBinningTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;k&quot;</span>, &amp;indices[2]);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  TAxis* axis = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  SplineBinningTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;axis&quot;</span>, &amp;axis);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// Reconstruct TAxis objects</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">for</span> (Long64_t entry = 0; entry &lt; SplineBinningTree-&gt;GetEntries(); ++entry) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    SplineBinningTree-&gt;GetEntry(entry);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordtype">int</span> i = indices[0];</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordtype">int</span> j = indices[1];</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordtype">int</span> k = indices[2];</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[i][j][k] = <span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(axis-&gt;Clone());</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  std::vector&lt;int&gt; indices_mode(3);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordtype">int</span> mode_value;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  TTree *SplineModeTree = SplineFile-&gt;Get&lt;TTree&gt;(<span class="stringliteral">&quot;SplineModeTree&quot;</span>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  SplineModeTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;i&quot;</span>, &amp;indices_mode[0]);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  SplineModeTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;j&quot;</span>, &amp;indices_mode[1]);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  SplineModeTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;k&quot;</span>, &amp;indices_mode[2]);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  SplineModeTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;value&quot;</span>, &amp;mode_value);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// Fill SplineModeVecs with values from the tree</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="keywordflow">for</span> (Long64_t entry = 0; entry &lt; SplineModeTree-&gt;GetEntries(); ++entry) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    SplineModeTree-&gt;GetEntry(entry);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordtype">int</span> i = indices_mode[0];</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordtype">int</span> j = indices_mode[1];</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordtype">int</span> k = indices_mode[2];</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[i][j][k] = mode_value;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4affb91911fc7fd636bcd675d67dcf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4affb91911fc7fd636bcd675d67dcf2">&#9670;&nbsp;</a></span>LoadMonolithDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::LoadMonolithDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Load preprocessed Monolith. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01170">1170</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                                                                          {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  TTree *MonolithTree = SplineFile-&gt;Get&lt;TTree&gt;(<span class="stringliteral">&quot;MonolithTree&quot;</span>);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a> = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[<a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a> * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>];</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;manycoeff&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>];</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">weightvec_Monolith</a>.resize(<a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;isflatarray&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">// Load vectors</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  std::vector&lt;int&gt;* coeffindexvec_temp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;coeffindexvec&quot;</span>, &amp;coeffindexvec_temp);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  std::vector&lt;int&gt;* uniquecoeffindices_temp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;uniquecoeffindices&quot;</span>, &amp;uniquecoeffindices_temp);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  std::vector&lt;int&gt;* uniquesplinevec_Monolith_temp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;uniquesplinevec_Monolith&quot;</span>, &amp;uniquesplinevec_Monolith_temp);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  std::vector&lt;int&gt;* UniqueSystIndices_temp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;UniqueSystIndices&quot;</span>, &amp;UniqueSystIndices_temp);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Allocate and load xcoeff_arr</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a> = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[<a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>];</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  MonolithTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;xcoeff&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a>);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  MonolithTree-&gt;GetEntry(0);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">coeffindexvec</a>       = *coeffindexvec_temp;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">uniquecoeffindices</a>  = *uniquecoeffindices_temp;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">uniquesplinevec_Monolith</a> = *uniquesplinevec_Monolith_temp;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a> = *UniqueSystIndices_temp;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;}</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_acb076b2a7c8cdb53d70dfb33ddd344b7"><div class="ttname"><a href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">BinnedSplineHandler::MonolithSize</a></div><div class="ttdeci">int MonolithSize</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8h_source.html#l00120">BinnedSplineHandler.h:120</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ad4f3e2807dc537f450a5893bfe6246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ad4f3e2807dc537f450a5893bfe6246">&#9670;&nbsp;</a></span>LoadSettingsDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::LoadSettingsDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Load preprocessed Settings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01096">1096</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                                                          {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  TTree *Settings = SplineFile-&gt;Get&lt;TTree&gt;(<span class="stringliteral">&quot;Settings&quot;</span>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordtype">int</span> CoeffIndex_temp, MonolithSize_temp;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordtype">short</span> <span class="keywordtype">int</span> nParams_temp;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;CoeffIndex&quot;</span>, &amp;CoeffIndex_temp);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;MonolithSize&quot;</span>, &amp;MonolithSize_temp);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;nParams&quot;</span>, &amp;nParams_temp);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">int</span> indexvec_sizes[7];</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 7; ++i) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    Settings-&gt;SetBranchAddress((<span class="stringliteral">&quot;indexvec_size&quot;</span> + std::to_string(i+1)).c_str(), &amp;indexvec_sizes[i]);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordtype">int</span> SplineBinning_size1, SplineBinning_size2, SplineBinning_size3;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SplineBinning_size1&quot;</span>, &amp;SplineBinning_size1);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SplineBinning_size2&quot;</span>, &amp;SplineBinning_size2);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SplineBinning_size3&quot;</span>, &amp;SplineBinning_size3);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordtype">int</span> SplineModeVecs_size1, SplineModeVecs_size2, SplineModeVecs_size3;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SplineModeVecs_size1&quot;</span>, &amp;SplineModeVecs_size1);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SplineModeVecs_size2&quot;</span>, &amp;SplineModeVecs_size2);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SplineModeVecs_size3&quot;</span>, &amp;SplineModeVecs_size3);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  std::vector&lt;std::string&gt;* SampleNames_temp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SampleNames&quot;</span>, &amp;SampleNames_temp);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  std::vector&lt;std::string&gt;* SampleTitles_temp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  Settings-&gt;SetBranchAddress(<span class="stringliteral">&quot;SampleTitles&quot;</span>, &amp;SampleTitles_temp);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  Settings-&gt;GetEntry(0);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a> = CoeffIndex_temp;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a> = MonolithSize_temp;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a> = *SampleNames_temp;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a> = *SampleTitles_temp;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a> = nParams_temp;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a> = <span class="keyword">new</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span>[<a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>]();</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a> = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>]();</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// Resize indexvec according to saved dimensions</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.resize(indexvec_sizes[0]);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; indexvec_sizes[0]; ++i) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i].resize(indexvec_sizes[1]);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; indexvec_sizes[1]; ++j) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j].resize(indexvec_sizes[2]);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; indexvec_sizes[2]; ++k) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k].resize(indexvec_sizes[3]);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 0; l &lt; indexvec_sizes[3]; ++l) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l].resize(indexvec_sizes[4]);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 0; m &lt; indexvec_sizes[4]; ++m) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l][m].resize(indexvec_sizes[5]);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; indexvec_sizes[5]; ++n) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;              <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l][m][n].resize(indexvec_sizes[6]);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;          }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keyword">auto</span> Resize3D = [](<span class="keyword">auto</span>&amp; vec, <span class="keywordtype">int</span> d1, <span class="keywordtype">int</span> d2, <span class="keywordtype">int</span> d3) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    vec.resize(d1);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; d1; ++i) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      vec[i].resize(d2);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; d2; ++j) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        vec[i][j].resize(d3);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  };</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  Resize3D(<a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>, SplineBinning_size1, SplineBinning_size2, SplineBinning_size3);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  Resize3D(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>, SplineModeVecs_size1, SplineModeVecs_size2, SplineModeVecs_size3);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div>
<div class="ttc" id="aclassSplineBase_html_a2165b057a0125a28d96f247ca8680b42"><div class="ttname"><a href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">SplineBase::nParams</a></div><div class="ttdeci">short int nParams</div><div class="ttdoc">Number of parameters that have splines.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00078">SplineBase.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a614d30bc719514ec496221303e1330c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a614d30bc719514ec496221303e1330c5">&#9670;&nbsp;</a></span>LoadSplineFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::LoadSplineFile </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>FileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Load preprocessed spline file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">FileName</td><td>Path to ROOT file with predefined reduced Spline Monolith </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classSplineBase.html#ad107ad4a91c5de35f14f3805bc52c1d3">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01057">1057</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                                           {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <a class="code" href="namespaceM3.html#ad7693a9e309503bd894b04443f163f3c">M3::AddPath</a>(FileName);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// Check for spaces in the filename</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordtype">size_t</span> pos = FileName.find(<span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (pos != std::string::npos) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#ad5b2eb6377721e3ac95def22c2386bb1">MACH3LOG_WARN</a>(<span class="stringliteral">&quot;Filename ({}) contains spaces. Replacing spaces with underscores.&quot;</span>, FileName);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">while</span> ((pos = FileName.find(<span class="charliteral">&#39; &#39;</span>)) != std::string::npos) {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      FileName[pos] = <span class="charliteral">&#39;_&#39;</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keyword">auto</span> SplineFile = std::make_unique&lt;TFile&gt;(FileName.c_str(), <span class="stringliteral">&quot;OPEN&quot;</span>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  TMacro *ConfigCov = SplineFile-&gt;Get&lt;TMacro&gt;(<span class="stringliteral">&quot;ParameterHandler&quot;</span>);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// Config which was in MCMC from which we are starting</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  YAML::Node CovSettings = <a class="code" href="YamlHelper_8h.html#a7e0ade2fd295a927676c243c97d0aa64">TMacroToYAML</a>(*ConfigCov);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// Config from currently used cov object</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  YAML::Node ConfigCurrent = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#gade58875564157c7c0aad0433498f955d">GetConfig</a>();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="YamlHelper_8h.html#ac79360f33b9ee8b7ecf11cc7429ffd0c">compareYAMLNodes</a>(CovSettings, ConfigCurrent))</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Loading precomputed spline file, however encountered different YAML config, please regenerate input&quot;</span>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a2ad4f3e2807dc537f450a5893bfe6246">LoadSettingsDir</a>(SplineFile);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ab4affb91911fc7fd636bcd675d67dcf2">LoadMonolithDir</a>(SplineFile);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a176d5a7858bbbb69b2ff3bdebc6d02a7">LoadIndexDir</a>(SplineFile);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <a class="code" href="classSplineBase.html#ad4f4b51619ef0573c7f1497f5d1fd52d">LoadFastSplineInfoDir</a>(SplineFile);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSpline = 0; iSpline &lt; <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iSpline++) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].splineParsPointer = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="classParameterHandlerBase.html#a2929feac84b65e987bc92448754c5b1b">RetPointer</a>(<a class="code" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a>[iSpline]);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  SplineFile-&gt;Close();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_ad5b2eb6377721e3ac95def22c2386bb1"><div class="ttname"><a href="MaCh3Logger_8h.html#ad5b2eb6377721e3ac95def22c2386bb1">MACH3LOG_WARN</a></div><div class="ttdeci">#define MACH3LOG_WARN</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00036">MaCh3Logger.h:36</a></div></div>
<div class="ttc" id="aYamlHelper_8h_html_a7e0ade2fd295a927676c243c97d0aa64"><div class="ttname"><a href="YamlHelper_8h.html#a7e0ade2fd295a927676c243c97d0aa64">TMacroToYAML</a></div><div class="ttdeci">YAML::Node TMacroToYAML(const TMacro &amp;macro)</div><div class="ttdoc">KS: Convert a ROOT TMacro object to a YAML node.</div><div class="ttdef"><b>Definition:</b> <a href="YamlHelper_8h_source.html#l00152">YamlHelper.h:152</a></div></div>
<div class="ttc" id="aYamlHelper_8h_html_ac79360f33b9ee8b7ecf11cc7429ffd0c"><div class="ttname"><a href="YamlHelper_8h.html#ac79360f33b9ee8b7ecf11cc7429ffd0c">compareYAMLNodes</a></div><div class="ttdeci">bool compareYAMLNodes(const YAML::Node &amp;node1, const YAML::Node &amp;node2, bool Mute=false)</div><div class="ttdoc">Compare if yaml nodes are identical.</div><div class="ttdef"><b>Definition:</b> <a href="YamlHelper_8h_source.html#l00186">YamlHelper.h:186</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a176d5a7858bbbb69b2ff3bdebc6d02a7"><div class="ttname"><a href="classBinnedSplineHandler.html#a176d5a7858bbbb69b2ff3bdebc6d02a7">BinnedSplineHandler::LoadIndexDir</a></div><div class="ttdeci">void LoadIndexDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</div><div class="ttdoc">KS: Load preprocessed Index.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01204">BinnedSplineHandler.cpp:1204</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a2ad4f3e2807dc537f450a5893bfe6246"><div class="ttname"><a href="classBinnedSplineHandler.html#a2ad4f3e2807dc537f450a5893bfe6246">BinnedSplineHandler::LoadSettingsDir</a></div><div class="ttdeci">void LoadSettingsDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</div><div class="ttdoc">KS: Load preprocessed Settings.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01096">BinnedSplineHandler.cpp:1096</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ab4affb91911fc7fd636bcd675d67dcf2"><div class="ttname"><a href="classBinnedSplineHandler.html#ab4affb91911fc7fd636bcd675d67dcf2">BinnedSplineHandler::LoadMonolithDir</a></div><div class="ttdeci">void LoadMonolithDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</div><div class="ttdoc">KS: Load preprocessed Monolith.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01170">BinnedSplineHandler.cpp:1170</a></div></div>
<div class="ttc" id="aclassParameterHandlerBase_html_a2929feac84b65e987bc92448754c5b1b"><div class="ttname"><a href="classParameterHandlerBase.html#a2929feac84b65e987bc92448754c5b1b">ParameterHandlerBase::RetPointer</a></div><div class="ttdeci">const double * RetPointer(const int iParam)</div><div class="ttdoc">DB Pointer return to param position.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerBase_8h_source.html#l00241">ParameterHandlerBase.h:241</a></div></div>
<div class="ttc" id="aclassSplineBase_html_ad4f4b51619ef0573c7f1497f5d1fd52d"><div class="ttname"><a href="classSplineBase.html#ad4f4b51619ef0573c7f1497f5d1fd52d">SplineBase::LoadFastSplineInfoDir</a></div><div class="ttdeci">void LoadFastSplineInfoDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile)</div><div class="ttdoc">KS: Load preprocessed FastSplineInfo.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00159">SplineBase.cpp:159</a></div></div>
<div class="ttc" id="agroup__ParameterHandlerGetters_html_gade58875564157c7c0aad0433498f955d"><div class="ttname"><a href="group__ParameterHandlerGetters.html#gade58875564157c7c0aad0433498f955d">ParameterHandlerBase::GetConfig</a></div><div class="ttdeci">YAML::Node GetConfig() const</div><div class="ttdoc">Getter to return a copy of the YAML node.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterHandlerBase_8h_source.html#l00366">ParameterHandlerBase.h:366</a></div></div>
<div class="ttc" id="anamespaceM3_html_ad7693a9e309503bd894b04443f163f3c"><div class="ttname"><a href="namespaceM3.html#ad7693a9e309503bd894b04443f163f3c">M3::AddPath</a></div><div class="ttdeci">void AddPath(std::string &amp;FilePath)</div><div class="ttdoc">Prepends the MACH3 environment path to FilePath if it is not already present.</div><div class="ttdef"><b>Definition:</b> <a href="Monitor_8cpp_source.html#l00382">Monitor.cpp:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4df71482a066069b712a72f7108ffbcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4df71482a066069b712a72f7108ffbcf">&#9670;&nbsp;</a></span>ModifyWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::ModifyWeights </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calc total event weight, not used by Bin-by-bin splines. </p>

<p>Implements <a class="el" href="classSplineBase.html#a49665d2712b61b038085d25ace96a568">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00080">80</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{<span class="keywordflow">return</span>;};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f150cb18bfcdbeb7d2f45aaa150f2a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f150cb18bfcdbeb7d2f45aaa150f2a5">&#9670;&nbsp;</a></span>PrepareIndexDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrepareIndexDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Prepare Index Info within SplineFile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01362">1362</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                                                                                {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">// Create a TTree to store the data</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  TTree *IndexTree = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;IndexVec&quot;</span>, <span class="stringliteral">&quot;IndexVec&quot;</span>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">// Vector holding the 7 dims</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  std::vector&lt;int&gt; Dim(7);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="keywordtype">int</span> value;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160; </div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// Create branches for each dimension</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; 7; ++d) {</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    IndexTree-&gt;Branch(Form(<span class="stringliteral">&quot;dim%d&quot;</span>, d+1), &amp;Dim[d], Form(<span class="stringliteral">&quot;dim%d/I&quot;</span>, d+1));</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  IndexTree-&gt;Branch(<span class="stringliteral">&quot;value&quot;</span>, &amp;value, <span class="stringliteral">&quot;value/I&quot;</span>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// Fill the tree</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(); ++i) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i].size(); ++j) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j].size(); ++k) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> l = 0; l &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k].size(); ++l) {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> m = 0; m &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l].size(); ++m) {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> n = 0; n &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l][m].size(); ++n) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> p = 0; p &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l][m][n].size(); ++p) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                Dim[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(i);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                Dim[1] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(j);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                Dim[2] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(k);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                Dim[3] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(l);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                Dim[4] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(m);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                Dim[5] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(n);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                Dim[6] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(p);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                value = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[i][j][k][l][m][n][p]);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                IndexTree-&gt;Fill();</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;              }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            }</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;          }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  SplineFile-&gt;cd();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// Write the tree to the file</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  IndexTree-&gt;Write();</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keyword">delete</span> IndexTree;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf273740a50b7a667e10d352d28451c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf273740a50b7a667e10d352d28451c7">&#9670;&nbsp;</a></span>PrepareMonolithDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrepareMonolithDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Prepare Monolith Info within SplineFile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01339">1339</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                                                                                   {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  TTree *MonolithTree = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;MonolithTree&quot;</span>, <span class="stringliteral">&quot;MonolithTree&quot;</span>);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;manycoeff&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>, Form(<span class="stringliteral">&quot;manycoeff[%d]/%s&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a> * <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>, <a class="code" href="namespaceM3.html#a8a391ca84cf7ba5afc4f77b7e14985a7">M3::float_t_str_repr</a>));</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;isflatarray&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>, Form(<span class="stringliteral">&quot;isflatarray[%d]/O&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>));</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  std::vector&lt;int&gt; coeffindexvec_temp = <a class="code" href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">coeffindexvec</a>;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;coeffindexvec&quot;</span>, &amp;coeffindexvec_temp);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  std::vector&lt;int&gt; uniquecoeffindices_temp = <a class="code" href="classBinnedSplineHandler.html#ac032bf729105a8848e3058a430d54250">uniquecoeffindices</a>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;uniquecoeffindices&quot;</span>, &amp;uniquecoeffindices_temp);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  std::vector&lt;int&gt; uniquesplinevec_Monolith_temp = <a class="code" href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">uniquesplinevec_Monolith</a>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;uniquesplinevec_Monolith&quot;</span>, &amp;uniquesplinevec_Monolith_temp);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  std::vector&lt;int&gt; UniqueSystIndices_temp = <a class="code" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;UniqueSystIndices&quot;</span>, &amp;UniqueSystIndices_temp);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  MonolithTree-&gt;Branch(<span class="stringliteral">&quot;xcoeff&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a>, Form(<span class="stringliteral">&quot;xcoeff[%d]/%s&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>, <a class="code" href="namespaceM3.html#a8a391ca84cf7ba5afc4f77b7e14985a7">M3::float_t_str_repr</a>));</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  MonolithTree-&gt;Fill();</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  SplineFile-&gt;cd();</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  MonolithTree-&gt;Write();</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keyword">delete</span> MonolithTree;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div>
<div class="ttc" id="anamespaceM3_html_a8a391ca84cf7ba5afc4f77b7e14985a7"><div class="ttname"><a href="namespaceM3.html#a8a391ca84cf7ba5afc4f77b7e14985a7">M3::float_t_str_repr</a></div><div class="ttdeci">constexpr static const char * float_t_str_repr</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00040">Core.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac093836707360769e153d222559aa3d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac093836707360769e153d222559aa3d7">&#9670;&nbsp;</a></span>PrepareOtherInfoDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrepareOtherInfoDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Prepare Other Info within SplineFile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01409">1409</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                                                                                    {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// Create a new tree for SplineBinning data</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  TTree *SplineBinningTree = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;SplineBinningTree&quot;</span>, <span class="stringliteral">&quot;SplineBinningTree&quot;</span>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  std::vector&lt;int&gt; indices(3); <span class="comment">// To store the 3D indices</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  TAxis* axis = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  SplineBinningTree-&gt;Branch(<span class="stringliteral">&quot;i&quot;</span>, &amp;indices[0], <span class="stringliteral">&quot;i/I&quot;</span>);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  SplineBinningTree-&gt;Branch(<span class="stringliteral">&quot;j&quot;</span>, &amp;indices[1], <span class="stringliteral">&quot;j/I&quot;</span>);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  SplineBinningTree-&gt;Branch(<span class="stringliteral">&quot;k&quot;</span>, &amp;indices[2], <span class="stringliteral">&quot;k/I&quot;</span>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  SplineBinningTree-&gt;Branch(<span class="stringliteral">&quot;axis&quot;</span>, <span class="stringliteral">&quot;TAxis&quot;</span>, &amp;axis);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="comment">// Fill the SplineBinningTree</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>.size(); ++i) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[i].size(); ++j) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[i][j].size(); ++k) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        axis = <a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[i][j][k];</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        indices[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(i);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        indices[1] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(j);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        indices[2] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(k);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        SplineBinningTree-&gt;Fill();</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  SplineFile-&gt;cd();</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  SplineBinningTree-&gt;Write();</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keyword">delete</span> SplineBinningTree;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  std::vector&lt;int&gt; indices_mode(3); <span class="comment">// to store 3D indices</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="keywordtype">int</span> mode_value;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  TTree *SplineModeTree = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;SplineModeTree&quot;</span>, <span class="stringliteral">&quot;SplineModeTree&quot;</span>);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">// Create branches for indices and value</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  SplineModeTree-&gt;Branch(<span class="stringliteral">&quot;i&quot;</span>, &amp;indices_mode[0], <span class="stringliteral">&quot;i/I&quot;</span>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  SplineModeTree-&gt;Branch(<span class="stringliteral">&quot;j&quot;</span>, &amp;indices_mode[1], <span class="stringliteral">&quot;j/I&quot;</span>);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  SplineModeTree-&gt;Branch(<span class="stringliteral">&quot;k&quot;</span>, &amp;indices_mode[2], <span class="stringliteral">&quot;k/I&quot;</span>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  SplineModeTree-&gt;Branch(<span class="stringliteral">&quot;value&quot;</span>, &amp;mode_value, <span class="stringliteral">&quot;value/I&quot;</span>);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// Fill the tree</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>.size(); ++i) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[i].size(); ++j) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[i][j].size(); ++k) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        indices_mode[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(i);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        indices_mode[1] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(j);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        indices_mode[2] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(k);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        mode_value = <a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[i][j][k];</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        SplineModeTree-&gt;Fill();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  }</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// Write the tree to the file</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  SplineFile-&gt;cd();</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  SplineModeTree-&gt;Write();</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keyword">delete</span> SplineModeTree;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ace1b638715e5b159e2d936b1683220dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace1b638715e5b159e2d936b1683220dd">&#9670;&nbsp;</a></span>PrepareSettingsDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrepareSettingsDir </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; TFile &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineFile</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Prepare Settings Info within SplineFile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SplineFile</td><td>File from which we load new tree </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01286">1286</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                                                                                   {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  TTree *Settings = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;Settings&quot;</span>, <span class="stringliteral">&quot;Settings&quot;</span>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keywordtype">int</span> CoeffIndex_temp = <a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordtype">int</span> MonolithSize_temp = <a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordtype">short</span> <span class="keywordtype">int</span> nParams_temp = <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;CoeffIndex&quot;</span>, &amp;CoeffIndex_temp, <span class="stringliteral">&quot;CoeffIndex/I&quot;</span>);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;MonolithSize&quot;</span>, &amp;MonolithSize_temp, <span class="stringliteral">&quot;MonolithSize/I&quot;</span>);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;nParams&quot;</span>, &amp;nParams_temp, <span class="stringliteral">&quot;nParams/S&quot;</span>);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordtype">int</span> indexvec_sizes[7];</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  indexvec_sizes[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size());</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  indexvec_sizes[1] = (indexvec_sizes[0] &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[0].size()) : 0;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  indexvec_sizes[2] = (indexvec_sizes[1] &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[0][0].size()) : 0;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  indexvec_sizes[3] = (indexvec_sizes[2] &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[0][0][0].size()) : 0;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  indexvec_sizes[4] = (indexvec_sizes[3] &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[0][0][0][0].size()) : 0;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  indexvec_sizes[5] = (indexvec_sizes[4] &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[0][0][0][0][0].size()) : 0;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  indexvec_sizes[6] = (indexvec_sizes[5] &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[0][0][0][0][0][0].size()) : 0;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 7; ++i) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    Settings-&gt;Branch((<span class="stringliteral">&quot;indexvec_size&quot;</span> + std::to_string(i+1)).c_str(),</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                     &amp;indexvec_sizes[i], (<span class="stringliteral">&quot;indexvec_size&quot;</span> + std::to_string(i+1) + <span class="stringliteral">&quot;/I&quot;</span>).c_str());</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordtype">int</span> SplineBinning_size1 = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>.size());</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordtype">int</span> SplineBinning_size2 = (SplineBinning_size1 &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[0].size()) : 0;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordtype">int</span> SplineBinning_size3 = (SplineBinning_size2 &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#ab54b0bf1e1f45af6362300ead59a1b8b">SplineBinning</a>[0][0].size()) : 0;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SplineBinning_size1&quot;</span>, &amp;SplineBinning_size1, <span class="stringliteral">&quot;SplineBinning_size1/I&quot;</span>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SplineBinning_size2&quot;</span>, &amp;SplineBinning_size2, <span class="stringliteral">&quot;SplineBinning_size2/I&quot;</span>);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SplineBinning_size3&quot;</span>, &amp;SplineBinning_size3, <span class="stringliteral">&quot;SplineBinning_size3/I&quot;</span>);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordtype">int</span> SplineModeVecs_size1 = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>.size());</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordtype">int</span> SplineModeVecs_size2 = (SplineModeVecs_size1 &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[0].size()) : 0;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="keywordtype">int</span> SplineModeVecs_size3 = (SplineModeVecs_size2 &gt; 0) ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classBinnedSplineHandler.html#a4fc9418367526011494eea1266da4b51">SplineModeVecs</a>[0][0].size()) : 0;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SplineModeVecs_size1&quot;</span>, &amp;SplineModeVecs_size1, <span class="stringliteral">&quot;SplineModeVecs_size1/I&quot;</span>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SplineModeVecs_size2&quot;</span>, &amp;SplineModeVecs_size2, <span class="stringliteral">&quot;SplineModeVecs_size2/I&quot;</span>);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SplineModeVecs_size3&quot;</span>, &amp;SplineModeVecs_size3, <span class="stringliteral">&quot;SplineModeVecs_size3/I&quot;</span>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  std::vector&lt;std::string&gt; SampleNames_temp = <a class="code" href="classBinnedSplineHandler.html#ae66666026b08ba7f67c21c41b9c46f02">SampleNames</a>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SampleNames&quot;</span>, &amp;SampleNames_temp);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  std::vector&lt;std::string&gt; SampleTitles_temp = <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  Settings-&gt;Branch(<span class="stringliteral">&quot;SampleTitles&quot;</span>, &amp;SampleTitles_temp);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  Settings-&gt;Fill();</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  SplineFile-&gt;cd();</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  Settings-&gt;Write();</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keyword">delete</span> Settings;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0bee3ae76bfe1d7be8240194409a9794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bee3ae76bfe1d7be8240194409a9794">&#9670;&nbsp;</a></span>PrepareSplineFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrepareSplineFile </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>FileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>KS: Prepare spline file that can be used for fast loading. </p>

<p>Implements <a class="el" href="classSplineBase.html#ab75c16cbf814b94e9a14978c781b02fe">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l01259">1259</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                                              {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment">// *****************************************</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="namespaceM3.html#ad7693a9e309503bd894b04443f163f3c">M3::AddPath</a>(FileName);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// Check for spaces in the filename</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordtype">size_t</span> pos = FileName.find(<span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">if</span> (pos != std::string::npos) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#ad5b2eb6377721e3ac95def22c2386bb1">MACH3LOG_WARN</a>(<span class="stringliteral">&quot;Filename ({}) contains spaces. Replacing spaces with underscores.&quot;</span>, FileName);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">while</span> ((pos = FileName.find(<span class="charliteral">&#39; &#39;</span>)) != std::string::npos) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      FileName[pos] = <span class="charliteral">&#39;_&#39;</span>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="comment">// Save ROOT File</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keyword">auto</span> SplineFile = std::make_unique&lt;TFile&gt;(FileName.c_str(), <span class="stringliteral">&quot;recreate&quot;</span>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  YAML::Node ConfigCurrent = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="group__ParameterHandlerGetters.html#gade58875564157c7c0aad0433498f955d">GetConfig</a>();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  TMacro ConfigSave = <a class="code" href="YamlHelper_8h.html#a2d4f3247b6e13ef8c127ff66e699d3cb">YAMLtoTMacro</a>(ConfigCurrent, <span class="stringliteral">&quot;ParameterHandler&quot;</span>);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  ConfigSave.Write();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ace1b638715e5b159e2d936b1683220dd">PrepareSettingsDir</a>(SplineFile);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#aaf273740a50b7a667e10d352d28451c7">PrepareMonolithDir</a>(SplineFile);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a8f150cb18bfcdbeb7d2f45aaa150f2a5">PrepareIndexDir</a>(SplineFile);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#ac093836707360769e153d222559aa3d7">PrepareOtherInfoDir</a>(SplineFile);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <a class="code" href="classSplineBase.html#ae7797e26d48519c885e1537373505fcb">PrepareFastSplineInfoDir</a>(SplineFile);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  SplineFile-&gt;Close();</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="ttc" id="aYamlHelper_8h_html_a2d4f3247b6e13ef8c127ff66e699d3cb"><div class="ttname"><a href="YamlHelper_8h.html#a2d4f3247b6e13ef8c127ff66e699d3cb">YAMLtoTMacro</a></div><div class="ttdeci">TMacro YAMLtoTMacro(const YAML::Node &amp;yaml_node, const std::string &amp;name)</div><div class="ttdoc">Convert a YAML node to a ROOT TMacro object.</div><div class="ttdef"><b>Definition:</b> <a href="YamlHelper_8h_source.html#l00167">YamlHelper.h:167</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a8f150cb18bfcdbeb7d2f45aaa150f2a5"><div class="ttname"><a href="classBinnedSplineHandler.html#a8f150cb18bfcdbeb7d2f45aaa150f2a5">BinnedSplineHandler::PrepareIndexDir</a></div><div class="ttdeci">void PrepareIndexDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</div><div class="ttdoc">KS: Prepare Index Info within SplineFile.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01362">BinnedSplineHandler.cpp:1362</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_aaf273740a50b7a667e10d352d28451c7"><div class="ttname"><a href="classBinnedSplineHandler.html#aaf273740a50b7a667e10d352d28451c7">BinnedSplineHandler::PrepareMonolithDir</a></div><div class="ttdeci">void PrepareMonolithDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</div><div class="ttdoc">KS: Prepare Monolith Info within SplineFile.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01339">BinnedSplineHandler.cpp:1339</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ac093836707360769e153d222559aa3d7"><div class="ttname"><a href="classBinnedSplineHandler.html#ac093836707360769e153d222559aa3d7">BinnedSplineHandler::PrepareOtherInfoDir</a></div><div class="ttdeci">void PrepareOtherInfoDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</div><div class="ttdoc">KS: Prepare Other Info within SplineFile.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01409">BinnedSplineHandler.cpp:1409</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_ace1b638715e5b159e2d936b1683220dd"><div class="ttname"><a href="classBinnedSplineHandler.html#ace1b638715e5b159e2d936b1683220dd">BinnedSplineHandler::PrepareSettingsDir</a></div><div class="ttdeci">void PrepareSettingsDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</div><div class="ttdoc">KS: Prepare Settings Info within SplineFile.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l01286">BinnedSplineHandler.cpp:1286</a></div></div>
<div class="ttc" id="aclassSplineBase_html_ae7797e26d48519c885e1537373505fcb"><div class="ttname"><a href="classSplineBase.html#ae7797e26d48519c885e1537373505fcb">SplineBase::PrepareFastSplineInfoDir</a></div><div class="ttdeci">void PrepareFastSplineInfoDir(std::unique_ptr&lt; TFile &gt; &amp;SplineFile) const</div><div class="ttdoc">KS: Prepare Fast Spline Info within SplineFile.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00131">SplineBase.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f82ff6646004c7030110aafabb52e8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f82ff6646004c7030110aafabb52e8a">&#9670;&nbsp;</a></span>PrepForReweight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrepForReweight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00545">545</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                                          {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">//****************************************</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  std::vector&lt;TSpline3_red*&gt; UniqueSystSplines;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// DB Find all the Unique systs across each sample and oscillation channel</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">//    This assumes that each occurence of the same systematic spline has the same knot spacing</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">//    Which is a reasonable assumption for the current implementation of spline evaluations</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(); iSample++)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][0].size(); iSyst++)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      std::string SystName = <a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>[iSample][iSyst];</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordtype">bool</span> FoundSyst = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="comment">//ETA - this always seems to be empty to begin with??</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="comment">//so this loop never gets used?</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iFoundSyst = 0; iFoundSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>.size(); iFoundSyst++)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">if</span> (SystName == <a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>[iFoundSyst])</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          FoundSyst = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">if</span> (!FoundSyst)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordtype">bool</span> FoundNonFlatSpline = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="comment">//This is all basically to check that you have some resposne from a spline</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">//systematic somewhere</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          { <span class="comment">// Loop over modes</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;              { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                { <span class="comment">// Loop over third dimension</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                  <span class="keywordtype">int</span> splineindex=<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex])</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                  {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                    UniqueSystSplines.push_back(<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex]);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    <a class="code" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a>.push_back(<a class="code" href="classBinnedSplineHandler.html#ad7470dbc245ccb614f6f92159522b1cf">GlobalSystIndex</a>[iSample][iSyst]);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    FoundNonFlatSpline = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                  }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                  <span class="keywordflow">if</span> (FoundNonFlatSpline) { <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                }<span class="comment">//3D loop end</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">if</span> (FoundNonFlatSpline) { <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;              }<span class="comment">//2D loop end</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;              <span class="keywordflow">if</span> (FoundNonFlatSpline){ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            }<span class="comment">//1D loop end</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span> (FoundNonFlatSpline){ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          }<span class="comment">//mode loop end</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          <span class="keywordflow">if</span> (FoundNonFlatSpline) { <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        }<span class="comment">//osc loop end</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">//ETA - only push back unique name if a non-flat response has been found</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span>(FoundNonFlatSpline){</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;          <a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>.push_back(SystName);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> (!FoundNonFlatSpline)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{} syst has no response in sample {}&quot;</span>, SystName, iSample);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Whilst this isn&#39;t necessarily a problem, it seems odd&quot;</span>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }<span class="comment">//Syst loop end</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(UniqueSystSplines.size());</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// DB Find the number of splines knots which assumes each instance of the syst has the same number of knots</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <a class="code" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a> = <span class="keyword">new</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span>[<a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>]();</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <a class="code" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a> = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>]();</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>.resize(<a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSpline = 0; iSpline &lt; <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iSpline++)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].nPts = <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceM3.html#adb59b8ecdc4e1b2d5d4c826a13aa7463">M3::int_t</a><span class="keyword">&gt;</span>(UniqueSystSplines[iSpline]-&gt;GetNp());</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].xPts.resize(<a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].nPts);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].splineParsPointer = <a class="code" href="classBinnedSplineHandler.html#a4360c772f9cad0aeccbf7e9a7bf86595">xsec</a>-&gt;<a class="code" href="classParameterHandlerBase.html#a2929feac84b65e987bc92448754c5b1b">RetPointer</a>(<a class="code" href="classBinnedSplineHandler.html#aedb1c578eddc904c39b08aca36e5f75d">UniqueSystIndices</a>[iSpline]);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iKnot = 0; iKnot &lt; <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].nPts; iKnot++)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> xPoint;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> yPoint;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      UniqueSystSplines[iSpline]-&gt;GetKnot(iKnot, xPoint, yPoint);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].xPts[iKnot] = xPoint;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">//ETA - let this just be set as the first segment by default</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a>[iSpline] = 0;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a>[iSpline] = 0.;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;nUniqueSysts: {}&quot;</span>, <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{:&lt;15} | {:&lt;20} | {:&lt;6}&quot;</span>, <span class="stringliteral">&quot;Spline Index&quot;</span>, <span class="stringliteral">&quot;Syst Name&quot;</span>, <span class="stringliteral">&quot;nKnots&quot;</span>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iUniqueSyst = 0; iUniqueSyst &lt; <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iUniqueSyst++)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{:&lt;15} | {:&lt;20} | {:&lt;6}&quot;</span>, iUniqueSyst, <a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>[iUniqueSyst], <a class="code" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iUniqueSyst].nPts);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">//ETA</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">//Isn&#39;t this just doing what CountNumberOfLoadedSplines() does?</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordtype">int</span> nCombinations_FlatSplines = 0;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordtype">int</span> nCombinations_All = 0;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// DB Now actually loop over splines to determine which are all null i.e. flat</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(); iSample++)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size(); iSyst++)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        { <span class="comment">// Loop over modes</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;          <span class="comment">//bool isFlat = false;</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;          { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;              { <span class="comment">// Loop over third dimension</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordtype">int</span> splineindex=<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex])</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                  nCombinations_All += 1;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                  nCombinations_FlatSplines += 1;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                  nCombinations_All += 1;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;              }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;          }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// We need to grab the maximum number of knots</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Number of combinations of Sample, OscChan, Syst and Mode which have entirely flat response: {} / {}&quot;</span>, nCombinations_FlatSplines, nCombinations_All);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="ttc" id="anamespaceM3_html_adb59b8ecdc4e1b2d5d4c826a13aa7463"><div class="ttname"><a href="namespaceM3.html#adb59b8ecdc4e1b2d5d4c826a13aa7463">M3::int_t</a></div><div class="ttdeci">int int_t</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00038">Core.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad580bcacf16ba7a69a3ed157ae598a5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad580bcacf16ba7a69a3ed157ae598a5c">&#9670;&nbsp;</a></span>PrintArrayDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrintArrayDetails </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00759">759</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;{</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordtype">int</span> iSample = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordtype">int</span> nOscChannels = int(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size());</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Sample {} has {} oscillation channels&quot;</span>, SampleTitle, nOscChannels);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChannels; iOscChan++)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordtype">int</span> nSysts = int(<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size());</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Oscillation channel {} has {} systematics&quot;</span>, iOscChan, nSysts);     </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Printing no. of modes affected by each systematic for each oscillation channel&quot;</span>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(); iOscChan++) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    std::string modes = fmt::format(<span class="stringliteral">&quot;OscChan: {}\t&quot;</span>, iOscChan);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size(); iSyst++) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      modes += fmt::format(<span class="stringliteral">&quot;{} &quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size());</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{}&quot;</span>, modes);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a37c341f5f23957b0e928e617486842da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c341f5f23957b0e928e617486842da">&#9670;&nbsp;</a></span>PrintBinning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrintBinning </td>
          <td>(</td>
          <td class="paramtype">TAxis *&#160;</td>
          <td class="paramname"><em>Axis</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00824">824</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;{</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NBins = Axis-&gt;GetNbins();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  std::string text = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iBin = 0; iBin &lt;= NBins; iBin++) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    text += fmt::format(<span class="stringliteral">&quot;{} &quot;</span>, Axis-&gt;GetXbins()-&gt;GetAt(iBin));</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{}&quot;</span>, text);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a61753ed3e44cda6fabb031fd8ef19e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61753ed3e44cda6fabb031fd8ef19e79">&#9670;&nbsp;</a></span>PrintSampleDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::PrintSampleDetails </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleTitle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print info like Sample ID of spline params etc. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00747">747</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> iSample = <a class="code" href="classBinnedSplineHandler.html#af4be12b4e410259ec60d311cdfeb1a99">GetSampleIndex</a>(SampleTitle);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Details about sample: {:&lt;20}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a60e27e7861b7f06b2d42aedb54b77d03">SampleTitles</a>[iSample]);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t Dimension: {:&lt;35}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a8824387f90bd051b370bebd843691b83">Dimensions</a>[iSample]);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t nSplineParam: {:&lt;35}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a4dbb81c0f4c8641580a9f9dd4231c8b1">nSplineParams</a>[iSample]);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t nOscChan: {:&lt;35}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a54efbb1b4af41a83ef2c12599b0e4a92">nOscChans</a>[iSample]);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3aceb2ecabad9196e0c6cc96ec96c7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3aceb2ecabad9196e0c6cc96ec96c7d">&#9670;&nbsp;</a></span>retPointer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* BinnedSplineHandler::retPointer </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>oscchan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>syst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>var1bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>var2bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>var3bin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get pointer to spline weight based on bin variables </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00065">65</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                                                                                {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordtype">int</span> index = <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[sample][oscchan][syst][mode][var1bin][var2bin][var3bin];</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">weightvec_Monolith</a>[index];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a960a64e0a855d797d74d052764f5ea3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a960a64e0a855d797d74d052764f5ea3a">&#9670;&nbsp;</a></span>StripDuplicatedModes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; BinnedSplineHandler::StripDuplicatedModes </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>InputVector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there are any repeated modes. This is used to reduce the number of modes in case many interaction modes get averaged into one spline. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00892">892</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                                                                                                                    {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">//ETA - this is of size nPars from the xsec model</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keywordtype">size_t</span> InputVectorSize = InputVector.size();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  std::vector&lt; std::vector&lt;int&gt; &gt; ReturnVec(InputVectorSize);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">//ETA - loop over all systematics</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iSyst=0;iSyst&lt;InputVectorSize;iSyst++) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    std::vector&lt;int&gt; TmpVec;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    std::vector&lt;std::string&gt; TestVec;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">//Loop over the modes that we&#39;ve listed in xsec cov</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0 ; iMode &lt; InputVector[iSyst].size() ; iMode++) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordtype">int</span> Mode = InputVector[iSyst][iMode];</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      std::string ModeName = <a class="code" href="classBinnedSplineHandler.html#ad18810d957169226bcd66d4bc8fa274f">Modes</a>-&gt;<a class="code" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(Mode);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordtype">bool</span> IncludeMode = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> TestString : TestVec) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">if</span> (ModeName == TestString) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          IncludeMode = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">if</span> (IncludeMode) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        TmpVec.push_back(Mode);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        TestVec.push_back(ModeName);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    ReturnVec[iSyst] = TmpVec;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aecb3c81a5a0f422eb2807a67afc8844d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb3c81a5a0f422eb2807a67afc8844d">&#9670;&nbsp;</a></span>TransferToMonolith()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BinnedSplineHandler::TransferToMonolith </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>flatten multidimensional spline array into proper monolith </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8cpp_source.html#l00198">198</a> of file <a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a3f82ff6646004c7030110aafabb52e8a">PrepForReweight</a>(); </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a> = <a class="code" href="classBinnedSplineHandler.html#a19b93ef716d594de4b0266dd84580cfe">CountNumberOfLoadedSplines</a>(<span class="keyword">false</span>, 1);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>!=<a class="code" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a>){</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="classBinnedSplineHandler.html#a443ea4b9ad0d8c5f065048bb67a91ed3">InvestigateMissingSplines</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Something&#39;s gone wrong when we tried to get the size of your monolith&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;MonolithSize is {}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;MonolithIndex is {}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a4a0d538654de1ffcdf3e1c4161878bd6">MonolithIndex</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Now transferring splines to a monolith if size {}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">uniquesplinevec_Monolith</a>.resize(<a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">weightvec_Monolith</a>.resize(<a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classBinnedSplineHandler.html#acb076b2a7c8cdb53d70dfb33ddd344b7">MonolithSize</a>];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a> = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[<a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a> = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[<a class="code" href="classBinnedSplineHandler.html#aeaa55e0f149fa734a358759d12c46ca6">CoeffIndex</a>*<a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>];</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>.size(); iSample++)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  { <span class="comment">// Loop over sample</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan].size(); iSyst++)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      { <span class="comment">// Loop over systematics</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        { <span class="comment">// Loop over modes</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;              {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordtype">int</span> splineindex=<a class="code" href="classBinnedSplineHandler.html#a1e0e6f58e9d7b67a4c4a20987f927ff8">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <a class="code" href="classBinnedSplineHandler.html#a9e433fb12f9c6759bbf1b0eb61f1f34a">weightvec_Monolith</a>[splineindex] = 1.0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordtype">bool</span> foundUniqueSpline = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iUniqueSyst = 0; iUniqueSyst &lt; <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iUniqueSyst++)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>[iSample][iSyst] == <a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>[iUniqueSyst])</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                  {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    <a class="code" href="classBinnedSplineHandler.html#a8e746122fde570e5ec454a708d61b6c8">uniquesplinevec_Monolith</a>[splineindex] = iUniqueSyst;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    foundUniqueSpline = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                }<span class="comment">//unique syst loop end</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">if</span> (!foundUniqueSpline)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                  <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Unique spline index not found&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                  <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;For Spline {}&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>[iSample][iSyst]);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                  <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Couldn&#39;t match {} with any of the following {} systs:&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a26abd2a3fead4879ac1eb9c170658ba0">SplineFileParPrefixNames</a>[iSample][iSyst], <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iUniqueSyst = 0; iUniqueSyst &lt; <a class="code" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iUniqueSyst++)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                  {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    <a class="code" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;{},&quot;</span>, <a class="code" href="classBinnedSplineHandler.html#a6387e407a74af8f40202c573024c48ef">UniqueSystNames</a>.at(iUniqueSyst));</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                  }<span class="comment">//unique syst loop end</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                  <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordtype">int</span> splineKnots;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex]){</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                  <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>[splineindex]=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                  splineKnots=<a class="code" href="classBinnedSplineHandler.html#ac029b5a9c5b3b11874f5f1ada5acc31f">splinevec_Monolith</a>[splineindex]-&gt;GetNp();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                  <span class="comment">//Now to fill up our coefficient arrayss</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                  <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* tmpXCoeffArr = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[splineKnots];</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                  <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* tmpManyCoeffArr = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[splineKnots*<a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>];</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                  <span class="keywordtype">int</span> iCoeff=<a class="code" href="classBinnedSplineHandler.html#a2bf7d919dd21b6fa26356e6ac7ce61f6">coeffindexvec</a>[splineindex];</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                  <a class="code" href="classBinnedSplineHandler.html#a05fd3d9253866f067ca3a184fa1ece06">getSplineCoeff_SepMany</a>(splineindex, tmpXCoeffArr, tmpManyCoeffArr);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; splineKnots; i++){</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <a class="code" href="classBinnedSplineHandler.html#a565b03441c146e0a351f9aee09ea0836">xcoeff_arr</a>[iCoeff+i]=tmpXCoeffArr[i];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>; j++){</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                      <a class="code" href="classBinnedSplineHandler.html#afbff241a0ea99c0872ee56a71c0633d1">manycoeff_arr</a>[(iCoeff+i)*<a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>+j]=tmpManyCoeffArr[i*<a class="code" href="SplineCommon_8h.html#a790348db7c20fb9896e94403fbee52cf">_nCoeff_</a>+j];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                  <span class="keyword">delete</span>[] tmpXCoeffArr;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                  <span class="keyword">delete</span>[] tmpManyCoeffArr;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    <a class="code" href="classBinnedSplineHandler.html#a13329dc38e92088744a5a49a60c01a83">isflatarray</a>[splineindex]=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              }<span class="comment">//3d loop end</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            }<span class="comment">//2d loop end</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          }<span class="comment">//1d loop end</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }<span class="comment">//mode loop end</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      }<span class="comment">//syst2 loop end</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }<span class="comment">//osc loop end</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }<span class="comment">//syst1 loop end</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a05fd3d9253866f067ca3a184fa1ece06"><div class="ttname"><a href="classBinnedSplineHandler.html#a05fd3d9253866f067ca3a184fa1ece06">BinnedSplineHandler::getSplineCoeff_SepMany</a></div><div class="ttdeci">void getSplineCoeff_SepMany(int splineindex, M3::float_t *&amp;xArray, M3::float_t *&amp;manyArray)</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00686">BinnedSplineHandler.cpp:686</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a19b93ef716d594de4b0266dd84580cfe"><div class="ttname"><a href="classBinnedSplineHandler.html#a19b93ef716d594de4b0266dd84580cfe">BinnedSplineHandler::CountNumberOfLoadedSplines</a></div><div class="ttdeci">int CountNumberOfLoadedSplines(bool NonFlat=false, int Verbosity=0)</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00485">BinnedSplineHandler.cpp:485</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a3f82ff6646004c7030110aafabb52e8a"><div class="ttname"><a href="classBinnedSplineHandler.html#a3f82ff6646004c7030110aafabb52e8a">BinnedSplineHandler::PrepForReweight</a></div><div class="ttdeci">void PrepForReweight()</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00545">BinnedSplineHandler.cpp:545</a></div></div>
<div class="ttc" id="aclassBinnedSplineHandler_html_a443ea4b9ad0d8c5f065048bb67a91ed3"><div class="ttname"><a href="classBinnedSplineHandler.html#a443ea4b9ad0d8c5f065048bb67a91ed3">BinnedSplineHandler::InvestigateMissingSplines</a></div><div class="ttdeci">void InvestigateMissingSplines() const</div><div class="ttdoc">This function will find missing splines in file.</div><div class="ttdef"><b>Definition:</b> <a href="BinnedSplineHandler_8cpp_source.html#l00123">BinnedSplineHandler.cpp:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aeaa55e0f149fa734a358759d12c46ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa55e0f149fa734a358759d12c46ca6">&#9670;&nbsp;</a></span>CoeffIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BinnedSplineHandler::CoeffIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00122">122</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a2bf7d919dd21b6fa26356e6ac7ce61f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bf7d919dd21b6fa26356e6ac7ce61f6">&#9670;&nbsp;</a></span>coeffindexvec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int &gt; BinnedSplineHandler::coeffindexvec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00113">113</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="aa3db668a55f3d3356f63cb055819b2b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3db668a55f3d3356f63cb055819b2b0">&#9670;&nbsp;</a></span>DimensionLabels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;std::string&gt; &gt; BinnedSplineHandler::DimensionLabels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00088">88</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a8824387f90bd051b370bebd843691b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8824387f90bd051b370bebd843691b83">&#9670;&nbsp;</a></span>Dimensions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; BinnedSplineHandler::Dimensions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00087">87</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="ad7470dbc245ccb614f6f92159522b1cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7470dbc245ccb614f6f92159522b1cf">&#9670;&nbsp;</a></span>GlobalSystIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;int&gt; &gt; BinnedSplineHandler::GlobalSystIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This holds the global spline index and is used to grab the current parameter value to evaluate splines at. Each internal vector will be of size of the number of spline systematics which affect that sample. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00101">101</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a1e0e6f58e9d7b67a4c4a20987f927ff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e0e6f58e9d7b67a4c4a20987f927ff8">&#9670;&nbsp;</a></span>indexvec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &gt; &gt; &gt; &gt; BinnedSplineHandler::indexvec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Variables related to determined which modes have splines and which piggy-back of other modes. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00112">112</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a13329dc38e92088744a5a49a60c01a83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13329dc38e92088744a5a49a60c01a83">&#9670;&nbsp;</a></span>isflatarray</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool* BinnedSplineHandler::isflatarray</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Need to keep track of which splines are flat and which aren't. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00125">125</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="afbff241a0ea99c0872ee56a71c0633d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbff241a0ea99c0872ee56a71c0633d1">&#9670;&nbsp;</a></span>manycoeff_arr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* BinnedSplineHandler::manycoeff_arr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ybcd coefficients for each spline </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00129">129</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="ad18810d957169226bcd66d4bc8fa274f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad18810d957169226bcd66d4bc8fa274f">&#9670;&nbsp;</a></span>Modes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaCh3Modes.html">MaCh3Modes</a>* BinnedSplineHandler::Modes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pointer to MaCh3 Mode from which we get spline suffix </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00137">137</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a4a0d538654de1ffcdf3e1c4161878bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0d538654de1ffcdf3e1c4161878bd6">&#9670;&nbsp;</a></span>MonolithIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BinnedSplineHandler::MonolithIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00121">121</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="acb076b2a7c8cdb53d70dfb33ddd344b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb076b2a7c8cdb53d70dfb33ddd344b7">&#9670;&nbsp;</a></span>MonolithSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BinnedSplineHandler::MonolithSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00120">120</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a54efbb1b4af41a83ef2c12599b0e4a92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54efbb1b4af41a83ef2c12599b0e4a92">&#9670;&nbsp;</a></span>nOscChans</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; BinnedSplineHandler::nOscChans</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00090">90</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a4dbb81c0f4c8641580a9f9dd4231c8b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dbb81c0f4c8641580a9f9dd4231c8b1">&#9670;&nbsp;</a></span>nSplineParams</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; BinnedSplineHandler::nSplineParams</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00089">89</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="ae66666026b08ba7f67c21c41b9c46f02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66666026b08ba7f67c21c41b9c46f02">&#9670;&nbsp;</a></span>SampleNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; BinnedSplineHandler::SampleNames</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00085">85</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a60e27e7861b7f06b2d42aedb54b77d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60e27e7861b7f06b2d42aedb54b77d03">&#9670;&nbsp;</a></span>SampleTitles</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; BinnedSplineHandler::SampleTitles</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00086">86</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="ab54b0bf1e1f45af6362300ead59a1b8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab54b0bf1e1f45af6362300ead59a1b8b">&#9670;&nbsp;</a></span>SplineBinning</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::vector&lt;TAxis*&gt; &gt; &gt; BinnedSplineHandler::SplineBinning</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00092">92</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a26abd2a3fead4879ac1eb9c170658ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26abd2a3fead4879ac1eb9c170658ba0">&#9670;&nbsp;</a></span>SplineFileParPrefixNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;std::string&gt; &gt; BinnedSplineHandler::SplineFileParPrefixNames</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00093">93</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a75583f3110d18b04557262520281503e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75583f3110d18b04557262520281503e">&#9670;&nbsp;</a></span>SplineInterpolationTypes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;<a class="el" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4">SplineInterpolation</a>&gt; &gt; BinnedSplineHandler::SplineInterpolationTypes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>spline interpolation types for each sample. These vectors are from a call to GetSplineInterpolationFromSampleID() </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00104">104</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a4fc9418367526011494eea1266da4b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc9418367526011494eea1266da4b51">&#9670;&nbsp;</a></span>SplineModeVecs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::vector&lt;int&gt; &gt; &gt; BinnedSplineHandler::SplineModeVecs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A vector of vectors of the spline modes that a systematic applies to This gets compared against the event mode to figure out if a syst should apply to an event or not </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00097">97</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="ac029b5a9c5b3b11874f5f1ada5acc31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac029b5a9c5b3b11874f5f1ada5acc31f">&#9670;&nbsp;</a></span>splinevec_Monolith</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classTSpline3__red.html">TSpline3_red</a>* &gt; BinnedSplineHandler::splinevec_Monolith</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>holds each spline object before stripping into coefficient monolith </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00118">118</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="ac032bf729105a8848e3058a430d54250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac032bf729105a8848e3058a430d54250">&#9670;&nbsp;</a></span>uniquecoeffindices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; BinnedSplineHandler::uniquecoeffindices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique coefficient indices. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00115">115</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a8e746122fde570e5ec454a708d61b6c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e746122fde570e5ec454a708d61b6c8">&#9670;&nbsp;</a></span>uniquesplinevec_Monolith</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; BinnedSplineHandler::uniquesplinevec_Monolith</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps single spline object with single parameter. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00134">134</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="aedb1c578eddc904c39b08aca36e5f75d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb1c578eddc904c39b08aca36e5f75d">&#9670;&nbsp;</a></span>UniqueSystIndices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; BinnedSplineHandler::UniqueSystIndices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global index of each spline param, it allows us to match spline ordering with global. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00109">109</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a6387e407a74af8f40202c573024c48ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6387e407a74af8f40202c573024c48ef">&#9670;&nbsp;</a></span>UniqueSystNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; BinnedSplineHandler::UniqueSystNames</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>name of each spline parameter </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00107">107</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a9e433fb12f9c6759bbf1b0eb61f1f34a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e433fb12f9c6759bbf1b0eb61f1f34a">&#9670;&nbsp;</a></span>weightvec_Monolith</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>&gt; BinnedSplineHandler::weightvec_Monolith</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores weight from spline evaluation for each single spline. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00132">132</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a565b03441c146e0a351f9aee09ea0836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a565b03441c146e0a351f9aee09ea0836">&#9670;&nbsp;</a></span>xcoeff_arr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* BinnedSplineHandler::xcoeff_arr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>x coefficients for each spline </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00127">127</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<a id="a4360c772f9cad0aeccbf7e9a7bf86595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4360c772f9cad0aeccbf7e9a7bf86595">&#9670;&nbsp;</a></span>xsec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classParameterHandlerGeneric.html">ParameterHandlerGeneric</a>* BinnedSplineHandler::xsec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to covariance from which we get information about spline params. </p>

<p class="definition">Definition at line <a class="el" href="BinnedSplineHandler_8h_source.html#l00082">82</a> of file <a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Splines/<a class="el" href="BinnedSplineHandler_8h_source.html">BinnedSplineHandler.h</a></li>
<li>Splines/<a class="el" href="BinnedSplineHandler_8cpp_source.html">BinnedSplineHandler.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- Footer for MaCh3 Doxygen documentation -->
<footer class="mach3-footer" style="text-align: center;">
    <div style="margin-bottom: 15px;">
        <span style="font-weight: bold;">The MaCh3 Collaboration</span>
    </div>
    <!-- Dropdown to jump between doc versions -->
    <div style="margin-bottom: 10px;">
        <span>Select Software Version: </span>
        <select id="versionSelector" onchange="window.location.href=this.value" style="padding: 5px; border-radius: 4px; border: 1px solid #ccc;">
            <option value="">-- Select --</option>
            <option value="https://mach3-software.github.io/MaCh3/">develop</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.4.0/index.html">v2.4.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.3.0/index.html">v2.3.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.2.0/index.html">v2.2.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.1.0/index.html">v2.1.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.0.0/index.html">v2.0.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.5.0/index.html">v1.5.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.4.0/index.html">v1.4.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.3.0/index.html">v1.3.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.2.0/index.html">v1.2.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.1.0/index.html">v1.1.0</option>
        </select>
    </div>
    <!-- Footer info about doxygen -->
    <div style="font-size: 0.9em; color: #666; margin-top: 10px;">
        Documentation generated with
        <a href="https://www.doxygen.nl/" target="_blank" style="color: #666;">Doxygen</a>
        <span id="doxygenVersion"></span>
    </div>
    <!-- Now grab doxygen version from metadata -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const meta = document.querySelector('meta[name="generator"]');
        if (meta) {
            const version = meta.getAttribute("content").replace("Doxygen ", "");
            document.getElementById("doxygenVersion").textContent = " " + version;
        }
    });
    </script>
</footer>
