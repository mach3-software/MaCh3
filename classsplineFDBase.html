<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaCh3: splineFDBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="MaCh3.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mach3logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">MaCh3<span id="projectnumber">&#160;1.4.4</span>
   </div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classsplineFDBase-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">splineFDBase Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Bin-by-bin class calculating response for spline parameters.  
 <a href="classsplineFDBase.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="splineFDBase_8h_source.html">splines/splineFDBase.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for splineFDBase:</div>
<div class="dyncontent">
<div class="center"><img src="classsplineFDBase__inherit__graph.png" border="0" usemap="#asplineFDBase_inherit__map" alt="Inheritance graph"/></div>
<map name="asplineFDBase_inherit__map" id="asplineFDBase_inherit__map">
<area shape="rect" title="Bin&#45;by&#45;bin class calculating response for spline parameters." alt="" coords="5,79,116,104"/>
<area shape="rect" href="classSplineBase.html" title="Base class for calculating weight from spline." alt="" coords="13,5,108,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for splineFDBase:</div>
<div class="dyncontent">
<div class="center"><img src="classsplineFDBase__coll__graph.png" border="0" usemap="#asplineFDBase_coll__map" alt="Collaboration graph"/></div>
<map name="asplineFDBase_coll__map" id="asplineFDBase_coll__map">
<area shape="rect" title="Bin&#45;by&#45;bin class calculating response for spline parameters." alt="" coords="2433,1030,2544,1055"/>
<area shape="rect" href="classSplineBase.html" title="Base class for calculating weight from spline." alt="" coords="2051,15,2146,41"/>
<area shape="rect" title=" " alt="" coords="1524,14,1736,39"/>
<area shape="rect" href="structFastSplineInfo.html" title="CW: Add a struct to hold info about the splinified xsec parameters and help with FindSplineSegment." alt="" coords="1099,15,1213,41"/>
<area shape="rect" title=" " alt="" coords="594,43,785,69"/>
<area shape="rect" href="classcovarianceXsec.html" title="Class responsible for handling of systematic error parameters with different types defined in the con..." alt="" coords="2037,779,2161,805"/>
<area shape="rect" href="classcovarianceBase.html" title="Base class responsible for handling of systematic error parameters. Capable of using PCA or using ada..." alt="" coords="1567,570,1693,595"/>
<area shape="rect" title=" " alt="" coords="233,1059,319,1085"/>
<area shape="rect" title=" " alt="" coords="596,942,783,967"/>
<area shape="rect" href="structXsecNorms4.html" title="ETA &#45; Normalisations for cross&#45;section parameters Carrier for whether you want to apply a systematic ..." alt="" coords="1104,874,1208,899"/>
<area shape="rect" href="classMaCh3Modes.html" title="KS: Class describing MaCh3 modes used in the analysis, it is being initialised from config." alt="" coords="1575,1089,1685,1114"/>
<area shape="rect" title=" " alt="" coords="856,1184,1019,1224"/>
<area shape="rect" href="structMaCh3ModeInfo.html" title="KS: Class containing information for a single MaCh3Mode." alt="" coords="625,1081,753,1106"/>
<area shape="rect" title=" " alt="" coords="5,1052,144,1092"/>
<area shape="rect" title=" " alt="" coords="602,484,777,524"/>
<area shape="rect" title=" " alt="" coords="193,454,359,479"/>
<area shape="rect" href="classPCAHandler.html" title="Class responsible for handling Principal Component Analysis (PCA) of covariance matrix." alt="" coords="640,409,739,434"/>
<area shape="rect" href="classadaptive__mcmc_1_1AdaptiveMCMCHandler.html" title="Contains information about adaptive covariance matrix ." alt="" coords="547,549,832,574"/>
<area shape="rect" title=" " alt="" coords="1067,631,1245,671"/>
<area shape="rect" title=" " alt="" coords="580,598,799,623"/>
<area shape="rect" title=" " alt="" coords="1081,518,1231,543"/>
<area shape="rect" title=" " alt="" coords="1069,289,1243,329"/>
<area shape="rect" title=" " alt="" coords="1043,405,1269,430"/>
<area shape="rect" title=" " alt="" coords="207,665,345,690"/>
<area shape="rect" href="structXsecSplines1.html" title="KS: Struct holding info about Spline Systematics." alt="" coords="635,647,743,673"/>
<area shape="rect" title=" " alt="" coords="1541,521,1719,546"/>
<area shape="rect" title=" " alt="" coords="1549,395,1711,435"/>
<area shape="rect" title=" " alt="" coords="1081,239,1231,265"/>
<area shape="rect" title=" " alt="" coords="1293,779,1500,805"/>
<area shape="rect" title=" " alt="" coords="1529,842,1731,867"/>
<area shape="rect" title=" " alt="" coords="1993,1023,2205,1063"/>
<area shape="rect" title=" " alt="" coords="2007,1433,2190,1473"/>
<area shape="rect" title=" " alt="" coords="1543,1383,1717,1423"/>
<area shape="rect" title=" " alt="" coords="2003,1213,2194,1253"/>
<area shape="rect" title=" " alt="" coords="1977,1277,2220,1347"/>
<area shape="rect" title=" " alt="" coords="2017,1149,2180,1189"/>
<area shape="rect" href="classTSpline3__red.html" title="CW: Reduced TSpline3 class." alt="" coords="1577,1230,1683,1255"/>
<area shape="rect" href="classTResponseFunction__red.html" title="KS: A reduced ResponseFunction Generic function used for evaluating weight." alt="" coords="1068,1254,1244,1279"/>
<area shape="rect" title=" " alt="" coords="1065,1076,1247,1116"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0eac7d14ff4f54d5346b60a18876ecaf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a0eac7d14ff4f54d5346b60a18876ecaf">splineFDBase</a> (<a class="el" href="classcovarianceXsec.html">covarianceXsec</a> *xsec_, <a class="el" href="classMaCh3Modes.html">MaCh3Modes</a> *Modes_)</td></tr>
<tr class="memdesc:a0eac7d14ff4f54d5346b60a18876ecaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a0eac7d14ff4f54d5346b60a18876ecaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16c33124874a336255a3cba480b835c2"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a16c33124874a336255a3cba480b835c2">~splineFDBase</a> ()</td></tr>
<tr class="memdesc:a16c33124874a336255a3cba480b835c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <br /></td></tr>
<tr class="separator:a16c33124874a336255a3cba480b835c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e248be25f753c85c4fbf2f3b72cf88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#af6e248be25f753c85c4fbf2f3b72cf88">Evaluate</a> ()</td></tr>
<tr class="memdesc:af6e248be25f753c85c4fbf2f3b72cf88"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations.  <br /></td></tr>
<tr class="separator:af6e248be25f753c85c4fbf2f3b72cf88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b4582865eab2e63a7b9ed9283469036"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a2b4582865eab2e63a7b9ed9283469036">AddSample</a> (const std::string &amp;SampleName, const std::string &amp;DetID, const std::vector&lt; std::string &gt; &amp;OscChanFileNames, const std::vector&lt; std::string &gt; &amp;SplineVarNames)</td></tr>
<tr class="memdesc:a2b4582865eab2e63a7b9ed9283469036"><td class="mdescLeft">&#160;</td><td class="mdescRight">add oscillation channel to spline monolith  <br /></td></tr>
<tr class="separator:a2b4582865eab2e63a7b9ed9283469036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d1872fe4be72c735bd55fa00e1674b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a6d1872fe4be72c735bd55fa00e1674b8">TransferToMonolith</a> ()</td></tr>
<tr class="memdesc:a6d1872fe4be72c735bd55fa00e1674b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">flatten multidimensional spline array into proper monolith  <br /></td></tr>
<tr class="separator:a6d1872fe4be72c735bd55fa00e1674b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e765571776f8affeca355a184fef11a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a6e765571776f8affeca355a184fef11a">cleanUpMemory</a> ()</td></tr>
<tr class="memdesc:a6e765571776f8affeca355a184fef11a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove setup variables not needed for spline evaluations.  <br /></td></tr>
<tr class="separator:a6e765571776f8affeca355a184fef11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52849ba867bea0744c16d03e0e7913ed"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a52849ba867bea0744c16d03e0e7913ed">FillSampleArray</a> (std::string SampleName, std::vector&lt; std::string &gt; OscChanFileNames)</td></tr>
<tr class="separator:a52849ba867bea0744c16d03e0e7913ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4926750455273cdfc56ebe7cadc16ef5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a4926750455273cdfc56ebe7cadc16ef5">StripDuplicatedModes</a> (std::vector&lt; std::vector&lt; int &gt; &gt; InputVector)</td></tr>
<tr class="memdesc:a4926750455273cdfc56ebe7cadc16ef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there are any repeated modes. This is used to reduce the number of modes in case many interaction modes get averaged into one spline.  <br /></td></tr>
<tr class="separator:a4926750455273cdfc56ebe7cadc16ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbfd0004315a7f2c14d3172485a8c469"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#adbfd0004315a7f2c14d3172485a8c469">GetEventSplines</a> (std::string SampleName, int iOscChan, int EventMode, double Var1Val, double Var2Val, double Var3Val)</td></tr>
<tr class="memdesc:adbfd0004315a7f2c14d3172485a8c469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the splines which affect a given event.  <br /></td></tr>
<tr class="separator:adbfd0004315a7f2c14d3172485a8c469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00c0e93b4c4799ffacaa58578e5dcf6b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; TAxis * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a00c0e93b4c4799ffacaa58578e5dcf6b">FindSplineBinning</a> (std::string FileName, std::string SampleName)</td></tr>
<tr class="memdesc:a00c0e93b4c4799ffacaa58578e5dcf6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grab histograms with spline binning.  <br /></td></tr>
<tr class="separator:a00c0e93b4c4799ffacaa58578e5dcf6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bfc616fab953333e6e938de52ce3bed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a0bfc616fab953333e6e938de52ce3bed">CountNumberOfLoadedSplines</a> (bool NonFlat=false, int Verbosity=0)</td></tr>
<tr class="separator:a0bfc616fab953333e6e938de52ce3bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94be410cfdd1e77b50716376f8b5659"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ad94be410cfdd1e77b50716376f8b5659">getDimLabel</a> (const int BinningOpt, const unsigned int Axis) const</td></tr>
<tr class="separator:ad94be410cfdd1e77b50716376f8b5659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac12452f74e832c5899cb6d130dfa28e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a> (const std::string &amp;SampleName) const</td></tr>
<tr class="memdesc:ac12452f74e832c5899cb6d130dfa28e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get index of sample based on name.  <br /></td></tr>
<tr class="separator:ac12452f74e832c5899cb6d130dfa28e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b026cd74035f56db3790f1eea49de92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a2b026cd74035f56db3790f1eea49de92">isValidSplineIndex</a> (const std::string &amp;SampleName, int iSyst, int iOscChan, int iMode, int iVar1, int iVar2, int iVar3)</td></tr>
<tr class="memdesc:a2b026cd74035f56db3790f1eea49de92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure we have spline for a given bin.  <br /></td></tr>
<tr class="separator:a2b026cd74035f56db3790f1eea49de92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9bcc5253804c4a5ad8e2990490ecfab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ac9bcc5253804c4a5ad8e2990490ecfab">BuildSampleIndexingArray</a> (const std::string &amp;SampleName)</td></tr>
<tr class="separator:ac9bcc5253804c4a5ad8e2990490ecfab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb495f4d63c9e4ee10b97c47e982b28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a2eb495f4d63c9e4ee10b97c47e982b28">PrepForReweight</a> ()</td></tr>
<tr class="separator:a2eb495f4d63c9e4ee10b97c47e982b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b7b34479c3240a9827d6a0b5b7da4b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a8b7b34479c3240a9827d6a0b5b7da4b4">getSplineCoeff_SepMany</a> (int splineindex, <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;xArray, <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;manyArray)</td></tr>
<tr class="separator:a8b7b34479c3240a9827d6a0b5b7da4b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f1c5d72afb21c06cfff5710fa21083"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a79f1c5d72afb21c06cfff5710fa21083">PrintBinning</a> (TAxis *Axis) const</td></tr>
<tr class="separator:a79f1c5d72afb21c06cfff5710fa21083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4394ca08387c8a9905704e80c82a9cdc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a4394ca08387c8a9905704e80c82a9cdc">PrintSampleDetails</a> (const std::string &amp;SampleName) const</td></tr>
<tr class="memdesc:a4394ca08387c8a9905704e80c82a9cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print info like DetID number of spline params etc.  <br /></td></tr>
<tr class="separator:a4394ca08387c8a9905704e80c82a9cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdc7da54adb2e1de46ba2e6459f4aecf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#afdc7da54adb2e1de46ba2e6459f4aecf">PrintArrayDetails</a> (const std::string &amp;SampleName) const</td></tr>
<tr class="separator:afdc7da54adb2e1de46ba2e6459f4aecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4763648fb3e207e3f35ebb8a96c6d331"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a4763648fb3e207e3f35ebb8a96c6d331">retPointer</a> (const int sample, const int oscchan, const int syst, const int mode, const int var1bin, const int var2bin, const int var3bin) const</td></tr>
<tr class="memdesc:a4763648fb3e207e3f35ebb8a96c6d331"><td class="mdescLeft">&#160;</td><td class="mdescRight">get pointer to spline weight based on bin variables  <br /></td></tr>
<tr class="separator:a4763648fb3e207e3f35ebb8a96c6d331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classSplineBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classSplineBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classSplineBase.html">SplineBase</a></td></tr>
<tr class="memitem:aa6965d1522cc68ecf81ac3bfd2dcd6f1 inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase</a> ()</td></tr>
<tr class="memdesc:aa6965d1522cc68ecf81ac3bfd2dcd6f1 inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:aa6965d1522cc68ecf81ac3bfd2dcd6f1 inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de19b2322edb4197380506d594456bd inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a0de19b2322edb4197380506d594456bd">~SplineBase</a> ()</td></tr>
<tr class="memdesc:a0de19b2322edb4197380506d594456bd inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <br /></td></tr>
<tr class="separator:a0de19b2322edb4197380506d594456bd inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e629f3eef59b2f3800136c86fe90c3 inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a86e629f3eef59b2f3800136c86fe90c3">Evaluate</a> ()=0</td></tr>
<tr class="memdesc:a86e629f3eef59b2f3800136c86fe90c3 inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations.  <br /></td></tr>
<tr class="separator:a86e629f3eef59b2f3800136c86fe90c3 inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1534f622ae1976b21df1ebf984eec5 inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a2e1534f622ae1976b21df1ebf984eec5">GetName</a> () const</td></tr>
<tr class="memdesc:a2e1534f622ae1976b21df1ebf984eec5 inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get class name.  <br /></td></tr>
<tr class="separator:a2e1534f622ae1976b21df1ebf984eec5 inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af825e2661f4a52c146973edf35de9afb inherit pub_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">short int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#af825e2661f4a52c146973edf35de9afb">GetNParams</a> () const</td></tr>
<tr class="memdesc:af825e2661f4a52c146973edf35de9afb inherit pub_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of spline parameters.  <br /></td></tr>
<tr class="separator:af825e2661f4a52c146973edf35de9afb inherit pub_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-types" name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a60a2b2556b988c362c65f7f483acf014"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014">TokenOrdering</a> { <br />
&#160;&#160;<a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6">kSystToken</a>
, <a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1">kModeToken</a>
, <a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970">kVar1BinToken</a>
, <a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7">kVar2BinToken</a>
, <br />
&#160;&#160;<a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd">kVar3BinToken</a>
, <a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d">kNTokens</a>
<br />
 }</td></tr>
<tr class="separator:a60a2b2556b988c362c65f7f483acf014"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9eceab58c0aa06b58eb4e3708c00ee0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a9eceab58c0aa06b58eb4e3708c00ee0e">CalcSplineWeights</a> () override</td></tr>
<tr class="memdesc:a9eceab58c0aa06b58eb4e3708c00ee0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU based code which eval weight for each spline.  <br /></td></tr>
<tr class="separator:a9eceab58c0aa06b58eb4e3708c00ee0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a237a8b8c3c165c82ebe15d2ca740c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a1a237a8b8c3c165c82ebe15d2ca740c7">ModifyWeights</a> () override</td></tr>
<tr class="memdesc:a1a237a8b8c3c165c82ebe15d2ca740c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calc total event weight, not used by Bin-by-bin splines.  <br /></td></tr>
<tr class="separator:a1a237a8b8c3c165c82ebe15d2ca740c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc7b34c177e7b9a237e1298937f3caa"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a6dc7b34c177e7b9a237e1298937f3caa">GetTokensFromSplineName</a> (std::string FullSplineName)=0</td></tr>
<tr class="separator:a6dc7b34c177e7b9a237e1298937f3caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classSplineBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classSplineBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classSplineBase.html">SplineBase</a></td></tr>
<tr class="memitem:a589011b547ff70262ed43021a016ef30 inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">FindSplineSegment</a> ()</td></tr>
<tr class="memdesc:a589011b547ff70262ed43021a016ef30 inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW:Code used in step by step reweighting, Find Spline Segment for each param.  <br /></td></tr>
<tr class="separator:a589011b547ff70262ed43021a016ef30 inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ceacf5fee1fc8438501582bef93a9b5 inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a1ceacf5fee1fc8438501582bef93a9b5">CalcSplineWeights</a> ()=0</td></tr>
<tr class="memdesc:a1ceacf5fee1fc8438501582bef93a9b5 inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU based code which eval weight for each spline.  <br /></td></tr>
<tr class="separator:a1ceacf5fee1fc8438501582bef93a9b5 inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49665d2712b61b038085d25ace96a568 inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a49665d2712b61b038085d25ace96a568">ModifyWeights</a> ()=0</td></tr>
<tr class="memdesc:a49665d2712b61b038085d25ace96a568 inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calc total event weight.  <br /></td></tr>
<tr class="separator:a49665d2712b61b038085d25ace96a568 inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a5f86ac6f156a7e11ef188b06f425f inherit pro_methods_classSplineBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#ac8a5f86ac6f156a7e11ef188b06f425f">getTF1Coeff</a> (<a class="el" href="classTF1__red.html">TF1_red</a> *&amp;spl, int &amp;nPoints, float *&amp;coeffs)</td></tr>
<tr class="memdesc:ac8a5f86ac6f156a7e11ef188b06f425f inherit pro_methods_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">CW: Gets the polynomial coefficients for TF1.  <br /></td></tr>
<tr class="separator:ac8a5f86ac6f156a7e11ef188b06f425f inherit pro_methods_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a891de87b873e079f6bbdb1355a9ff153"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcovarianceXsec.html">covarianceXsec</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a></td></tr>
<tr class="memdesc:a891de87b873e079f6bbdb1355a9ff153"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to covariance from which we get information about spline params.  <br /></td></tr>
<tr class="separator:a891de87b873e079f6bbdb1355a9ff153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78508c5d0d4ef09457beb723dc796208"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a></td></tr>
<tr class="separator:a78508c5d0d4ef09457beb723dc796208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c28400605049bdee229885c46463dcd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a></td></tr>
<tr class="separator:a6c28400605049bdee229885c46463dcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00e1aeea8e9389c41f93469a26c83adc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a00e1aeea8e9389c41f93469a26c83adc">DimensionLabels</a></td></tr>
<tr class="separator:a00e1aeea8e9389c41f93469a26c83adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a481d275de711edfddbb82d3924b6e63a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a481d275de711edfddbb82d3924b6e63a">DetIDs</a></td></tr>
<tr class="separator:a481d275de711edfddbb82d3924b6e63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad64c7c63db8ea676f86eb2279f04d40"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#aad64c7c63db8ea676f86eb2279f04d40">nSplineParams</a></td></tr>
<tr class="separator:aad64c7c63db8ea676f86eb2279f04d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10670a64bbdef3ffd69f4b8f102fff3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">nOscChans</a></td></tr>
<tr class="separator:aa10670a64bbdef3ffd69f4b8f102fff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71b65713518f42e59c543dbad5dab70"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::vector&lt; TAxis * &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a></td></tr>
<tr class="separator:af71b65713518f42e59c543dbad5dab70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5619363447e607cd835c46d601b10675"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a></td></tr>
<tr class="separator:a5619363447e607cd835c46d601b10675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7aeec6d03dad01975582226b39632b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a></td></tr>
<tr class="separator:a6b7aeec6d03dad01975582226b39632b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af036372a158b4e463683a8d02a20ec3d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#af036372a158b4e463683a8d02a20ec3d">GlobalSystIndex</a></td></tr>
<tr class="memdesc:af036372a158b4e463683a8d02a20ec3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This holds the global spline index and is used to grab the current parameter value to evaluate splines at. Each internal vector will be of size of the number of spline systematics which affect that sample.  <br /></td></tr>
<tr class="separator:af036372a158b4e463683a8d02a20ec3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc74a6dd8b13fc6925e975bf5f92cff"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; <a class="el" href="Structs_8h.html#a6720d732608767153550aebebcf8fbf4">SplineInterpolation</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#aabc74a6dd8b13fc6925e975bf5f92cff">SplineInterpolationTypes</a></td></tr>
<tr class="memdesc:aabc74a6dd8b13fc6925e975bf5f92cff"><td class="mdescLeft">&#160;</td><td class="mdescRight">spline interpolation types for each sample. These vectors are from a call to GetSplineInterpolationFromDetID()  <br /></td></tr>
<tr class="separator:aabc74a6dd8b13fc6925e975bf5f92cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf850f4ec22e4f7338f243999ecc7dd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a></td></tr>
<tr class="memdesc:aacf850f4ec22e4f7338f243999ecc7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of each spline parameter  <br /></td></tr>
<tr class="separator:aacf850f4ec22e4f7338f243999ecc7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b821b95c2db6063a9baa244b28aeaa6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a3b821b95c2db6063a9baa244b28aeaa6">UniqueSystIndices</a></td></tr>
<tr class="memdesc:a3b821b95c2db6063a9baa244b28aeaa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global index of each spline param, it allows us to match spline ordering with global.  <br /></td></tr>
<tr class="separator:a3b821b95c2db6063a9baa244b28aeaa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a4e79bfe675a4070597557e6226e12"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &gt; &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a></td></tr>
<tr class="memdesc:ab3a4e79bfe675a4070597557e6226e12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variables related to determined which modes have splines and which piggy-back of other modes.  <br /></td></tr>
<tr class="separator:ab3a4e79bfe675a4070597557e6226e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63885ddb6731f77808d029372e6b187"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#af63885ddb6731f77808d029372e6b187">coeffindexvec</a></td></tr>
<tr class="separator:af63885ddb6731f77808d029372e6b187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a564f5748f16d97ebf1e1c300a1cc5c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a7a564f5748f16d97ebf1e1c300a1cc5c">uniquecoeffindices</a></td></tr>
<tr class="memdesc:a7a564f5748f16d97ebf1e1c300a1cc5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique coefficient indices.  <br /></td></tr>
<tr class="separator:a7a564f5748f16d97ebf1e1c300a1cc5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ec9ea208503053b9735b1cb1bc417d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classTSpline3__red.html">TSpline3_red</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a></td></tr>
<tr class="memdesc:a84ec9ea208503053b9735b1cb1bc417d"><td class="mdescLeft">&#160;</td><td class="mdescRight">holds each spline object before stripping into coefficient monolith  <br /></td></tr>
<tr class="separator:a84ec9ea208503053b9735b1cb1bc417d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1fefa7f796f2a28a69f5336f5777bce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a></td></tr>
<tr class="separator:ad1fefa7f796f2a28a69f5336f5777bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addec38a8493974ccc3ee16931d5b794a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a></td></tr>
<tr class="separator:addec38a8493974ccc3ee16931d5b794a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcff04fee3e6790a099a0df9dbee74c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">CoeffIndex</a></td></tr>
<tr class="separator:abcff04fee3e6790a099a0df9dbee74c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a204355df78af3f79bf8f2815258d3"><td class="memItemLeft" align="right" valign="top">bool *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a></td></tr>
<tr class="memdesc:aa8a204355df78af3f79bf8f2815258d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Need to keep track of which splines are flat and which aren't.  <br /></td></tr>
<tr class="separator:aa8a204355df78af3f79bf8f2815258d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f046c4c64c0aa11334b32b0701a9f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">xcoeff_arr</a></td></tr>
<tr class="memdesc:a00f046c4c64c0aa11334b32b0701a9f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">x coefficients for each spline  <br /></td></tr>
<tr class="separator:a00f046c4c64c0aa11334b32b0701a9f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab883a1f2cdae707c36fa27b86ed7f279"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a></td></tr>
<tr class="memdesc:ab883a1f2cdae707c36fa27b86ed7f279"><td class="mdescLeft">&#160;</td><td class="mdescRight">ybcd coefficients for each spline  <br /></td></tr>
<tr class="separator:ab883a1f2cdae707c36fa27b86ed7f279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107c337ce7053208795747a3223f04e1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#a107c337ce7053208795747a3223f04e1">weightvec_Monolith</a></td></tr>
<tr class="memdesc:a107c337ce7053208795747a3223f04e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores weight from spline evaluation for each single spline.  <br /></td></tr>
<tr class="separator:a107c337ce7053208795747a3223f04e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae237cc1c6d97e35bf4f7f64e369a5781"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ae237cc1c6d97e35bf4f7f64e369a5781">uniquesplinevec_Monolith</a></td></tr>
<tr class="memdesc:ae237cc1c6d97e35bf4f7f64e369a5781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps single spline object with single parameter.  <br /></td></tr>
<tr class="separator:ae237cc1c6d97e35bf4f7f64e369a5781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad004862f499b783034dd6a30df25c9f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMaCh3Modes.html">MaCh3Modes</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsplineFDBase.html#ad004862f499b783034dd6a30df25c9f4">Modes</a></td></tr>
<tr class="memdesc:ad004862f499b783034dd6a30df25c9f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to MaCh3 Mode from which we get spline suffix  <br /></td></tr>
<tr class="separator:ad004862f499b783034dd6a30df25c9f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classSplineBase"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classSplineBase')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classSplineBase.html">SplineBase</a></td></tr>
<tr class="memitem:a9452897aecfe016466543dfe19c0628b inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structFastSplineInfo.html">FastSplineInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a></td></tr>
<tr class="separator:a9452897aecfe016466543dfe19c0628b inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938e3a60326137037f868b9930e2a972 inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">short int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a></td></tr>
<tr class="separator:a938e3a60326137037f868b9930e2a972 inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0b1d3a1adf7cffa7e74581bc7d58d4c inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a></td></tr>
<tr class="memdesc:aa0b1d3a1adf7cffa7e74581bc7d58d4c inherit pro_attribs_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store parameter values they are not in <a class="el" href="structFastSplineInfo.html" title="CW: Add a struct to hold info about the splinified xsec parameters and help with FindSplineSegment.">FastSplineInfo</a> as in case of GPU we need to copy paste it to GPU.  <br /></td></tr>
<tr class="separator:aa0b1d3a1adf7cffa7e74581bc7d58d4c inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2165b057a0125a28d96f247ca8680b42 inherit pro_attribs_classSplineBase"><td class="memItemLeft" align="right" valign="top">short int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a></td></tr>
<tr class="memdesc:a2165b057a0125a28d96f247ca8680b42 inherit pro_attribs_classSplineBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of parameters that have splines.  <br /></td></tr>
<tr class="separator:a2165b057a0125a28d96f247ca8680b42 inherit pro_attribs_classSplineBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bin-by-bin class calculating response for spline parameters. </p>
<dl class="section see"><dt>See also</dt><dd>For more details, visit the <a href="https://github.com/mach3-software/MaCh3/wiki/05.-Splines">Wiki</a>. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Dan Barrow </dd>
<dd>
Ed Atkin </dd>
<dd>
Henry Wallace </dd></dl>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00018">18</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a60a2b2556b988c362c65f7f483acf014" name="a60a2b2556b988c362c65f7f483acf014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a2b2556b988c362c65f7f483acf014">&#9670;&#160;</a></span>TokenOrdering</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014">splineFDBase::TokenOrdering</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6" name="a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6"></a>kSystToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1" name="a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1"></a>kModeToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970" name="a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970"></a>kVar1BinToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7" name="a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7"></a>kVar2BinToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd" name="a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd"></a>kVar3BinToken&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d" name="a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d"></a>kNTokens&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00136">136</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>{<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6">kSystToken</a>,<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1">kModeToken</a>,<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970">kVar1BinToken</a>,<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7">kVar2BinToken</a>,<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd">kVar3BinToken</a>,<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d">kNTokens</a>};</div>
<div class="ttc" id="aclasssplineFDBase_html_a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1"><div class="ttname"><a href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1">splineFDBase::kModeToken</a></div><div class="ttdeci">@ kModeToken</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00136">splineFDBase.h:136</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6"><div class="ttname"><a href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6">splineFDBase::kSystToken</a></div><div class="ttdeci">@ kSystToken</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00136">splineFDBase.h:136</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd"><div class="ttname"><a href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd">splineFDBase::kVar3BinToken</a></div><div class="ttdeci">@ kVar3BinToken</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00136">splineFDBase.h:136</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d"><div class="ttname"><a href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d">splineFDBase::kNTokens</a></div><div class="ttdeci">@ kNTokens</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00136">splineFDBase.h:136</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970"><div class="ttname"><a href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970">splineFDBase::kVar1BinToken</a></div><div class="ttdeci">@ kVar1BinToken</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00136">splineFDBase.h:136</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7"><div class="ttname"><a href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7">splineFDBase::kVar2BinToken</a></div><div class="ttdeci">@ kVar2BinToken</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00136">splineFDBase.h:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0eac7d14ff4f54d5346b60a18876ecaf" name="a0eac7d14ff4f54d5346b60a18876ecaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eac7d14ff4f54d5346b60a18876ecaf">&#9670;&#160;</a></span>splineFDBase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Core_8h.html#a46b8fa28114cf68de4549061568b5ade">_MaCh3_Safe_Include_Start_</a> <a class="el" href="Core_8h.html#a91209a17295738b34b124b79faa68a1b">_MaCh3_Safe_Include_End_</a> splineFDBase::splineFDBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcovarianceXsec.html">covarianceXsec</a> *&#160;</td>
          <td class="paramname"><em>xsec_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaCh3Modes.html">MaCh3Modes</a> *&#160;</td>
          <td class="paramname"><em>Modes_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>ETA - do all of these functions and members actually need to be public? </dd></dl>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00013">13</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   13</span>                                                                    : <a class="code hl_function" href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase</a>() {</div>
<div class="line"><span class="lineno">   14</span><span class="comment">//****************************************</span></div>
<div class="line"><span class="lineno">   15</span>  <span class="keywordflow">if</span> (!xsec_) {</div>
<div class="line"><span class="lineno">   16</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to create splineFDBase with uninitialized covariance object&quot;</span>);</div>
<div class="line"><span class="lineno">   17</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">   18</span>  }</div>
<div class="line"><span class="lineno">   19</span>  <a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a> = xsec_;</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>  <span class="keywordflow">if</span> (!Modes_) {</div>
<div class="line"><span class="lineno">   22</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to create splineFDBase with uninitialized MaCh3Modes object&quot;</span>);</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">   24</span>  }</div>
<div class="line"><span class="lineno">   25</span>  <a class="code hl_variable" href="classsplineFDBase.html#ad004862f499b783034dd6a30df25c9f4">Modes</a> = Modes_;</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>  <span class="comment">// Keep these in class scope, important for using 1 monolith/sample!</span></div>
<div class="line"><span class="lineno">   28</span>  <a class="code hl_variable" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a> = 0; <span class="comment">//Keeps track of the monolith index we&#39;re on when filling arrays (declared here so we can have multiple FillSampleArray calls)</span></div>
<div class="line"><span class="lineno">   29</span>  <a class="code hl_variable" href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">CoeffIndex</a> = 0; <span class="comment">//Keeps track of our indexing the coefficient arrays [x, ybcd]</span></div>
<div class="line"><span class="lineno">   30</span>}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a61052119a625282d0ec6d4a97adf3ee2"><div class="ttname"><a href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a></div><div class="ttdeci">#define MACH3LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00025">MaCh3Logger.h:25</a></div></div>
<div class="ttc" id="aclassMaCh3Exception_html"><div class="ttname"><a href="classMaCh3Exception.html">MaCh3Exception</a></div><div class="ttdoc">Custom exception class for MaCh3 errors.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Exception_8h_source.html#l00013">MaCh3Exception.h:13</a></div></div>
<div class="ttc" id="aclassSplineBase_html_aa6965d1522cc68ecf81ac3bfd2dcd6f1"><div class="ttname"><a href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase::SplineBase</a></div><div class="ttdeci">SplineBase()</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00007">SplineBase.cpp:7</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a891de87b873e079f6bbdb1355a9ff153"><div class="ttname"><a href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">splineFDBase::xsec</a></div><div class="ttdeci">covarianceXsec * xsec</div><div class="ttdoc">Pointer to covariance from which we get information about spline params.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00080">splineFDBase.h:80</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_abcff04fee3e6790a099a0df9dbee74c2"><div class="ttname"><a href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">splineFDBase::CoeffIndex</a></div><div class="ttdeci">int CoeffIndex</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00120">splineFDBase.h:120</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_ad004862f499b783034dd6a30df25c9f4"><div class="ttname"><a href="classsplineFDBase.html#ad004862f499b783034dd6a30df25c9f4">splineFDBase::Modes</a></div><div class="ttdeci">MaCh3Modes * Modes</div><div class="ttdoc">pointer to MaCh3 Mode from which we get spline suffix</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00135">splineFDBase.h:135</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_addec38a8493974ccc3ee16931d5b794a"><div class="ttname"><a href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">splineFDBase::MonolithIndex</a></div><div class="ttdeci">int MonolithIndex</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00119">splineFDBase.h:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16c33124874a336255a3cba480b835c2" name="a16c33124874a336255a3cba480b835c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c33124874a336255a3cba480b835c2">&#9670;&#160;</a></span>~splineFDBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">splineFDBase::~splineFDBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00032">32</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>                           {</div>
<div class="line"><span class="lineno">   33</span><span class="comment">//****************************************</span></div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a>;</div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">xcoeff_arr</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code hl_variable" href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">xcoeff_arr</a>;</div>
<div class="line"><span class="lineno">   36</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code hl_variable" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a>;</div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a> != <span class="keyword">nullptr</span>) <span class="keyword">delete</span>[] <a class="code hl_variable" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a>;</div>
<div class="line"><span class="lineno">   38</span>}</div>
<div class="ttc" id="aclassSplineBase_html_a938e3a60326137037f868b9930e2a972"><div class="ttname"><a href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineBase::SplineSegments</a></div><div class="ttdeci">short int * SplineSegments</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00061">SplineBase.h:61</a></div></div>
<div class="ttc" id="aclassSplineBase_html_aa0b1d3a1adf7cffa7e74581bc7d58d4c"><div class="ttname"><a href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">SplineBase::ParamValues</a></div><div class="ttdeci">float * ParamValues</div><div class="ttdoc">Store parameter values they are not in FastSplineInfo as in case of GPU we need to copy paste it to G...</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00063">SplineBase.h:63</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a00f046c4c64c0aa11334b32b0701a9f1"><div class="ttname"><a href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">splineFDBase::xcoeff_arr</a></div><div class="ttdeci">M3::float_t * xcoeff_arr</div><div class="ttdoc">x coefficients for each spline</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00125">splineFDBase.h:125</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_ab883a1f2cdae707c36fa27b86ed7f279"><div class="ttname"><a href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">splineFDBase::manycoeff_arr</a></div><div class="ttdeci">M3::float_t * manycoeff_arr</div><div class="ttdoc">ybcd coefficients for each spline</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00127">splineFDBase.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2b4582865eab2e63a7b9ed9283469036" name="a2b4582865eab2e63a7b9ed9283469036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b4582865eab2e63a7b9ed9283469036">&#9670;&#160;</a></span>AddSample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::AddSample </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>DetID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>OscChanFileNames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>SplineVarNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>add oscillation channel to spline monolith </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00063">63</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{</div>
<div class="line"><span class="lineno">   70</span>  <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>.push_back(SampleName);</div>
<div class="line"><span class="lineno">   71</span>  <a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>.push_back(<span class="keywordtype">int</span>(SplineVarNames.size()));</div>
<div class="line"><span class="lineno">   72</span>  <a class="code hl_variable" href="classsplineFDBase.html#a00e1aeea8e9389c41f93469a26c83adc">DimensionLabels</a>.push_back(SplineVarNames);</div>
<div class="line"><span class="lineno">   73</span>  <a class="code hl_variable" href="classsplineFDBase.html#a481d275de711edfddbb82d3924b6e63a">DetIDs</a>.push_back(DetID);</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>  <span class="keywordtype">int</span> nSplineParam = <a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a>-&gt;<a class="code hl_function" href="classcovarianceXsec.html#ab4f92efb89282448bc65d69238147566">GetNumParamsFromDetID</a>(DetID, SystType::kSpline);</div>
<div class="line"><span class="lineno">   76</span>  <a class="code hl_variable" href="classsplineFDBase.html#aad64c7c63db8ea676f86eb2279f04d40">nSplineParams</a>.push_back(nSplineParam);</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>  <span class="comment">//This holds the global index of the spline i.e. 0 -&gt; _fNumPar</span></div>
<div class="line"><span class="lineno">   79</span>  std::vector&lt;int&gt; GlobalSystIndex_Sample = <a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a>-&gt;<a class="code hl_function" href="classcovarianceXsec.html#ac580752fdcf84f1f6298c29e15b7fbb5">GetGlobalSystIndexFromDetID</a>(DetID, SystType::kSpline);</div>
<div class="line"><span class="lineno">   80</span>  <span class="comment">//Keep track of this for all the samples</span></div>
<div class="line"><span class="lineno">   81</span>  <a class="code hl_variable" href="classsplineFDBase.html#af036372a158b4e463683a8d02a20ec3d">GlobalSystIndex</a>.push_back(GlobalSystIndex_Sample);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>  std::vector&lt;SplineInterpolation&gt; SplineInterpolation_Sample = <a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a>-&gt;<a class="code hl_function" href="classcovarianceXsec.html#a31ec21d902da40866b905e6ef55aef1e">GetSplineInterpolationFromDetID</a>(DetID);</div>
<div class="line"><span class="lineno">   84</span>  <span class="comment">// Keep track of this for all samples</span></div>
<div class="line"><span class="lineno">   85</span>  <a class="code hl_variable" href="classsplineFDBase.html#aabc74a6dd8b13fc6925e975bf5f92cff">SplineInterpolationTypes</a>.push_back(SplineInterpolation_Sample);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  std::vector&lt;std::string&gt; SplineFileParPrefixNames_Sample = <a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a>-&gt;<a class="code hl_function" href="classcovarianceXsec.html#ae9e3666595988885e95c288f6ffd4ff6">GetSplineParsNamesFromDetID</a>(DetID);</div>
<div class="line"><span class="lineno">   88</span>  <a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>.push_back(SplineFileParPrefixNames_Sample);</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Create SplineModeVecs_Sample&quot;</span>);</div>
<div class="line"><span class="lineno">   91</span>  std::vector&lt;std::vector&lt;int&gt;&gt; SplineModeVecs_Sample = <a class="code hl_function" href="classsplineFDBase.html#a4926750455273cdfc56ebe7cadc16ef5">StripDuplicatedModes</a>(<a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a>-&gt;<a class="code hl_function" href="classcovarianceXsec.html#a4559ca9cbbc02e63d230ee868997d252">GetSplineModeVecFromDetID</a>(DetID));</div>
<div class="line"><span class="lineno">   92</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;SplineModeVecs_Sample is of size {}&quot;</span>, SplineModeVecs_Sample.size());</div>
<div class="line"><span class="lineno">   93</span>  <a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>.push_back(SplineModeVecs_Sample);</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;SplineModeVecs is of size {}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>.size());</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordtype">int</span> nOscChan = int(OscChanFileNames.size());</div>
<div class="line"><span class="lineno">   98</span>  <a class="code hl_variable" href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">nOscChans</a>.push_back(nOscChan);</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>  <a class="code hl_function" href="classsplineFDBase.html#a4394ca08387c8a9905704e80c82a9cdc">PrintSampleDetails</a>(SampleName);</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>  std::vector&lt;std::vector&lt;TAxis *&gt;&gt; SampleBinning(nOscChan);</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChan; iOscChan++)</div>
<div class="line"><span class="lineno">  104</span>  {</div>
<div class="line"><span class="lineno">  105</span>    SampleBinning[iOscChan] = <a class="code hl_function" href="classsplineFDBase.html#a00c0e93b4c4799ffacaa58578e5dcf6b">FindSplineBinning</a>(OscChanFileNames[iOscChan], SampleName);</div>
<div class="line"><span class="lineno">  106</span>  }</div>
<div class="line"><span class="lineno">  107</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>  <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>.push_back(SampleBinning);</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>  <a class="code hl_function" href="classsplineFDBase.html#ac9bcc5253804c4a5ad8e2990490ecfab">BuildSampleIndexingArray</a>(SampleName);</div>
<div class="line"><span class="lineno">  111</span>  <a class="code hl_function" href="classsplineFDBase.html#afdc7da54adb2e1de46ba2e6459f4aecf">PrintArrayDetails</a>(SampleName);</div>
<div class="line"><span class="lineno">  112</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>  <a class="code hl_function" href="classsplineFDBase.html#a52849ba867bea0744c16d03e0e7913ed">FillSampleArray</a>(SampleName, OscChanFileNames);</div>
<div class="line"><span class="lineno">  115</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a95fa4dffc648e4c5536c9292c2bdcac3"><div class="ttname"><a href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a></div><div class="ttdeci">#define MACH3LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00023">MaCh3Logger.h:23</a></div></div>
<div class="ttc" id="aclasscovarianceXsec_html_a31ec21d902da40866b905e6ef55aef1e"><div class="ttname"><a href="classcovarianceXsec.html#a31ec21d902da40866b905e6ef55aef1e">covarianceXsec::GetSplineInterpolationFromDetID</a></div><div class="ttdeci">const std::vector&lt; SplineInterpolation &gt; GetSplineInterpolationFromDetID(const std::string &amp;DetID)</div><div class="ttdoc">Get the interpolation types for splines affecting a particular DetID.</div><div class="ttdef"><b>Definition:</b> <a href="covarianceXsec_8cpp_source.html#l00121">covarianceXsec.cpp:121</a></div></div>
<div class="ttc" id="aclasscovarianceXsec_html_a4559ca9cbbc02e63d230ee868997d252"><div class="ttname"><a href="classcovarianceXsec.html#a4559ca9cbbc02e63d230ee868997d252">covarianceXsec::GetSplineModeVecFromDetID</a></div><div class="ttdeci">const std::vector&lt; std::vector&lt; int &gt; &gt; GetSplineModeVecFromDetID(const std::string &amp;DetID)</div><div class="ttdoc">DB Grab the Spline Modes for the relevant DetID.</div><div class="ttdef"><b>Definition:</b> <a href="covarianceXsec_8cpp_source.html#l00137">covarianceXsec.cpp:137</a></div></div>
<div class="ttc" id="aclasscovarianceXsec_html_ab4f92efb89282448bc65d69238147566"><div class="ttname"><a href="classcovarianceXsec.html#ab4f92efb89282448bc65d69238147566">covarianceXsec::GetNumParamsFromDetID</a></div><div class="ttdeci">int GetNumParamsFromDetID(const std::string &amp;DetID, const SystType Type)</div><div class="ttdoc">DB Grab the number of parameters for the relevant DetID.</div><div class="ttdef"><b>Definition:</b> <a href="covarianceXsec_8cpp_source.html#l00282">covarianceXsec.cpp:282</a></div></div>
<div class="ttc" id="aclasscovarianceXsec_html_ac580752fdcf84f1f6298c29e15b7fbb5"><div class="ttname"><a href="classcovarianceXsec.html#ac580752fdcf84f1f6298c29e15b7fbb5">covarianceXsec::GetGlobalSystIndexFromDetID</a></div><div class="ttdeci">const std::vector&lt; int &gt; GetGlobalSystIndexFromDetID(const std::string &amp;DetID, const SystType Type)</div><div class="ttdoc">DB Get spline parameters depending on given DetID.</div><div class="ttdef"><b>Definition:</b> <a href="covarianceXsec_8cpp_source.html#l00213">covarianceXsec.cpp:213</a></div></div>
<div class="ttc" id="aclasscovarianceXsec_html_ae9e3666595988885e95c288f6ffd4ff6"><div class="ttname"><a href="classcovarianceXsec.html#ae9e3666595988885e95c288f6ffd4ff6">covarianceXsec::GetSplineParsNamesFromDetID</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; GetSplineParsNamesFromDetID(const std::string &amp;DetID)</div><div class="ttdoc">DB Get spline parameters depending on given DetID.</div><div class="ttdef"><b>Definition:</b> <a href="covarianceXsec_8cpp_source.html#l00106">covarianceXsec.cpp:106</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a00c0e93b4c4799ffacaa58578e5dcf6b"><div class="ttname"><a href="classsplineFDBase.html#a00c0e93b4c4799ffacaa58578e5dcf6b">splineFDBase::FindSplineBinning</a></div><div class="ttdeci">std::vector&lt; TAxis * &gt; FindSplineBinning(std::string FileName, std::string SampleName)</div><div class="ttdoc">Grab histograms with spline binning.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00302">splineFDBase.cpp:302</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a00e1aeea8e9389c41f93469a26c83adc"><div class="ttname"><a href="classsplineFDBase.html#a00e1aeea8e9389c41f93469a26c83adc">splineFDBase::DimensionLabels</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::string &gt; &gt; DimensionLabels</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00085">splineFDBase.h:85</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a4394ca08387c8a9905704e80c82a9cdc"><div class="ttname"><a href="classsplineFDBase.html#a4394ca08387c8a9905704e80c82a9cdc">splineFDBase::PrintSampleDetails</a></div><div class="ttdeci">void PrintSampleDetails(const std::string &amp;SampleName) const</div><div class="ttdoc">Print info like DetID number of spline params etc.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00665">splineFDBase.cpp:665</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a481d275de711edfddbb82d3924b6e63a"><div class="ttname"><a href="classsplineFDBase.html#a481d275de711edfddbb82d3924b6e63a">splineFDBase::DetIDs</a></div><div class="ttdeci">std::vector&lt; std::string &gt; DetIDs</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00086">splineFDBase.h:86</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a4926750455273cdfc56ebe7cadc16ef5"><div class="ttname"><a href="classsplineFDBase.html#a4926750455273cdfc56ebe7cadc16ef5">splineFDBase::StripDuplicatedModes</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; StripDuplicatedModes(std::vector&lt; std::vector&lt; int &gt; &gt; InputVector)</div><div class="ttdoc">Check if there are any repeated modes. This is used to reduce the number of modes in case many intera...</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00812">splineFDBase.cpp:812</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a52849ba867bea0744c16d03e0e7913ed"><div class="ttname"><a href="classsplineFDBase.html#a52849ba867bea0744c16d03e0e7913ed">splineFDBase::FillSampleArray</a></div><div class="ttdeci">virtual void FillSampleArray(std::string SampleName, std::vector&lt; std::string &gt; OscChanFileNames)</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00846">splineFDBase.cpp:846</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a5619363447e607cd835c46d601b10675"><div class="ttname"><a href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">splineFDBase::SplineFileParPrefixNames</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::string &gt; &gt; SplineFileParPrefixNames</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00091">splineFDBase.h:91</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a6b7aeec6d03dad01975582226b39632b"><div class="ttname"><a href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">splineFDBase::SplineModeVecs</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; SplineModeVecs</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00095">splineFDBase.h:95</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a6c28400605049bdee229885c46463dcd"><div class="ttname"><a href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">splineFDBase::Dimensions</a></div><div class="ttdeci">std::vector&lt; int &gt; Dimensions</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00084">splineFDBase.h:84</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a78508c5d0d4ef09457beb723dc796208"><div class="ttname"><a href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">splineFDBase::SampleNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; SampleNames</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00083">splineFDBase.h:83</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_aa10670a64bbdef3ffd69f4b8f102fff3"><div class="ttname"><a href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">splineFDBase::nOscChans</a></div><div class="ttdeci">std::vector&lt; int &gt; nOscChans</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00088">splineFDBase.h:88</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_aabc74a6dd8b13fc6925e975bf5f92cff"><div class="ttname"><a href="classsplineFDBase.html#aabc74a6dd8b13fc6925e975bf5f92cff">splineFDBase::SplineInterpolationTypes</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; SplineInterpolation &gt; &gt; SplineInterpolationTypes</div><div class="ttdoc">spline interpolation types for each sample. These vectors are from a call to GetSplineInterpolationFr...</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00102">splineFDBase.h:102</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_aad64c7c63db8ea676f86eb2279f04d40"><div class="ttname"><a href="classsplineFDBase.html#aad64c7c63db8ea676f86eb2279f04d40">splineFDBase::nSplineParams</a></div><div class="ttdeci">std::vector&lt; int &gt; nSplineParams</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00087">splineFDBase.h:87</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_ac9bcc5253804c4a5ad8e2990490ecfab"><div class="ttname"><a href="classsplineFDBase.html#ac9bcc5253804c4a5ad8e2990490ecfab">splineFDBase::BuildSampleIndexingArray</a></div><div class="ttdeci">void BuildSampleIndexingArray(const std::string &amp;SampleName)</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00270">splineFDBase.cpp:270</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_af036372a158b4e463683a8d02a20ec3d"><div class="ttname"><a href="classsplineFDBase.html#af036372a158b4e463683a8d02a20ec3d">splineFDBase::GlobalSystIndex</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; GlobalSystIndex</div><div class="ttdoc">This holds the global spline index and is used to grab the current parameter value to evaluate spline...</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00099">splineFDBase.h:99</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_af71b65713518f42e59c543dbad5dab70"><div class="ttname"><a href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">splineFDBase::SplineBinning</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; TAxis * &gt; &gt; &gt; SplineBinning</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00090">splineFDBase.h:90</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_afdc7da54adb2e1de46ba2e6459f4aecf"><div class="ttname"><a href="classsplineFDBase.html#afdc7da54adb2e1de46ba2e6459f4aecf">splineFDBase::PrintArrayDetails</a></div><div class="ttdeci">void PrintArrayDetails(const std::string &amp;SampleName) const</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00678">splineFDBase.cpp:678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9bcc5253804c4a5ad8e2990490ecfab" name="ac9bcc5253804c4a5ad8e2990490ecfab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9bcc5253804c4a5ad8e2990490ecfab">&#9670;&#160;</a></span>BuildSampleIndexingArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::BuildSampleIndexingArray </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00270">270</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  272</span>{  </div>
<div class="line"><span class="lineno">  273</span>  <span class="keywordtype">int</span> iSample = <a class="code hl_function" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a>(SampleName);</div>
<div class="line"><span class="lineno">  274</span>  <span class="keywordtype">int</span> nSplineSysts = <a class="code hl_variable" href="classsplineFDBase.html#aad64c7c63db8ea676f86eb2279f04d40">nSplineParams</a>[iSample];</div>
<div class="line"><span class="lineno">  275</span>  <span class="keywordtype">int</span> nOscChannels = <a class="code hl_variable" href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">nOscChans</a>[iSample];</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>  <span class="comment">// Resize the main indexing structure</span></div>
<div class="line"><span class="lineno">  278</span>  <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.emplace_back(nOscChannels);</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChannels; ++iOscChan)</div>
<div class="line"><span class="lineno">  281</span>  {</div>
<div class="line"><span class="lineno">  282</span>    <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.back()[iOscChan].resize(nSplineSysts);</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSyst = 0; iSyst &lt; nSplineSysts; ++iSyst)</div>
<div class="line"><span class="lineno">  284</span>    {</div>
<div class="line"><span class="lineno">  285</span>      <span class="keywordtype">int</span> nModesInSyst = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>[iSample][iSyst].size());</div>
<div class="line"><span class="lineno">  286</span>      <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.back()[iOscChan][iSyst].resize(nModesInSyst);</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iMode = 0; iMode &lt; nModesInSyst; ++iMode)</div>
<div class="line"><span class="lineno">  289</span>      {</div>
<div class="line"><span class="lineno">  290</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> nBins1 = <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[iSample][iOscChan][0]-&gt;GetNbins();</div>
<div class="line"><span class="lineno">  291</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> nBins2 = <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[iSample][iOscChan][1]-&gt;GetNbins();</div>
<div class="line"><span class="lineno">  292</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> nBins3 = <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[iSample][iOscChan][2]-&gt;GetNbins();</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>        <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.back()[iOscChan][iSyst][iMode]</div>
<div class="line"><span class="lineno">  295</span>                .resize(nBins1,std::vector&lt;std::vector&lt;int&gt;&gt;(nBins2, std::vector&lt;int&gt;(nBins3, 0)));</div>
<div class="line"><span class="lineno">  296</span>      }</div>
<div class="line"><span class="lineno">  297</span>    } <span class="comment">// end of iSyst loop</span></div>
<div class="line"><span class="lineno">  298</span>  } <span class="comment">// end of iOscChan loop</span></div>
<div class="line"><span class="lineno">  299</span>}</div>
<div class="ttc" id="aclasssplineFDBase_html_ab3a4e79bfe675a4070597557e6226e12"><div class="ttname"><a href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">splineFDBase::indexvec</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &gt; &gt; &gt; &gt; indexvec</div><div class="ttdoc">Variables related to determined which modes have splines and which piggy-back of other modes.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00110">splineFDBase.h:110</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_ac12452f74e832c5899cb6d130dfa28e2"><div class="ttname"><a href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">splineFDBase::getSampleIndex</a></div><div class="ttdeci">int getSampleIndex(const std::string &amp;SampleName) const</div><div class="ttdoc">Get index of sample based on name.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00653">splineFDBase.cpp:653</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9eceab58c0aa06b58eb4e3708c00ee0e" name="a9eceab58c0aa06b58eb4e3708c00ee0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eceab58c0aa06b58eb4e3708c00ee0e">&#9670;&#160;</a></span>CalcSplineWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::CalcSplineWeights </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CPU based code which eval weight for each spline. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>KS: Once could use "ParamValues" but this will result in tiny bit different results due to floating point precision </dd></dl>

<p>Implements <a class="el" href="classSplineBase.html#a1ceacf5fee1fc8438501582bef93a9b5">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00229">229</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  231</span>{</div>
<div class="line"><span class="lineno">  232</span><span class="preprocessor">  #ifdef MULTITHREAD</span></div>
<div class="line"><span class="lineno">  233</span><span class="preprocessor">  #pragma omp parallel for simd</span></div>
<div class="line"><span class="lineno">  234</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno">  235</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iCoeff = 0; iCoeff &lt; <a class="code hl_variable" href="classsplineFDBase.html#a7a564f5748f16d97ebf1e1c300a1cc5c">uniquecoeffindices</a>.size(); ++iCoeff)</div>
<div class="line"><span class="lineno">  236</span>  {</div>
<div class="line"><span class="lineno">  237</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> iSpline = <a class="code hl_variable" href="classsplineFDBase.html#a7a564f5748f16d97ebf1e1c300a1cc5c">uniquecoeffindices</a>[iCoeff];</div>
<div class="line"><span class="lineno">  238</span>    <span class="keyword">const</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> uniqueIndex = short(<a class="code hl_variable" href="classsplineFDBase.html#ae237cc1c6d97e35bf4f7f64e369a5781">uniquesplinevec_Monolith</a>[iSpline]);</div>
<div class="line"><span class="lineno">  239</span>    <span class="keyword">const</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> currentsegment = short(<a class="code hl_variable" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a>[uniqueIndex]);</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> segCoeff = <a class="code hl_variable" href="classsplineFDBase.html#af63885ddb6731f77808d029372e6b187">coeffindexvec</a>[iSpline]+currentsegment;</div>
<div class="line"><span class="lineno">  242</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> coeffOffset = segCoeff * 4;</div>
<div class="line"><span class="lineno">  243</span>    <span class="comment">// These are what we can extract from the TSpline3</span></div>
<div class="line"><span class="lineno">  244</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> y = <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a>[coeffOffset+<a class="code hl_enumvalue" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6">kCoeffY</a>];</div>
<div class="line"><span class="lineno">  245</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> b = <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a>[coeffOffset+<a class="code hl_enumvalue" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42">kCoeffB</a>];</div>
<div class="line"><span class="lineno">  246</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> c = <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a>[coeffOffset+<a class="code hl_enumvalue" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36">kCoeffC</a>];</div>
<div class="line"><span class="lineno">  247</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> d = <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a>[coeffOffset+<a class="code hl_enumvalue" href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d">kCoeffD</a>];</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">// Get the variation for this reconfigure for the ith parameter</span></div>
<div class="line"><span class="lineno">  251</span><span class="comment"></span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> xvar = (*<a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[uniqueIndex].splineParsPointer);</div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">// The Delta(x) = xvar - x</span></div>
<div class="line"><span class="lineno">  253</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> dx = xvar - <a class="code hl_variable" href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">xcoeff_arr</a>[segCoeff];</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    <span class="comment">//Speedy 1% time boost https://en.cppreference.com/w/c/numeric/math/fma (see ND code!)</span></div>
<div class="line"><span class="lineno">  256</span>    <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> weight = <a class="code hl_function" href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a>(dx, <a class="code hl_function" href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a>(dx, <a class="code hl_function" href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a>(dx, d, c), b), y);</div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">//This is the speedy version of writing dx^3+b*dx^2+c*dx+d</span></div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="comment">//ETA - do we need this? We check later for negative weights and I wonder if this is even</span></div>
<div class="line"><span class="lineno">  260</span>    <span class="comment">//possible with the fmaf line above?</span></div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordflow">if</span>(weight &lt; 0){weight = 0.;}  <span class="comment">//Stops is getting negative weights</span></div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_variable" href="classsplineFDBase.html#a107c337ce7053208795747a3223f04e1">weightvec_Monolith</a>[iSpline] = weight;</div>
<div class="line"><span class="lineno">  264</span>  }</div>
<div class="line"><span class="lineno">  265</span>}</div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a546352c58e328d9b57692a033eee8a42">kCoeffB</a></div><div class="ttdeci">@ kCoeffB</div><div class="ttdoc">Coefficient B.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00025">SplineCommon.h:25</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a82b4ea363cc5a4b0429efcc46582769d">kCoeffD</a></div><div class="ttdeci">@ kCoeffD</div><div class="ttdoc">Coefficient D.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00028">SplineCommon.h:27</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0a9e87d802f64d8929291c58eeb0eb16e6">kCoeffY</a></div><div class="ttdeci">@ kCoeffY</div><div class="ttdoc">Coefficient Y.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00024">SplineCommon.h:24</a></div></div>
<div class="ttc" id="aSplineCommon_8h_html_aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36"><div class="ttname"><a href="SplineCommon_8h.html#aac6312c7a4c683e6d016d9fccdc7d7c0af73b429597449e82d2920f69d03cef36">kCoeffC</a></div><div class="ttdeci">@ kCoeffC</div><div class="ttdoc">Coefficient C.</div><div class="ttdef"><b>Definition:</b> <a href="SplineCommon_8h_source.html#l00026">SplineCommon.h:26</a></div></div>
<div class="ttc" id="aclassSplineBase_html_a9452897aecfe016466543dfe19c0628b"><div class="ttname"><a href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineBase::SplineInfoArray</a></div><div class="ttdeci">std::vector&lt; FastSplineInfo &gt; SplineInfoArray</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00058">SplineBase.h:58</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a107c337ce7053208795747a3223f04e1"><div class="ttname"><a href="classsplineFDBase.html#a107c337ce7053208795747a3223f04e1">splineFDBase::weightvec_Monolith</a></div><div class="ttdeci">std::vector&lt; M3::float_t &gt; weightvec_Monolith</div><div class="ttdoc">Stores weight from spline evaluation for each single spline.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00130">splineFDBase.h:130</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a7a564f5748f16d97ebf1e1c300a1cc5c"><div class="ttname"><a href="classsplineFDBase.html#a7a564f5748f16d97ebf1e1c300a1cc5c">splineFDBase::uniquecoeffindices</a></div><div class="ttdeci">std::vector&lt; int &gt; uniquecoeffindices</div><div class="ttdoc">Unique coefficient indices.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00113">splineFDBase.h:113</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_ae237cc1c6d97e35bf4f7f64e369a5781"><div class="ttname"><a href="classsplineFDBase.html#ae237cc1c6d97e35bf4f7f64e369a5781">splineFDBase::uniquesplinevec_Monolith</a></div><div class="ttdeci">std::vector&lt; int &gt; uniquesplinevec_Monolith</div><div class="ttdoc">Maps single spline object with single parameter.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00132">splineFDBase.h:132</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_af63885ddb6731f77808d029372e6b187"><div class="ttname"><a href="classsplineFDBase.html#af63885ddb6731f77808d029372e6b187">splineFDBase::coeffindexvec</a></div><div class="ttdeci">std::vector&lt; int &gt; coeffindexvec</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00111">splineFDBase.h:111</a></div></div>
<div class="ttc" id="anamespaceM3_html_a1f95274549f25fc19fe7db343c8a7a68"><div class="ttname"><a href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a></div><div class="ttdeci">double float_t</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00026">Core.h:26</a></div></div>
<div class="ttc" id="anamespaceM3_html_ad501f876b26ca2cef7bb5f434deaffb8"><div class="ttname"><a href="namespaceM3.html#ad501f876b26ca2cef7bb5f434deaffb8">M3::fmaf_t</a></div><div class="ttdeci">constexpr T fmaf_t(T x, T y, T z)</div><div class="ttdoc">Function template for fused multiply-add.</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00033">Core.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e765571776f8affeca355a184fef11a" name="a6e765571776f8affeca355a184fef11a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e765571776f8affeca355a184fef11a">&#9670;&#160;</a></span>cleanUpMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::cleanUpMemory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove setup variables not needed for spline evaluations. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00040">40</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                 {</div>
<div class="line"><span class="lineno">   41</span><span class="comment">//****************************************</span></div>
<div class="line"><span class="lineno">   42</span>  <span class="comment">//Call once everything&#39;s been allocated in samplePDFSKBase, cleans up junk from memory!</span></div>
<div class="line"><span class="lineno">   43</span>  <span class="comment">//Not a huge saving but it&#39;s better than leaving everything up to the compiler</span></div>
<div class="line"><span class="lineno">   44</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Cleaning up spline memory&quot;</span>);</div>
<div class="line"><span class="lineno">   45</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>);</div>
<div class="line"><span class="lineno">   46</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>);</div>
<div class="line"><span class="lineno">   47</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#af036372a158b4e463683a8d02a20ec3d">GlobalSystIndex</a>);</div>
<div class="line"><span class="lineno">   48</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>);</div>
<div class="line"><span class="lineno">   49</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>);</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#aabc74a6dd8b13fc6925e975bf5f92cff">SplineInterpolationTypes</a>);</div>
<div class="line"><span class="lineno">   51</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">nOscChans</a>);</div>
<div class="line"><span class="lineno">   52</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#aad64c7c63db8ea676f86eb2279f04d40">nSplineParams</a>);</div>
<div class="line"><span class="lineno">   53</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#a481d275de711edfddbb82d3924b6e63a">DetIDs</a>);</div>
<div class="line"><span class="lineno">   54</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#a00e1aeea8e9389c41f93469a26c83adc">DimensionLabels</a>);</div>
<div class="line"><span class="lineno">   55</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>);</div>
<div class="line"><span class="lineno">   56</span>  <a class="code hl_function" href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a>(<a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>);</div>
<div class="line"><span class="lineno">   57</span>  <a class="code hl_function" href="Structs_8h.html#ae6c2cd427c808007fa2a96f65663b976">CleanContainer</a>(<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>);</div>
<div class="line"><span class="lineno">   58</span>  <a class="code hl_function" href="Structs_8h.html#ae6c2cd427c808007fa2a96f65663b976">CleanContainer</a>(<a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>);</div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a>) <span class="keyword">delete</span> [] <a class="code hl_variable" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a>;</div>
<div class="line"><span class="lineno">   60</span>}</div>
<div class="ttc" id="aStructs_8h_html_a85aef80dc0fb38ccb4ff2f7b6a49a5ab"><div class="ttname"><a href="Structs_8h.html#a85aef80dc0fb38ccb4ff2f7b6a49a5ab">CleanVector</a></div><div class="ttdeci">void CleanVector(std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Generic cleanup function.</div><div class="ttdef"><b>Definition:</b> <a href="Structs_8h_source.html#l00044">Structs.h:44</a></div></div>
<div class="ttc" id="aStructs_8h_html_ae6c2cd427c808007fa2a96f65663b976"><div class="ttname"><a href="Structs_8h.html#ae6c2cd427c808007fa2a96f65663b976">CleanContainer</a></div><div class="ttdeci">void CleanContainer(std::vector&lt; T * &gt; &amp;container)</div><div class="ttdoc">Generic cleanup function.</div><div class="ttdef"><b>Definition:</b> <a href="Structs_8h_source.html#l00083">Structs.h:83</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a84ec9ea208503053b9735b1cb1bc417d"><div class="ttname"><a href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splineFDBase::splinevec_Monolith</a></div><div class="ttdeci">std::vector&lt; TSpline3_red * &gt; splinevec_Monolith</div><div class="ttdoc">holds each spline object before stripping into coefficient monolith</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00116">splineFDBase.h:116</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_aa8a204355df78af3f79bf8f2815258d3"><div class="ttname"><a href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">splineFDBase::isflatarray</a></div><div class="ttdeci">bool * isflatarray</div><div class="ttdoc">Need to keep track of which splines are flat and which aren't.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00123">splineFDBase.h:123</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_aacf850f4ec22e4f7338f243999ecc7dd"><div class="ttname"><a href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">splineFDBase::UniqueSystNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; UniqueSystNames</div><div class="ttdoc">name of each spline parameter</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00105">splineFDBase.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0bfc616fab953333e6e938de52ce3bed" name="a0bfc616fab953333e6e938de52ce3bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bfc616fab953333e6e938de52ce3bed">&#9670;&#160;</a></span>CountNumberOfLoadedSplines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splineFDBase::CountNumberOfLoadedSplines </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>NonFlat</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Verbosity</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00403">403</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  405</span>{</div>
<div class="line"><span class="lineno">  406</span>  <span class="keywordtype">int</span> SampleCounter_NonFlat = 0;</div>
<div class="line"><span class="lineno">  407</span>  <span class="keywordtype">int</span> SampleCounter_All = 0;</div>
<div class="line"><span class="lineno">  408</span>  <span class="keywordtype">int</span> FullCounter_NonFlat = 0;</div>
<div class="line"><span class="lineno">  409</span>  <span class="keywordtype">int</span> FullCounter_All = 0;</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.size(); iSample++)</div>
<div class="line"><span class="lineno">  412</span>  { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  413</span>    SampleCounter_NonFlat = 0;</div>
<div class="line"><span class="lineno">  414</span>    SampleCounter_All = 0;</div>
<div class="line"><span class="lineno">  415</span>    std::string SampleName = <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>[iSample];</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><span class="lineno">  417</span>    { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><span class="lineno">  418</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan].size(); iSyst++)</div>
<div class="line"><span class="lineno">  419</span>      { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><span class="lineno">  421</span>        { <span class="comment">// Loop over modes</span></div>
<div class="line"><span class="lineno">  422</span>          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><span class="lineno">  423</span>          { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><span class="lineno">  424</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><span class="lineno">  425</span>            { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><span class="lineno">  426</span>              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><span class="lineno">  427</span>              { <span class="comment">// Loop over third dimension</span></div>
<div class="line"><span class="lineno">  428</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="classsplineFDBase.html#a2b026cd74035f56db3790f1eea49de92">isValidSplineIndex</a>(SampleName, iOscChan, iSyst, iMode, iVar1, iVar2, iVar3))</div>
<div class="line"><span class="lineno">  429</span>                {</div>
<div class="line"><span class="lineno">  430</span>                  <span class="keywordtype">int</span> splineindex = <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><span class="lineno">  431</span>                  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex])</div>
<div class="line"><span class="lineno">  432</span>                  {</div>
<div class="line"><span class="lineno">  433</span>                    SampleCounter_NonFlat += 1;</div>
<div class="line"><span class="lineno">  434</span>                  }</div>
<div class="line"><span class="lineno">  435</span>                  SampleCounter_All += 1;</div>
<div class="line"><span class="lineno">  436</span>                }</div>
<div class="line"><span class="lineno">  437</span>              }</div>
<div class="line"><span class="lineno">  438</span>            }</div>
<div class="line"><span class="lineno">  439</span>          }</div>
<div class="line"><span class="lineno">  440</span>        }</div>
<div class="line"><span class="lineno">  441</span>      }</div>
<div class="line"><span class="lineno">  442</span>    }</div>
<div class="line"><span class="lineno">  443</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;{:&lt;10} has {:&lt;10} splines, of which {:&lt;10} are not flat&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>[iSample], SampleCounter_All, SampleCounter_NonFlat);</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>    FullCounter_NonFlat += SampleCounter_NonFlat;</div>
<div class="line"><span class="lineno">  446</span>    FullCounter_All += SampleCounter_All;</div>
<div class="line"><span class="lineno">  447</span>  }</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>  <span class="keywordflow">if</span> (Verbosity &gt; 0)</div>
<div class="line"><span class="lineno">  450</span>  {</div>
<div class="line"><span class="lineno">  451</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Total number of splines loaded: {}&quot;</span>, FullCounter_All);</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Total number of non-flat splines loaded: {}&quot;</span>, FullCounter_NonFlat);</div>
<div class="line"><span class="lineno">  453</span>  }</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>  <span class="keywordflow">if</span> (NonFlat) {</div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">return</span> FullCounter_NonFlat;</div>
<div class="line"><span class="lineno">  457</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">return</span> FullCounter_All;</div>
<div class="line"><span class="lineno">  459</span>  }</div>
<div class="line"><span class="lineno">  460</span>}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a4db4657acad5c79ac4bbb66a9d1c5905"><div class="ttname"><a href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a></div><div class="ttdeci">#define MACH3LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00022">MaCh3Logger.h:22</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a2b026cd74035f56db3790f1eea49de92"><div class="ttname"><a href="classsplineFDBase.html#a2b026cd74035f56db3790f1eea49de92">splineFDBase::isValidSplineIndex</a></div><div class="ttdeci">bool isValidSplineIndex(const std::string &amp;SampleName, int iSyst, int iOscChan, int iMode, int iVar1, int iVar2, int iVar3)</div><div class="ttdoc">Ensure we have spline for a given bin.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00704">splineFDBase.cpp:704</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6e248be25f753c85c4fbf2f3b72cf88" name="af6e248be25f753c85c4fbf2f3b72cf88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e248be25f753c85c4fbf2f3b72cf88">&#9670;&#160;</a></span>Evaluate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::Evaluate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations. </p>

<p>Implements <a class="el" href="classSplineBase.html#a86e629f3eef59b2f3800136c86fe90c3">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00215">215</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>                            {</div>
<div class="line"><span class="lineno">  216</span><span class="comment">// *****************************************</span></div>
<div class="line"><span class="lineno">  217</span>  <span class="comment">// There&#39;s a parameter mapping that goes from spline parameter to a global parameter index</span></div>
<div class="line"><span class="lineno">  218</span>  <span class="comment">// Find the spline segments</span></div>
<div class="line"><span class="lineno">  219</span>  <a class="code hl_function" href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">FindSplineSegment</a>();</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>  <span class="comment">//KS: Huge MP loop over all valid splines</span></div>
<div class="line"><span class="lineno">  222</span>  <a class="code hl_function" href="classsplineFDBase.html#a9eceab58c0aa06b58eb4e3708c00ee0e">CalcSplineWeights</a>();</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>  <span class="comment">//KS: Huge MP loop over all events calculating total weight</span></div>
<div class="line"><span class="lineno">  225</span>  <a class="code hl_function" href="classsplineFDBase.html#a1a237a8b8c3c165c82ebe15d2ca740c7">ModifyWeights</a>();</div>
<div class="line"><span class="lineno">  226</span>}</div>
<div class="ttc" id="aclassSplineBase_html_a589011b547ff70262ed43021a016ef30"><div class="ttname"><a href="classSplineBase.html#a589011b547ff70262ed43021a016ef30">SplineBase::FindSplineSegment</a></div><div class="ttdeci">void FindSplineSegment()</div><div class="ttdoc">CW:Code used in step by step reweighting, Find Spline Segment for each param.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00024">SplineBase.cpp:24</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a1a237a8b8c3c165c82ebe15d2ca740c7"><div class="ttname"><a href="classsplineFDBase.html#a1a237a8b8c3c165c82ebe15d2ca740c7">splineFDBase::ModifyWeights</a></div><div class="ttdeci">void ModifyWeights() override</div><div class="ttdoc">Calc total event weight, not used by Bin-by-bin splines.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00078">splineFDBase.h:78</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a9eceab58c0aa06b58eb4e3708c00ee0e"><div class="ttname"><a href="classsplineFDBase.html#a9eceab58c0aa06b58eb4e3708c00ee0e">splineFDBase::CalcSplineWeights</a></div><div class="ttdeci">void CalcSplineWeights() override</div><div class="ttdoc">CPU based code which eval weight for each spline.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00229">splineFDBase.cpp:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52849ba867bea0744c16d03e0e7913ed" name="a52849ba867bea0744c16d03e0e7913ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52849ba867bea0744c16d03e0e7913ed">&#9670;&#160;</a></span>FillSampleArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::FillSampleArray </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>SampleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>OscChanFileNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00846">846</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  847</span>{</div>
<div class="line"><span class="lineno">  848</span>  <span class="keywordtype">int</span> iSample = <a class="code hl_function" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a>(SampleName);</div>
<div class="line"><span class="lineno">  849</span>  <span class="keywordtype">int</span> nOscChannels = <a class="code hl_variable" href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">nOscChans</a>[iSample];</div>
<div class="line"><span class="lineno">  850</span>  </div>
<div class="line"><span class="lineno">  851</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChannels; iOscChan++) {</div>
<div class="line"><span class="lineno">  852</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Processing: {}&quot;</span>, OscChanFileNames[iOscChan]);</div>
<div class="line"><span class="lineno">  853</span>    TSpline3* mySpline = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  854</span>    <a class="code hl_class" href="classTSpline3__red.html">TSpline3_red</a>* Spline = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  855</span>    TString Syst, Mode;</div>
<div class="line"><span class="lineno">  856</span>    <span class="keywordtype">int</span> nKnots, SystNum, ModeNum, Var1Bin, Var2Bin, Var3Bin = <a class="code hl_variable" href="namespaceM3.html#aed6ca6561a78ba6c90a98ddfa22353aa">M3::_BAD_INT_</a>;</div>
<div class="line"><span class="lineno">  857</span>    <span class="keywordtype">double</span> x,y, Eval = <a class="code hl_variable" href="namespaceM3.html#a32ef26a222f7341e03dcc42cdd2badd3">M3::_BAD_DOUBLE_</a>;</div>
<div class="line"><span class="lineno">  858</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#ae7c3a438d4508eba7ac26e26135b2c17">isFlat</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  859</span> </div>
<div class="line"><span class="lineno">  860</span>    std::set&lt;std::string&gt; SplineFileNames;</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>    <span class="keyword">auto</span> File = std::unique_ptr&lt;TFile&gt;(TFile::Open(OscChanFileNames[iOscChan].c_str()));</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>    <span class="keywordflow">if</span> (!File || File-&gt;IsZombie()) {</div>
<div class="line"><span class="lineno">  865</span>      <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;File {} not found&quot;</span>, OscChanFileNames[iOscChan]);</div>
<div class="line"><span class="lineno">  866</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  867</span>    }</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>    <span class="comment">//This is the MC specific part of the code</span></div>
<div class="line"><span class="lineno">  870</span>    <span class="comment">//i.e. we always assume that the splines are just store in  single TDirectory and they&#39;re all in there as single objects   </span></div>
<div class="line"><span class="lineno">  871</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> k : *File-&gt;GetListOfKeys()) {</div>
<div class="line"><span class="lineno">  872</span>      <span class="keyword">auto</span> Key = <span class="keyword">static_cast&lt;</span>TKey*<span class="keyword">&gt;</span>(k);</div>
<div class="line"><span class="lineno">  873</span>      TClass *Class = gROOT-&gt;GetClass(Key-&gt;GetClassName(), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  874</span>      <span class="keywordflow">if</span>(!Class-&gt;InheritsFrom(<span class="stringliteral">&quot;TSpline3&quot;</span>)) {</div>
<div class="line"><span class="lineno">  875</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  876</span>      }</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>      std::string FullSplineName = std::string(Key-&gt;GetName());</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>      <span class="keywordflow">if</span> (SplineFileNames.count(FullSplineName) &gt; 0) {</div>
<div class="line"><span class="lineno">  881</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a07ff6d6a15b24f94afc88a1b89779beb">MACH3LOG_CRITICAL</a>(<span class="stringliteral">&quot;Skipping spline - Found a spline whose name has already been encountered before: {}&quot;</span>, FullSplineName); </div>
<div class="line"><span class="lineno">  882</span>    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  883</span>      }</div>
<div class="line"><span class="lineno">  884</span>      SplineFileNames.insert(FullSplineName);</div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>      std::vector&lt;std::string&gt; Tokens = <a class="code hl_function" href="classsplineFDBase.html#a6dc7b34c177e7b9a237e1298937f3caa">GetTokensFromSplineName</a>(FullSplineName);</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>      <span class="keywordflow">if</span> (Tokens.size() != <a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d">kNTokens</a>) {</div>
<div class="line"><span class="lineno">  889</span>        <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Invalid tokens from spline name - Expected {} tokens. Check implementation in GetTokensFromSplineName()&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a6e5418783dafc67b345ca47d3a367e3d">kNTokens</a>));</div>
<div class="line"><span class="lineno">  890</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  891</span>      }</div>
<div class="line"><span class="lineno">  892</span>      </div>
<div class="line"><span class="lineno">  893</span>      Syst = Tokens[<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a402d2fd0caedee7d15602b8a489d12d6">kSystToken</a>];</div>
<div class="line"><span class="lineno">  894</span>      Mode = Tokens[<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a2ee747878b23052ad23ebddb062d66c1">kModeToken</a>];</div>
<div class="line"><span class="lineno">  895</span>      Var1Bin = std::stoi(Tokens[<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014acff28c601e5d4612b305397eaa304970">kVar1BinToken</a>]);</div>
<div class="line"><span class="lineno">  896</span>      Var2Bin = std::stoi(Tokens[<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014aeda1921f7e60c568a9c3430c8f5d8ad7">kVar2BinToken</a>]);</div>
<div class="line"><span class="lineno">  897</span>      Var3Bin = std::stoi(Tokens[<a class="code hl_enumvalue" href="classsplineFDBase.html#a60a2b2556b988c362c65f7f483acf014a4cae00a806b8ba6ec9d2e4299975dccd">kVar3BinToken</a>]);</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>      SystNum = -1;</div>
<div class="line"><span class="lineno">  900</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iSyst = 0; iSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>[iSample].size(); iSyst++) {</div>
<div class="line"><span class="lineno">  901</span>        <span class="keywordflow">if</span> (Syst == <a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>[iSample][iSyst]) {</div>
<div class="line"><span class="lineno">  902</span>          SystNum = iSyst;</div>
<div class="line"><span class="lineno">  903</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  904</span>        }</div>
<div class="line"><span class="lineno">  905</span>      }</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>      <span class="comment">// If the syst doesn&#39;t match any of the spline names then skip it</span></div>
<div class="line"><span class="lineno">  908</span>      <span class="keywordflow">if</span> (SystNum == -1){</div>
<div class="line"><span class="lineno">  909</span>        <a class="code hl_define" href="MaCh3Logger_8h.html#ad5b2eb6377721e3ac95def22c2386bb1">MACH3LOG_WARN</a>(<span class="stringliteral">&quot;Couldn&#39;t match!!&quot;</span>);</div>
<div class="line"><span class="lineno">  910</span>        <a class="code hl_define" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Couldn&#39;t Match any systematic name in xsec yaml with spline name: {}&quot;</span> , FullSplineName);</div>
<div class="line"><span class="lineno">  911</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  912</span>      }</div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>      ModeNum = -1;</div>
<div class="line"><span class="lineno">  915</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>[iSample][SystNum].size(); iMode++) {</div>
<div class="line"><span class="lineno">  916</span>        <span class="keywordflow">if</span> (Mode == <a class="code hl_variable" href="classsplineFDBase.html#ad004862f499b783034dd6a30df25c9f4">Modes</a>-&gt;<a class="code hl_function" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(<a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>[iSample][SystNum][iMode])) {</div>
<div class="line"><span class="lineno">  917</span>          ModeNum = iMode;</div>
<div class="line"><span class="lineno">  918</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  919</span>        }</div>
<div class="line"><span class="lineno">  920</span>      }</div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>      <span class="keywordflow">if</span> (ModeNum == -1) {</div>
<div class="line"><span class="lineno">  923</span>    <span class="comment">//DB - If you have splines in the root file that you don&#39;t want to use (e.g. removing a mode from a syst), this will cause a throw</span></div>
<div class="line"><span class="lineno">  924</span>    <span class="comment">//     Therefore include as debug warning and continue instead</span></div>
<div class="line"><span class="lineno">  925</span>        <a class="code hl_define" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Couldn&#39;t find mode for {} in {}. Problem Spline is : {} &quot;</span>, Mode, Syst, FullSplineName);</div>
<div class="line"><span class="lineno">  926</span>    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  927</span>      }</div>
<div class="line"><span class="lineno">  928</span> </div>
<div class="line"><span class="lineno">  929</span>      mySpline = Key-&gt;ReadObject&lt;TSpline3&gt;();</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classsplineFDBase.html#a2b026cd74035f56db3790f1eea49de92">isValidSplineIndex</a>(SampleName, iOscChan, SystNum, ModeNum, Var1Bin, Var2Bin, Var3Bin)) { <span class="comment">// loop over all the spline knots and check their value</span></div>
<div class="line"><span class="lineno">  932</span>        <a class="code hl_define" href="MaCh3Logger_8h.html#a4db4657acad5c79ac4bbb66a9d1c5905">MACH3LOG_DEBUG</a>(<span class="stringliteral">&quot;Pushed back monolith for spline {}&quot;</span>, FullSplineName);</div>
<div class="line"><span class="lineno">  933</span>        <span class="comment">// if the value is 1 then set the flat bool to false</span></div>
<div class="line"><span class="lineno">  934</span>        nKnots = mySpline-&gt;GetNp();</div>
<div class="line"><span class="lineno">  935</span>        <a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#ae7c3a438d4508eba7ac26e26135b2c17">isFlat</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  936</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iKnot = 0; iKnot &lt; nKnots; iKnot++) {</div>
<div class="line"><span class="lineno">  937</span>          mySpline-&gt;GetKnot(iKnot, x, y);</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>          Eval = mySpline-&gt;Eval(x);</div>
<div class="line"><span class="lineno">  940</span>          <span class="keywordflow">if</span> (Eval &lt; 0.99999 || Eval &gt; 1.00001)</div>
<div class="line"><span class="lineno">  941</span>          {</div>
<div class="line"><span class="lineno">  942</span>            <a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#ae7c3a438d4508eba7ac26e26135b2c17">isFlat</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  943</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  944</span>          }</div>
<div class="line"><span class="lineno">  945</span>        }</div>
<div class="line"><span class="lineno">  946</span> </div>
<div class="line"><span class="lineno">  947</span>        <span class="comment">//Rather than keeping a mega vector of splines then converting, this should just keep everything nice in memory!</span></div>
<div class="line"><span class="lineno">  948</span>        <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][SystNum][ModeNum][Var1Bin][Var2Bin][Var3Bin]=<a class="code hl_variable" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a>;</div>
<div class="line"><span class="lineno">  949</span>        <a class="code hl_variable" href="classsplineFDBase.html#af63885ddb6731f77808d029372e6b187">coeffindexvec</a>.push_back(<a class="code hl_variable" href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">CoeffIndex</a>);</div>
<div class="line"><span class="lineno">  950</span>        <span class="comment">// Should save memory rather saving [x_i_0 ,... x_i_maxknots] for every spline!</span></div>
<div class="line"><span class="lineno">  951</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#ae7c3a438d4508eba7ac26e26135b2c17">isFlat</a>) {</div>
<div class="line"><span class="lineno">  952</span>          <a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>.push_back(<span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  953</span>          <span class="keyword">delete</span> mySpline;</div>
<div class="line"><span class="lineno">  954</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  955</span>          Spline = <span class="keyword">new</span> <a class="code hl_class" href="classTSpline3__red.html">TSpline3_red</a>(mySpline, <a class="code hl_variable" href="classsplineFDBase.html#aabc74a6dd8b13fc6925e975bf5f92cff">SplineInterpolationTypes</a>[iSample][SystNum]);</div>
<div class="line"><span class="lineno">  956</span>          <span class="keyword">delete</span> mySpline;</div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>          <a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>.push_back(Spline);</div>
<div class="line"><span class="lineno">  959</span>          <a class="code hl_variable" href="classsplineFDBase.html#a7a564f5748f16d97ebf1e1c300a1cc5c">uniquecoeffindices</a>.push_back(<a class="code hl_variable" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a>); <span class="comment">//So we can get the unique coefficients and skip flat splines later on!</span></div>
<div class="line"><span class="lineno">  960</span>          <a class="code hl_variable" href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">CoeffIndex</a>+=nKnots;</div>
<div class="line"><span class="lineno">  961</span>        }</div>
<div class="line"><span class="lineno">  962</span>        <span class="comment">//Incrementing MonolithIndex to keep track of number of valid spline indices</span></div>
<div class="line"><span class="lineno">  963</span>        <a class="code hl_variable" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a>+=1;</div>
<div class="line"><span class="lineno">  964</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  965</span>        <span class="comment">//Potentially you are not a valid spline index</span></div>
<div class="line"><span class="lineno">  966</span>        <span class="keyword">delete</span> mySpline;</div>
<div class="line"><span class="lineno">  967</span>      }</div>
<div class="line"><span class="lineno">  968</span>    }<span class="comment">//End of loop over all TKeys in file</span></div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>    <span class="comment">//A bit of clean up</span></div>
<div class="line"><span class="lineno">  971</span>    File-&gt;Delete(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><span class="lineno">  972</span>    File-&gt;Close();</div>
<div class="line"><span class="lineno">  973</span>  } <span class="comment">//End of oscillation channel loop</span></div>
<div class="line"><span class="lineno">  974</span>}</div>
<div class="ttc" id="aGetPenaltyTerm_8cpp_html_ae7c3a438d4508eba7ac26e26135b2c17"><div class="ttname"><a href="GetPenaltyTerm_8cpp.html#ae7c3a438d4508eba7ac26e26135b2c17">isFlat</a></div><div class="ttdeci">std::vector&lt; bool &gt; isFlat</div><div class="ttdef"><b>Definition:</b> <a href="GetPenaltyTerm_8cpp_source.html#l00034">GetPenaltyTerm.cpp:34</a></div></div>
<div class="ttc" id="aMaCh3Logger_8h_html_a07ff6d6a15b24f94afc88a1b89779beb"><div class="ttname"><a href="MaCh3Logger_8h.html#a07ff6d6a15b24f94afc88a1b89779beb">MACH3LOG_CRITICAL</a></div><div class="ttdeci">#define MACH3LOG_CRITICAL</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00026">MaCh3Logger.h:26</a></div></div>
<div class="ttc" id="aMaCh3Logger_8h_html_ad5b2eb6377721e3ac95def22c2386bb1"><div class="ttname"><a href="MaCh3Logger_8h.html#ad5b2eb6377721e3ac95def22c2386bb1">MACH3LOG_WARN</a></div><div class="ttdeci">#define MACH3LOG_WARN</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00024">MaCh3Logger.h:24</a></div></div>
<div class="ttc" id="aclassMaCh3Modes_html_a94d555d153fd328abd3c4411a285b3d3"><div class="ttname"><a href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">MaCh3Modes::GetSplineSuffixFromMaCh3Mode</a></div><div class="ttdeci">std::string GetSplineSuffixFromMaCh3Mode(const int Index)</div><div class="ttdoc">DB: Get binned spline mode suffic from MaCh3 Mode.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Modes_8cpp_source.html#l00229">MaCh3Modes.cpp:229</a></div></div>
<div class="ttc" id="aclassTSpline3__red_html"><div class="ttname"><a href="classTSpline3__red.html">TSpline3_red</a></div><div class="ttdoc">CW: Reduced TSpline3 class.</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00234">SplineStructs.h:234</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a6dc7b34c177e7b9a237e1298937f3caa"><div class="ttname"><a href="classsplineFDBase.html#a6dc7b34c177e7b9a237e1298937f3caa">splineFDBase::GetTokensFromSplineName</a></div><div class="ttdeci">virtual std::vector&lt; std::string &gt; GetTokensFromSplineName(std::string FullSplineName)=0</div></div>
<div class="ttc" id="anamespaceM3_html_a32ef26a222f7341e03dcc42cdd2badd3"><div class="ttname"><a href="namespaceM3.html#a32ef26a222f7341e03dcc42cdd2badd3">M3::_BAD_DOUBLE_</a></div><div class="ttdeci">static constexpr const double _BAD_DOUBLE_</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00040">Core.h:40</a></div></div>
<div class="ttc" id="anamespaceM3_html_aed6ca6561a78ba6c90a98ddfa22353aa"><div class="ttname"><a href="namespaceM3.html#aed6ca6561a78ba6c90a98ddfa22353aa">M3::_BAD_INT_</a></div><div class="ttdeci">static constexpr const int _BAD_INT_</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00041">Core.h:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00c0e93b4c4799ffacaa58578e5dcf6b" name="a00c0e93b4c4799ffacaa58578e5dcf6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00c0e93b4c4799ffacaa58578e5dcf6b">&#9670;&#160;</a></span>FindSplineBinning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; TAxis * &gt; splineFDBase::FindSplineBinning </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>FileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>SampleName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Grab histograms with spline binning. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00302">302</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  304</span>{</div>
<div class="line"><span class="lineno">  305</span>  std::vector&lt;TAxis *&gt; ReturnVec;</div>
<div class="line"><span class="lineno">  306</span>  <span class="keywordtype">int</span> iSample=<a class="code hl_function" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a>(SampleName);</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>  <span class="comment">//Try declaring these outside of TFile so they aren&#39;t owned by File</span></div>
<div class="line"><span class="lineno">  309</span>  <span class="keywordtype">int</span> nDummyBins = 1;</div>
<div class="line"><span class="lineno">  310</span>  <span class="keyword">const</span> <span class="keywordtype">double</span> DummyEdges[2] = {-1e15, 1e15};</div>
<div class="line"><span class="lineno">  311</span>  TAxis* DummyAxis = <span class="keyword">new</span> TAxis(nDummyBins, DummyEdges);</div>
<div class="line"><span class="lineno">  312</span>  TH2F* Hist2D = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  313</span>  TH3F* Hist3D = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>  <span class="keyword">auto</span> File = std::unique_ptr&lt;TFile&gt;(TFile::Open(FileName.c_str(), <span class="stringliteral">&quot;READ&quot;</span>));</div>
<div class="line"><span class="lineno">  316</span>  <span class="keywordflow">if</span> (!File || File-&gt;IsZombie())</div>
<div class="line"><span class="lineno">  317</span>  {</div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;File {} not found&quot;</span>, FileName);</div>
<div class="line"><span class="lineno">  319</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;This is caused by something here! {} : {}&quot;</span>, __FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  321</span>  }</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Finding binning for:&quot;</span>);</div>
<div class="line"><span class="lineno">  324</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{}&quot;</span>, FileName);</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>  std::string TemplateName = <span class="stringliteral">&quot;dev_tmp_0_0&quot;</span>;</div>
<div class="line"><span class="lineno">  327</span>  TObject *Obj = File-&gt;Get(TemplateName.c_str());</div>
<div class="line"><span class="lineno">  328</span>  <span class="comment">//If you can&#39;t find dev_tmp_0_0 then this will cause a problem</span></div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">if</span> (!Obj)</div>
<div class="line"><span class="lineno">  330</span>  {</div>
<div class="line"><span class="lineno">  331</span>    TemplateName = <span class="stringliteral">&quot;dev_tmp.0.0&quot;</span>;</div>
<div class="line"><span class="lineno">  332</span>    Obj = File-&gt;Get(TemplateName.c_str());</div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">if</span> (!Obj)</div>
<div class="line"><span class="lineno">  334</span>    {</div>
<div class="line"><span class="lineno">  335</span>      <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Error: could not find dev_tmp_0_0 in spline file. Spline binning cannot be set!&quot;</span>);</div>
<div class="line"><span class="lineno">  336</span>      <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;FileName: {}&quot;</span>, FileName);</div>
<div class="line"><span class="lineno">  337</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  338</span>    }</div>
<div class="line"><span class="lineno">  339</span>  }</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>  <span class="comment">//Now check if dev_tmp_0_0 is a TH2 i.e. specifying the dimensions of the splines is 2D</span></div>
<div class="line"><span class="lineno">  342</span>  <span class="keywordtype">bool</span> isHist2D = Obj-&gt;IsA() == TH2F::Class();</div>
<div class="line"><span class="lineno">  343</span>  <span class="comment">//For T2K annoyingly all objects are TH3Fs</span></div>
<div class="line"><span class="lineno">  344</span>  <span class="keywordtype">bool</span> isHist3D = Obj-&gt;IsA() == TH3F::Class();</div>
<div class="line"><span class="lineno">  345</span>  <span class="keywordflow">if</span> (!isHist2D &amp;&amp; !isHist3D)</div>
<div class="line"><span class="lineno">  346</span>  {</div>
<div class="line"><span class="lineno">  347</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Object doesn&#39;t inherit from either TH2D and TH3D - Odd A&quot;</span>);</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  349</span>  }</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>  <span class="keywordflow">if</span> (isHist2D)</div>
<div class="line"><span class="lineno">  352</span>  {</div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample] != 2)</div>
<div class="line"><span class="lineno">  354</span>    {</div>
<div class="line"><span class="lineno">  355</span>      <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to load a 2D spline template when nDim={}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample]);</div>
<div class="line"><span class="lineno">  356</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  357</span>    }</div>
<div class="line"><span class="lineno">  358</span>    Hist2D = File-&gt;Get&lt;TH2F&gt;(TemplateName.c_str());</div>
<div class="line"><span class="lineno">  359</span>  }</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>  <span class="keywordflow">if</span> (isHist3D)</div>
<div class="line"><span class="lineno">  362</span>  {</div>
<div class="line"><span class="lineno">  363</span>    Hist3D = File-&gt;Get&lt;TH3F&gt;((TemplateName.c_str()));</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample] != 3 &amp;&amp; Hist3D-&gt;GetZaxis()-&gt;GetNbins() != 1)</div>
<div class="line"><span class="lineno">  366</span>    {</div>
<div class="line"><span class="lineno">  367</span>      <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Trying to load a 3D spline template when nDim={}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample]);</div>
<div class="line"><span class="lineno">  368</span>      <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  369</span>    }</div>
<div class="line"><span class="lineno">  370</span>    Hist3D = File-&gt;Get&lt;TH3F&gt;(TemplateName.c_str());</div>
<div class="line"><span class="lineno">  371</span>  }</div>
<div class="line"><span class="lineno">  372</span> </div>
<div class="line"><span class="lineno">  373</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample] == 2) {</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">if</span>(isHist2D){</div>
<div class="line"><span class="lineno">  375</span>      ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist2D-&gt;GetXaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  376</span>      ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist2D-&gt;GetYaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  377</span>      ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(DummyAxis-&gt;Clone()));</div>
<div class="line"><span class="lineno">  378</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isHist3D) {</div>
<div class="line"><span class="lineno">  379</span>      ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetXaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  380</span>      ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetYaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  381</span>      ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(DummyAxis-&gt;Clone()));</div>
<div class="line"><span class="lineno">  382</span>    }</div>
<div class="line"><span class="lineno">  383</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample] == 3) {</div>
<div class="line"><span class="lineno">  384</span>    ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetXaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  385</span>    ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetYaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  386</span>    ReturnVec.push_back(<span class="keyword">static_cast&lt;</span>TAxis*<span class="keyword">&gt;</span>(Hist3D-&gt;GetZaxis()-&gt;Clone()));</div>
<div class="line"><span class="lineno">  387</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  388</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Number of dimensions not valid! Given: {}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample]);</div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  390</span>  }</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iAxis = 0; iAxis &lt; ReturnVec.size(); ++iAxis) {</div>
<div class="line"><span class="lineno">  393</span>    <a class="code hl_function" href="classsplineFDBase.html#a79f1c5d72afb21c06cfff5710fa21083">PrintBinning</a>(ReturnVec[iAxis]);</div>
<div class="line"><span class="lineno">  394</span>  }</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Left PrintBinning now tidying up&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span>  <span class="keyword">delete</span> DummyAxis;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><span class="lineno">  400</span>}</div>
<div class="ttc" id="aclasssplineFDBase_html_a79f1c5d72afb21c06cfff5710fa21083"><div class="ttname"><a href="classsplineFDBase.html#a79f1c5d72afb21c06cfff5710fa21083">splineFDBase::PrintBinning</a></div><div class="ttdeci">void PrintBinning(TAxis *Axis) const</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00743">splineFDBase.cpp:743</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad94be410cfdd1e77b50716376f8b5659" name="ad94be410cfdd1e77b50716376f8b5659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad94be410cfdd1e77b50716376f8b5659">&#9670;&#160;</a></span>getDimLabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string splineFDBase::getDimLabel </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>BinningOpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>Axis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00640">640</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  642</span>{</div>
<div class="line"><span class="lineno">  643</span>  <span class="keywordflow">if</span>(Axis &gt; <a class="code hl_variable" href="classsplineFDBase.html#a00e1aeea8e9389c41f93469a26c83adc">DimensionLabels</a>[iSample].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>()){</div>
<div class="line"><span class="lineno">  644</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;The spline Axis you are trying to get the label of is larger than the number of dimensions&quot;</span>);</div>
<div class="line"><span class="lineno">  645</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;You are trying to get axis {} but have only got {}&quot;</span>, Axis, <a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample]);</div>
<div class="line"><span class="lineno">  646</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  647</span>  }</div>
<div class="line"><span class="lineno">  648</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classsplineFDBase.html#a00e1aeea8e9389c41f93469a26c83adc">DimensionLabels</a>.at(iSample).at(Axis);</div>
<div class="line"><span class="lineno">  649</span>}</div>
<div class="ttc" id="aGetPenaltyTerm_8cpp_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="GetPenaltyTerm_8cpp_source.html#l00037">GetPenaltyTerm.cpp:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adbfd0004315a7f2c14d3172485a8c469" name="adbfd0004315a7f2c14d3172485a8c469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbfd0004315a7f2c14d3172485a8c469">&#9670;&#160;</a></span>GetEventSplines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; splineFDBase::GetEventSplines </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>SampleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iOscChan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>EventMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Var1Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Var2Val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Var3Val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the splines which affect a given event. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00755">755</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  757</span>{</div>
<div class="line"><span class="lineno">  758</span>  std::vector&lt;std::vector&lt;int&gt;&gt; ReturnVec;</div>
<div class="line"><span class="lineno">  759</span>  <span class="keywordtype">int</span> SampleIndex = -1;</div>
<div class="line"><span class="lineno">  760</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>.size(); iSample++) {</div>
<div class="line"><span class="lineno">  761</span>    <span class="keywordflow">if</span> (SampleName == <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>[iSample]) {</div>
<div class="line"><span class="lineno">  762</span>      SampleIndex = iSample;</div>
<div class="line"><span class="lineno">  763</span>    }</div>
<div class="line"><span class="lineno">  764</span>  }</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>  <span class="keywordflow">if</span> (SampleIndex == -1) {</div>
<div class="line"><span class="lineno">  767</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Sample not found: {}&quot;</span>, SampleName);</div>
<div class="line"><span class="lineno">  768</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  769</span>  }</div>
<div class="line"><span class="lineno">  770</span>  </div>
<div class="line"><span class="lineno">  771</span>  <span class="keywordtype">int</span> nSplineSysts = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[SampleIndex][iOscChan].size());</div>
<div class="line"><span class="lineno">  772</span>  <span class="comment">//ETA- this is already a MaCh3 mode</span></div>
<div class="line"><span class="lineno">  773</span>  <span class="keywordtype">int</span> Mode = EventMode;</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>  <span class="keywordtype">int</span> Var1Bin = <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[SampleIndex][iOscChan][0]-&gt;FindBin(Var1Val)-1;</div>
<div class="line"><span class="lineno">  776</span>  <span class="keywordflow">if</span> (Var1Bin &lt; 0 || Var1Bin &gt;= <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[SampleIndex][iOscChan][0]-&gt;GetNbins()) {</div>
<div class="line"><span class="lineno">  777</span>    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><span class="lineno">  778</span>  }</div>
<div class="line"><span class="lineno">  779</span> </div>
<div class="line"><span class="lineno">  780</span>  <span class="keywordtype">int</span> Var2Bin = <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[SampleIndex][iOscChan][1]-&gt;FindBin(Var2Val)-1;</div>
<div class="line"><span class="lineno">  781</span>  <span class="keywordflow">if</span> (Var2Bin &lt; 0 || Var2Bin &gt;= <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[SampleIndex][iOscChan][1]-&gt;GetNbins()) {</div>
<div class="line"><span class="lineno">  782</span>    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><span class="lineno">  783</span>  }</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>  <span class="keywordtype">int</span> Var3Bin = <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[SampleIndex][iOscChan][2]-&gt;FindBin(Var3Val)-1;</div>
<div class="line"><span class="lineno">  786</span>  <span class="keywordflow">if</span> (Var3Bin &lt; 0 || Var3Bin &gt;= <a class="code hl_variable" href="classsplineFDBase.html#af71b65713518f42e59c543dbad5dab70">SplineBinning</a>[SampleIndex][iOscChan][2]-&gt;GetNbins()){</div>
<div class="line"><span class="lineno">  787</span>    <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><span class="lineno">  788</span>  }</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iSyst=0; iSyst&lt;nSplineSysts; iSyst++){</div>
<div class="line"><span class="lineno">  791</span>    std::vector&lt;int&gt; spline_modes = <a class="code hl_variable" href="classsplineFDBase.html#a6b7aeec6d03dad01975582226b39632b">SplineModeVecs</a>[SampleIndex][iSyst];</div>
<div class="line"><span class="lineno">  792</span>    <span class="keywordtype">int</span> nSampleModes = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(spline_modes.size());</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>    <span class="comment">//ETA - look here at the length of spline_modes and what you&#39;re actually comparing against</span></div>
<div class="line"><span class="lineno">  795</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iMode = 0; iMode&lt;nSampleModes ; iMode++){</div>
<div class="line"><span class="lineno">  796</span>      <span class="comment">//Only consider if the event mode (Mode) matches ones of the spline modes</span></div>
<div class="line"><span class="lineno">  797</span>      <span class="keywordflow">if</span> (Mode == spline_modes[iMode]) {</div>
<div class="line"><span class="lineno">  798</span>        <span class="keywordtype">int</span> splineID=<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[SampleIndex][iOscChan][iSyst][iMode][Var1Bin][Var2Bin][Var3Bin];</div>
<div class="line"><span class="lineno">  799</span>        <span class="comment">//Also check that the spline isn&#39;t flat</span></div>
<div class="line"><span class="lineno">  800</span>        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a>[splineID]){</div>
<div class="line"><span class="lineno">  801</span>          ReturnVec.push_back({SampleIndex, iOscChan, iSyst, iMode, Var1Bin, Var2Bin, Var3Bin});</div>
<div class="line"><span class="lineno">  802</span>        }</div>
<div class="line"><span class="lineno">  803</span>      }</div>
<div class="line"><span class="lineno">  804</span>    }</div>
<div class="line"><span class="lineno">  805</span>  }</div>
<div class="line"><span class="lineno">  806</span>  </div>
<div class="line"><span class="lineno">  807</span>  <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><span class="lineno">  808</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac12452f74e832c5899cb6d130dfa28e2" name="ac12452f74e832c5899cb6d130dfa28e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac12452f74e832c5899cb6d130dfa28e2">&#9670;&#160;</a></span>getSampleIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splineFDBase::getSampleIndex </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get index of sample based on name. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00653">653</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  653</span>                                                                 {</div>
<div class="line"><span class="lineno">  654</span><span class="comment">//****************************************</span></div>
<div class="line"><span class="lineno">  655</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iSample = 0; iSample &lt; <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>.size(); ++iSample) {</div>
<div class="line"><span class="lineno">  656</span>    <span class="keywordflow">if</span> (SampleName == <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>[iSample]) {</div>
<div class="line"><span class="lineno">  657</span>      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(iSample);</div>
<div class="line"><span class="lineno">  658</span>    }</div>
<div class="line"><span class="lineno">  659</span>  }</div>
<div class="line"><span class="lineno">  660</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Sample name not found: {}&quot;</span>, SampleName);</div>
<div class="line"><span class="lineno">  661</span>  <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  662</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b7b34479c3240a9827d6a0b5b7da4b4" name="a8b7b34479c3240a9827d6a0b5b7da4b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b7b34479c3240a9827d6a0b5b7da4b4">&#9670;&#160;</a></span>getSplineCoeff_SepMany()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::getSplineCoeff_SepMany </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>splineindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>xArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>manyArray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00604">604</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  604</span>                                                                                                   {</div>
<div class="line"><span class="lineno">  605</span><span class="comment">//****************************************</span></div>
<div class="line"><span class="lineno">  606</span>  <span class="comment">//No point evaluating a flat spline</span></div>
<div class="line"><span class="lineno">  607</span>  <span class="keywordtype">int</span> nPoints = <a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex]-&gt;GetNp();</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nPoints; i++) {</div>
<div class="line"><span class="lineno">  610</span>    xArray[i] = 1.0;</div>
<div class="line"><span class="lineno">  611</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) {</div>
<div class="line"><span class="lineno">  612</span>      manyArray[i*4+j] = 1.0;</div>
<div class="line"><span class="lineno">  613</span>    }</div>
<div class="line"><span class="lineno">  614</span>  }</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nPoints; i++) {</div>
<div class="line"><span class="lineno">  617</span>    <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> x = <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><span class="lineno">  618</span>    <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> y = <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><span class="lineno">  619</span>    <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> b = <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><span class="lineno">  620</span>    <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> c = <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><span class="lineno">  621</span>    <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> d = <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(-999.99);</div>
<div class="line"><span class="lineno">  622</span>    <a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex]-&gt;GetCoeff(i, x, y, b, c, d);</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span>    <span class="comment">// Store the coefficients for each knot contiguously in memory</span></div>
<div class="line"><span class="lineno">  625</span>    <span class="comment">// 4 because manyArray stores y,b,c,d</span></div>
<div class="line"><span class="lineno">  626</span>    xArray[i] = x;</div>
<div class="line"><span class="lineno">  627</span>    manyArray[i*4] = y; </div>
<div class="line"><span class="lineno">  628</span>    manyArray[i*4+1] = b;</div>
<div class="line"><span class="lineno">  629</span>    manyArray[i*4+2] = c;</div>
<div class="line"><span class="lineno">  630</span>    manyArray[i*4+3] = d;    </div>
<div class="line"><span class="lineno">  631</span>  }</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>  <span class="comment">//We now clean up the splines!</span></div>
<div class="line"><span class="lineno">  634</span>  <span class="keyword">delete</span> <a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex];</div>
<div class="line"><span class="lineno">  635</span>  <a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex] = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  636</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6dc7b34c177e7b9a237e1298937f3caa" name="a6dc7b34c177e7b9a237e1298937f3caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc7b34c177e7b9a237e1298937f3caa">&#9670;&#160;</a></span>GetTokensFromSplineName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::vector&lt; std::string &gt; splineFDBase::GetTokensFromSplineName </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>FullSplineName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2b026cd74035f56db3790f1eea49de92" name="a2b026cd74035f56db3790f1eea49de92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b026cd74035f56db3790f1eea49de92">&#9670;&#160;</a></span>isValidSplineIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool splineFDBase::isValidSplineIndex </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iSyst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iOscChan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iVar1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iVar2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iVar3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensure we have spline for a given bin. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00704">704</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  706</span>{</div>
<div class="line"><span class="lineno">  707</span>  <span class="keywordtype">int</span> iSample = <a class="code hl_function" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a>(SampleName);</div>
<div class="line"><span class="lineno">  708</span>  <span class="keywordtype">bool</span> isValid = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>  <span class="comment">// Lambda to check if an index is valid for a specific dimension</span></div>
<div class="line"><span class="lineno">  711</span>  <span class="keyword">auto</span> checkIndex = [&amp;isValid](<span class="keywordtype">int</span> index, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <span class="keyword">const</span> std::string&amp; name) {</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= <span class="keywordtype">int</span>(<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)) {</div>
<div class="line"><span class="lineno">  713</span>      <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;{} index is invalid! 0 &lt;= Index &lt; {} &quot;</span>, name, <a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);</div>
<div class="line"><span class="lineno">  714</span>      isValid = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  715</span>    }</div>
<div class="line"><span class="lineno">  716</span>  };</div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>  checkIndex(iSample, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.size(), <span class="stringliteral">&quot;Sample&quot;</span>);</div>
<div class="line"><span class="lineno">  719</span>  <span class="keywordflow">if</span> (isValid) checkIndex(iOscChan, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(), <span class="stringliteral">&quot;OscChan&quot;</span>);</div>
<div class="line"><span class="lineno">  720</span>  <span class="keywordflow">if</span> (isValid) checkIndex(iSyst, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(), <span class="stringliteral">&quot;Syst&quot;</span>);</div>
<div class="line"><span class="lineno">  721</span>  <span class="keywordflow">if</span> (isValid) checkIndex(iMode, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(), <span class="stringliteral">&quot;Mode&quot;</span>);</div>
<div class="line"><span class="lineno">  722</span>  <span class="keywordflow">if</span> (isValid) checkIndex(iVar1, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(), <span class="stringliteral">&quot;Var1&quot;</span>);</div>
<div class="line"><span class="lineno">  723</span>  <span class="keywordflow">if</span> (isValid) checkIndex(iVar2, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(), <span class="stringliteral">&quot;Var2&quot;</span>);</div>
<div class="line"><span class="lineno">  724</span>  <span class="keywordflow">if</span> (isValid) checkIndex(iVar3, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(), <span class="stringliteral">&quot;Var3&quot;</span>);</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>  <span class="keywordflow">if</span> (!isValid)</div>
<div class="line"><span class="lineno">  727</span>  {</div>
<div class="line"><span class="lineno">  728</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iSample: {}&quot;</span>, iSample);</div>
<div class="line"><span class="lineno">  729</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iOscChan: {}&quot;</span>, iOscChan);</div>
<div class="line"><span class="lineno">  730</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iSyst: {}&quot;</span>, iSyst);</div>
<div class="line"><span class="lineno">  731</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iMode: {}&quot;</span>, iMode);</div>
<div class="line"><span class="lineno">  732</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iVar1: {}&quot;</span>, iVar1);</div>
<div class="line"><span class="lineno">  733</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iVar2: {}&quot;</span>, iVar2);</div>
<div class="line"><span class="lineno">  734</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Given iVar3: {}&quot;</span>, iVar3);</div>
<div class="line"><span class="lineno">  735</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Come visit me at : {} : {}&quot;</span>, __FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  736</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__);</div>
<div class="line"><span class="lineno">  737</span>  }</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  740</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a237a8b8c3c165c82ebe15d2ca740c7" name="a1a237a8b8c3c165c82ebe15d2ca740c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a237a8b8c3c165c82ebe15d2ca740c7">&#9670;&#160;</a></span>ModifyWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::ModifyWeights </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calc total event weight, not used by Bin-by-bin splines. </p>

<p>Implements <a class="el" href="classSplineBase.html#a49665d2712b61b038085d25ace96a568">SplineBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00078">78</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{<span class="keywordflow">return</span>;};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2eb495f4d63c9e4ee10b97c47e982b28" name="a2eb495f4d63c9e4ee10b97c47e982b28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb495f4d63c9e4ee10b97c47e982b28">&#9670;&#160;</a></span>PrepForReweight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::PrepForReweight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00463">463</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  463</span>                                   {</div>
<div class="line"><span class="lineno">  464</span><span class="comment">//****************************************</span></div>
<div class="line"><span class="lineno">  465</span>  std::vector&lt;TSpline3_red*&gt; UniqueSystSplines;</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>  <span class="comment">// DB Find all the Unique systs across each sample and oscillation channel</span></div>
<div class="line"><span class="lineno">  468</span>  <span class="comment">//    This assumes that each occurence of the same systematic spline has the same knot spacing</span></div>
<div class="line"><span class="lineno">  469</span>  <span class="comment">//    Which is a reasonable assumption for the current implementation of spline evaluations</span></div>
<div class="line"><span class="lineno">  470</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.size(); iSample++)</div>
<div class="line"><span class="lineno">  471</span>  { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  472</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][0].size(); iSyst++)</div>
<div class="line"><span class="lineno">  473</span>    { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  474</span>      std::string SystName = <a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>[iSample][iSyst];</div>
<div class="line"><span class="lineno">  475</span>      <span class="keywordtype">bool</span> FoundSyst = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>      <span class="comment">//ETA - this always seems to be empty to begin with??</span></div>
<div class="line"><span class="lineno">  478</span>      <span class="comment">//so this loop never gets used?</span></div>
<div class="line"><span class="lineno">  479</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iFoundSyst = 0; iFoundSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>.size(); iFoundSyst++)</div>
<div class="line"><span class="lineno">  480</span>      {</div>
<div class="line"><span class="lineno">  481</span>        <span class="keywordflow">if</span> (SystName == <a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>[iFoundSyst])</div>
<div class="line"><span class="lineno">  482</span>        {</div>
<div class="line"><span class="lineno">  483</span>          FoundSyst = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  484</span>        }</div>
<div class="line"><span class="lineno">  485</span>      }</div>
<div class="line"><span class="lineno">  486</span>      <span class="keywordflow">if</span> (!FoundSyst)</div>
<div class="line"><span class="lineno">  487</span>      {</div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordtype">bool</span> FoundNonFlatSpline = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  489</span>        <span class="comment">//This is all basically to check that you have some resposne from a spline</span></div>
<div class="line"><span class="lineno">  490</span>        <span class="comment">//systematic somewhere</span></div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><span class="lineno">  492</span>        { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><span class="lineno">  493</span>          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><span class="lineno">  494</span>          { <span class="comment">// Loop over modes</span></div>
<div class="line"><span class="lineno">  495</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><span class="lineno">  496</span>            { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><span class="lineno">  497</span>              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><span class="lineno">  498</span>              { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><span class="lineno">  499</span>                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><span class="lineno">  500</span>                { <span class="comment">// Loop over third dimension</span></div>
<div class="line"><span class="lineno">  501</span>                  <span class="keywordtype">int</span> splineindex=<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><span class="lineno">  502</span>                  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex])</div>
<div class="line"><span class="lineno">  503</span>                  {</div>
<div class="line"><span class="lineno">  504</span>                    UniqueSystSplines.push_back(<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex]);</div>
<div class="line"><span class="lineno">  505</span>                    <a class="code hl_variable" href="classsplineFDBase.html#a3b821b95c2db6063a9baa244b28aeaa6">UniqueSystIndices</a>.push_back(<a class="code hl_variable" href="classsplineFDBase.html#af036372a158b4e463683a8d02a20ec3d">GlobalSystIndex</a>[iSample][iSyst]);</div>
<div class="line"><span class="lineno">  506</span>                    FoundNonFlatSpline = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  507</span>                  }</div>
<div class="line"><span class="lineno">  508</span>                  <span class="keywordflow">if</span> (FoundNonFlatSpline) { <span class="keywordflow">break</span>;}</div>
<div class="line"><span class="lineno">  509</span>                }<span class="comment">//3D loop end</span></div>
<div class="line"><span class="lineno">  510</span>                <span class="keywordflow">if</span> (FoundNonFlatSpline) { <span class="keywordflow">break</span>;}</div>
<div class="line"><span class="lineno">  511</span>              }<span class="comment">//2D loop end</span></div>
<div class="line"><span class="lineno">  512</span>              <span class="keywordflow">if</span> (FoundNonFlatSpline){ <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  513</span>            }<span class="comment">//1D loop end</span></div>
<div class="line"><span class="lineno">  514</span>            <span class="keywordflow">if</span> (FoundNonFlatSpline){ <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  515</span>          }<span class="comment">//mode loop end</span></div>
<div class="line"><span class="lineno">  516</span>          <span class="keywordflow">if</span> (FoundNonFlatSpline) { <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  517</span>        }<span class="comment">//osc loop end</span></div>
<div class="line"><span class="lineno">  518</span>        <span class="comment">//ETA - only push back unique name if a non-flat response has been found</span></div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">if</span>(FoundNonFlatSpline){</div>
<div class="line"><span class="lineno">  520</span>          <a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>.push_back(SystName);</div>
<div class="line"><span class="lineno">  521</span>        }</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordflow">if</span> (!FoundNonFlatSpline)</div>
<div class="line"><span class="lineno">  524</span>        {</div>
<div class="line"><span class="lineno">  525</span>          <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{} syst has no response in sample {}&quot;</span>, SystName, iSample);</div>
<div class="line"><span class="lineno">  526</span>          <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Whilst this isn&#39;t necessarily a problem, it seems odd&quot;</span>);</div>
<div class="line"><span class="lineno">  527</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  528</span>        }</div>
<div class="line"><span class="lineno">  529</span>      }</div>
<div class="line"><span class="lineno">  530</span>    }<span class="comment">//Syst loop end</span></div>
<div class="line"><span class="lineno">  531</span>  }</div>
<div class="line"><span class="lineno">  532</span>  </div>
<div class="line"><span class="lineno">  533</span>  <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(UniqueSystSplines.size());</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>  <span class="comment">// DB Find the number of splines knots which assumes each instance of the syst has the same number of knots</span></div>
<div class="line"><span class="lineno">  536</span>  <a class="code hl_variable" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a> = <span class="keyword">new</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span>[<a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>]();</div>
<div class="line"><span class="lineno">  537</span>  <a class="code hl_variable" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a> = <span class="keyword">new</span> <span class="keywordtype">float</span>[<a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>]();</div>
<div class="line"><span class="lineno">  538</span>  <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>.resize(<a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>);</div>
<div class="line"><span class="lineno">  539</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSpline = 0; iSpline &lt; <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iSpline++)</div>
<div class="line"><span class="lineno">  540</span>  {</div>
<div class="line"><span class="lineno">  541</span>    <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].nPts = <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="namespaceM3.html#adb59b8ecdc4e1b2d5d4c826a13aa7463">M3::int_t</a><span class="keyword">&gt;</span>(UniqueSystSplines[iSpline]-&gt;GetNp());</div>
<div class="line"><span class="lineno">  542</span>    <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].xPts.resize(<a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].nPts);</div>
<div class="line"><span class="lineno">  543</span>    <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].splineParsPointer = <a class="code hl_variable" href="classsplineFDBase.html#a891de87b873e079f6bbdb1355a9ff153">xsec</a>-&gt;<a class="code hl_function" href="classcovarianceBase.html#aa970d7a68497a3765723bf34629f79f7">retPointer</a>(<a class="code hl_variable" href="classsplineFDBase.html#a3b821b95c2db6063a9baa244b28aeaa6">UniqueSystIndices</a>[iSpline]);</div>
<div class="line"><span class="lineno">  544</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iKnot = 0; iKnot &lt; <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].nPts; iKnot++)</div>
<div class="line"><span class="lineno">  545</span>    {</div>
<div class="line"><span class="lineno">  546</span>      <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> xPoint;</div>
<div class="line"><span class="lineno">  547</span>      <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> yPoint;</div>
<div class="line"><span class="lineno">  548</span>      UniqueSystSplines[iSpline]-&gt;GetKnot(iKnot, xPoint, yPoint);</div>
<div class="line"><span class="lineno">  549</span>      <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iSpline].xPts[iKnot] = xPoint;</div>
<div class="line"><span class="lineno">  550</span>    }</div>
<div class="line"><span class="lineno">  551</span>    <span class="comment">//ETA - let this just be set as the first segment by default</span></div>
<div class="line"><span class="lineno">  552</span>    <a class="code hl_variable" href="classSplineBase.html#a938e3a60326137037f868b9930e2a972">SplineSegments</a>[iSpline] = 0;</div>
<div class="line"><span class="lineno">  553</span>    <a class="code hl_variable" href="classSplineBase.html#aa0b1d3a1adf7cffa7e74581bc7d58d4c">ParamValues</a>[iSpline] = 0.;</div>
<div class="line"><span class="lineno">  554</span>  }</div>
<div class="line"><span class="lineno">  555</span>  </div>
<div class="line"><span class="lineno">  556</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;nUniqueSysts: {}&quot;</span>, <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>);</div>
<div class="line"><span class="lineno">  557</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{:&lt;15} | {:&lt;20} | {:&lt;6}&quot;</span>, <span class="stringliteral">&quot;Spline Index&quot;</span>, <span class="stringliteral">&quot;Syst Name&quot;</span>, <span class="stringliteral">&quot;nKnots&quot;</span>);</div>
<div class="line"><span class="lineno">  558</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iUniqueSyst = 0; iUniqueSyst &lt; <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iUniqueSyst++)</div>
<div class="line"><span class="lineno">  559</span>  {</div>
<div class="line"><span class="lineno">  560</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{:&lt;15} | {:&lt;20} | {:&lt;6}&quot;</span>, iUniqueSyst, <a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>[iUniqueSyst], <a class="code hl_variable" href="classSplineBase.html#a9452897aecfe016466543dfe19c0628b">SplineInfoArray</a>[iUniqueSyst].nPts);</div>
<div class="line"><span class="lineno">  561</span>  }</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>  <span class="comment">//ETA</span></div>
<div class="line"><span class="lineno">  564</span>  <span class="comment">//Isn&#39;t this just doing what CountNumberOfLoadedSplines() does?</span></div>
<div class="line"><span class="lineno">  565</span>  <span class="keywordtype">int</span> nCombinations_FlatSplines = 0;</div>
<div class="line"><span class="lineno">  566</span>  <span class="keywordtype">int</span> nCombinations_All = 0;</div>
<div class="line"><span class="lineno">  567</span>  <span class="comment">// DB Now actually loop over splines to determine which are all null i.e. flat</span></div>
<div class="line"><span class="lineno">  568</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.size(); iSample++)</div>
<div class="line"><span class="lineno">  569</span>  { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><span class="lineno">  571</span>    { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><span class="lineno">  572</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan].size(); iSyst++)</div>
<div class="line"><span class="lineno">  573</span>      { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  574</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><span class="lineno">  575</span>        { <span class="comment">// Loop over modes</span></div>
<div class="line"><span class="lineno">  576</span>          <span class="comment">//bool isFlat = false;</span></div>
<div class="line"><span class="lineno">  577</span>          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><span class="lineno">  578</span>          { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><span class="lineno">  579</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><span class="lineno">  580</span>            { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><span class="lineno">  581</span>              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><span class="lineno">  582</span>              { <span class="comment">// Loop over third dimension</span></div>
<div class="line"><span class="lineno">  583</span>                <span class="keywordtype">int</span> splineindex=<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><span class="lineno">  584</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex])</div>
<div class="line"><span class="lineno">  585</span>                {</div>
<div class="line"><span class="lineno">  586</span>                  nCombinations_All += 1;</div>
<div class="line"><span class="lineno">  587</span>                } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  588</span>                  nCombinations_FlatSplines += 1;</div>
<div class="line"><span class="lineno">  589</span>                  nCombinations_All += 1;</div>
<div class="line"><span class="lineno">  590</span>                }</div>
<div class="line"><span class="lineno">  591</span>              }</div>
<div class="line"><span class="lineno">  592</span>            }</div>
<div class="line"><span class="lineno">  593</span>          }</div>
<div class="line"><span class="lineno">  594</span>        }</div>
<div class="line"><span class="lineno">  595</span>      }</div>
<div class="line"><span class="lineno">  596</span>    }</div>
<div class="line"><span class="lineno">  597</span>  }</div>
<div class="line"><span class="lineno">  598</span>  <span class="comment">// We need to grab the maximum number of knots</span></div>
<div class="line"><span class="lineno">  599</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Number of combinations of Sample, OscChan, Syst and Mode which have entirely flat response: {} / {}&quot;</span>, nCombinations_FlatSplines, nCombinations_All);</div>
<div class="line"><span class="lineno">  600</span>}</div>
<div class="ttc" id="aclassSplineBase_html_a2165b057a0125a28d96f247ca8680b42"><div class="ttname"><a href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">SplineBase::nParams</a></div><div class="ttdeci">short int nParams</div><div class="ttdoc">Number of parameters that have splines.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00065">SplineBase.h:65</a></div></div>
<div class="ttc" id="aclasscovarianceBase_html_aa970d7a68497a3765723bf34629f79f7"><div class="ttname"><a href="classcovarianceBase.html#aa970d7a68497a3765723bf34629f79f7">covarianceBase::retPointer</a></div><div class="ttdeci">const double * retPointer(const int iParam)</div><div class="ttdoc">DB Pointer return to param position.</div><div class="ttdef"><b>Definition:</b> <a href="covarianceBase_8h_source.html#l00211">covarianceBase.h:211</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a3b821b95c2db6063a9baa244b28aeaa6"><div class="ttname"><a href="classsplineFDBase.html#a3b821b95c2db6063a9baa244b28aeaa6">splineFDBase::UniqueSystIndices</a></div><div class="ttdeci">std::vector&lt; int &gt; UniqueSystIndices</div><div class="ttdoc">Global index of each spline param, it allows us to match spline ordering with global.</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00107">splineFDBase.h:107</a></div></div>
<div class="ttc" id="anamespaceM3_html_adb59b8ecdc4e1b2d5d4c826a13aa7463"><div class="ttname"><a href="namespaceM3.html#adb59b8ecdc4e1b2d5d4c826a13aa7463">M3::int_t</a></div><div class="ttdeci">int int_t</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00027">Core.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdc7da54adb2e1de46ba2e6459f4aecf" name="afdc7da54adb2e1de46ba2e6459f4aecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdc7da54adb2e1de46ba2e6459f4aecf">&#9670;&#160;</a></span>PrintArrayDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::PrintArrayDetails </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00678">678</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  680</span>{</div>
<div class="line"><span class="lineno">  681</span>  <span class="keywordtype">int</span> iSample = <a class="code hl_function" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a>(SampleName);</div>
<div class="line"><span class="lineno">  682</span>  <span class="keywordtype">int</span> nOscChannels = int(<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>());</div>
<div class="line"><span class="lineno">  683</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Sample {} has {} oscillation channels&quot;</span>, SampleName, nOscChannels); </div>
<div class="line"><span class="lineno">  684</span>  </div>
<div class="line"><span class="lineno">  685</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; nOscChannels; iOscChan++)</div>
<div class="line"><span class="lineno">  686</span>  {</div>
<div class="line"><span class="lineno">  687</span>    <span class="keywordtype">int</span> nSysts = int(<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>());</div>
<div class="line"><span class="lineno">  688</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Oscillation channel {} has {} systematics&quot;</span>, iOscChan, nSysts);     </div>
<div class="line"><span class="lineno">  689</span>  }</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><span class="lineno">  692</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Printing no. of modes affected by each systematic for each oscillation channel&quot;</span>);</div>
<div class="line"><span class="lineno">  693</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].size(); iOscChan++) {</div>
<div class="line"><span class="lineno">  694</span>    std::string modes = fmt::format(<span class="stringliteral">&quot;OscChan: {}\t&quot;</span>, iOscChan);</div>
<div class="line"><span class="lineno">  695</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan].size(); iSyst++) {</div>
<div class="line"><span class="lineno">  696</span>      modes += fmt::format(<span class="stringliteral">&quot;{} &quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst].<a class="code hl_variable" href="GetPenaltyTerm_8cpp.html#a439227feff9d7f55384e8780cfc2eb82">size</a>());</div>
<div class="line"><span class="lineno">  697</span>    }</div>
<div class="line"><span class="lineno">  698</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{}&quot;</span>, modes);</div>
<div class="line"><span class="lineno">  699</span>  }</div>
<div class="line"><span class="lineno">  700</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;#----------------------------------------------------------------------------------------------------------------------------------#&quot;</span>);</div>
<div class="line"><span class="lineno">  701</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a79f1c5d72afb21c06cfff5710fa21083" name="a79f1c5d72afb21c06cfff5710fa21083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79f1c5d72afb21c06cfff5710fa21083">&#9670;&#160;</a></span>PrintBinning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::PrintBinning </td>
          <td>(</td>
          <td class="paramtype">TAxis *&#160;</td>
          <td class="paramname"><em>Axis</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00743">743</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  745</span>{</div>
<div class="line"><span class="lineno">  746</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> NBins = Axis-&gt;GetNbins();</div>
<div class="line"><span class="lineno">  747</span>  std::string text = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  748</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iBin = 0; iBin &lt;= NBins; iBin++) {</div>
<div class="line"><span class="lineno">  749</span>    text += fmt::format(<span class="stringliteral">&quot;{} &quot;</span>, Axis-&gt;GetXbins()-&gt;GetAt(iBin));</div>
<div class="line"><span class="lineno">  750</span>  }</div>
<div class="line"><span class="lineno">  751</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;{}&quot;</span>, text);</div>
<div class="line"><span class="lineno">  752</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4394ca08387c8a9905704e80c82a9cdc" name="a4394ca08387c8a9905704e80c82a9cdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4394ca08387c8a9905704e80c82a9cdc">&#9670;&#160;</a></span>PrintSampleDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::PrintSampleDetails </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SampleName</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print info like DetID number of spline params etc. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00665">665</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  667</span>{</div>
<div class="line"><span class="lineno">  668</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> iSample = <a class="code hl_function" href="classsplineFDBase.html#ac12452f74e832c5899cb6d130dfa28e2">getSampleIndex</a>(SampleName);</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Details about sample: {:&lt;20}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a78508c5d0d4ef09457beb723dc796208">SampleNames</a>[iSample]);</div>
<div class="line"><span class="lineno">  671</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t Dimension: {:&lt;35}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a6c28400605049bdee229885c46463dcd">Dimensions</a>[iSample]);</div>
<div class="line"><span class="lineno">  672</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t DetID: {:&lt;35}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a481d275de711edfddbb82d3924b6e63a">DetIDs</a>[iSample]);</div>
<div class="line"><span class="lineno">  673</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t nSplineParam: {:&lt;35}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#aad64c7c63db8ea676f86eb2279f04d40">nSplineParams</a>[iSample]);</div>
<div class="line"><span class="lineno">  674</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;\t nOscChan: {:&lt;35}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#aa10670a64bbdef3ffd69f4b8f102fff3">nOscChans</a>[iSample]);</div>
<div class="line"><span class="lineno">  675</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4763648fb3e207e3f35ebb8a96c6d331" name="a4763648fb3e207e3f35ebb8a96c6d331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4763648fb3e207e3f35ebb8a96c6d331">&#9670;&#160;</a></span>retPointer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> * splineFDBase::retPointer </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>oscchan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>syst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>var1bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>var2bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>var3bin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get pointer to spline weight based on bin variables </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00068">68</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>                                                                                                {</div>
<div class="line"><span class="lineno">   70</span>      <span class="keywordtype">int</span> index = <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[sample][oscchan][syst][mode][var1bin][var2bin][var3bin];</div>
<div class="line"><span class="lineno">   71</span>      <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="classsplineFDBase.html#a107c337ce7053208795747a3223f04e1">weightvec_Monolith</a>[index];</div>
<div class="line"><span class="lineno">   72</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4926750455273cdfc56ebe7cadc16ef5" name="a4926750455273cdfc56ebe7cadc16ef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4926750455273cdfc56ebe7cadc16ef5">&#9670;&#160;</a></span>StripDuplicatedModes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; splineFDBase::StripDuplicatedModes </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td>
          <td class="paramname"><em>InputVector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there are any repeated modes. This is used to reduce the number of modes in case many interaction modes get averaged into one spline. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00812">812</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  812</span>                                                                                                      {</div>
<div class="line"><span class="lineno">  813</span>  <span class="comment">//ETA - this is of size nPars from the xsec model</span></div>
<div class="line"><span class="lineno">  814</span>  <span class="keywordtype">size_t</span> InputVectorSize = InputVector.size();</div>
<div class="line"><span class="lineno">  815</span>  std::vector&lt; std::vector&lt;int&gt; &gt; ReturnVec(InputVectorSize);</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>  <span class="comment">//ETA - loop over all systematics</span></div>
<div class="line"><span class="lineno">  818</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iSyst=0;iSyst&lt;InputVectorSize;iSyst++) {</div>
<div class="line"><span class="lineno">  819</span>    std::vector&lt;int&gt; TmpVec;</div>
<div class="line"><span class="lineno">  820</span>    std::vector&lt;std::string&gt; TestVec;</div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span>    <span class="comment">//Loop over the modes that we&#39;ve listed in xsec cov</span></div>
<div class="line"><span class="lineno">  823</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0 ; iMode &lt; InputVector[iSyst].size() ; iMode++) {</div>
<div class="line"><span class="lineno">  824</span>      <span class="keywordtype">int</span> Mode = InputVector[iSyst][iMode];</div>
<div class="line"><span class="lineno">  825</span>      std::string ModeName = <a class="code hl_variable" href="classsplineFDBase.html#ad004862f499b783034dd6a30df25c9f4">Modes</a>-&gt;<a class="code hl_function" href="classMaCh3Modes.html#a94d555d153fd328abd3c4411a285b3d3">GetSplineSuffixFromMaCh3Mode</a>(Mode);</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>      <span class="keywordtype">bool</span> IncludeMode = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  828</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> TestString : TestVec) {</div>
<div class="line"><span class="lineno">  829</span>        <span class="keywordflow">if</span> (ModeName == TestString) {</div>
<div class="line"><span class="lineno">  830</span>          IncludeMode = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  831</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  832</span>        }</div>
<div class="line"><span class="lineno">  833</span>      }</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>      <span class="keywordflow">if</span> (IncludeMode) {</div>
<div class="line"><span class="lineno">  836</span>        TmpVec.push_back(Mode);</div>
<div class="line"><span class="lineno">  837</span>        TestVec.push_back(ModeName);</div>
<div class="line"><span class="lineno">  838</span>      }</div>
<div class="line"><span class="lineno">  839</span>    }</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>    ReturnVec[iSyst] = TmpVec;</div>
<div class="line"><span class="lineno">  842</span>  }</div>
<div class="line"><span class="lineno">  843</span>  <span class="keywordflow">return</span> ReturnVec;</div>
<div class="line"><span class="lineno">  844</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d1872fe4be72c735bd55fa00e1674b8" name="a6d1872fe4be72c735bd55fa00e1674b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d1872fe4be72c735bd55fa00e1674b8">&#9670;&#160;</a></span>TransferToMonolith()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splineFDBase::TransferToMonolith </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>flatten multidimensional spline array into proper monolith </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8cpp_source.html#l00119">119</a> of file <a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  121</span>{</div>
<div class="line"><span class="lineno">  122</span>  <a class="code hl_function" href="classsplineFDBase.html#a2eb495f4d63c9e4ee10b97c47e982b28">PrepForReweight</a>(); </div>
<div class="line"><span class="lineno">  123</span>  <a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a> = <a class="code hl_function" href="classsplineFDBase.html#a0bfc616fab953333e6e938de52ce3bed">CountNumberOfLoadedSplines</a>(<span class="keyword">false</span>, 1);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a>!=<a class="code hl_variable" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a>){</div>
<div class="line"><span class="lineno">  126</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Something&#39;s gone wrong when we tried to get the size of your monolith&quot;</span>);</div>
<div class="line"><span class="lineno">  127</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;MonolithSize is {}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a>);</div>
<div class="line"><span class="lineno">  128</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;MonolithIndex is {}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#addec38a8493974ccc3ee16931d5b794a">MonolithIndex</a>);</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  130</span>  }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>  <a class="code hl_define" href="MaCh3Logger_8h.html#a95fa4dffc648e4c5536c9292c2bdcac3">MACH3LOG_INFO</a>(<span class="stringliteral">&quot;Now transferring splines to a monolith if size {}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a>);</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>  <a class="code hl_variable" href="classsplineFDBase.html#ae237cc1c6d97e35bf4f7f64e369a5781">uniquesplinevec_Monolith</a>.resize(<a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a>);</div>
<div class="line"><span class="lineno">  135</span>  <a class="code hl_variable" href="classsplineFDBase.html#a107c337ce7053208795747a3223f04e1">weightvec_Monolith</a>.resize(<a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a>);</div>
<div class="line"><span class="lineno">  136</span>  <a class="code hl_variable" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code hl_variable" href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">MonolithSize</a>];</div>
<div class="line"><span class="lineno">  137</span>  </div>
<div class="line"><span class="lineno">  138</span>  <a class="code hl_variable" href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">xcoeff_arr</a> = <span class="keyword">new</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[<a class="code hl_variable" href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">CoeffIndex</a>];</div>
<div class="line"><span class="lineno">  139</span>  <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a> = <span class="keyword">new</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[<a class="code hl_variable" href="classsplineFDBase.html#abcff04fee3e6790a099a0df9dbee74c2">CoeffIndex</a>*4];</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSample = 0; iSample &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>.size(); iSample++)</div>
<div class="line"><span class="lineno">  142</span>  { <span class="comment">// Loop over sample</span></div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iOscChan = 0; iOscChan &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample].size(); iOscChan++)</div>
<div class="line"><span class="lineno">  144</span>    { <span class="comment">// Loop over oscillation channels</span></div>
<div class="line"><span class="lineno">  145</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iSyst = 0; iSyst &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan].size(); iSyst++)</div>
<div class="line"><span class="lineno">  146</span>      { <span class="comment">// Loop over systematics</span></div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iMode = 0; iMode &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst].size(); iMode++)</div>
<div class="line"><span class="lineno">  148</span>        { <span class="comment">// Loop over modes</span></div>
<div class="line"><span class="lineno">  149</span>          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar1 = 0; iVar1 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode].size(); iVar1++)</div>
<div class="line"><span class="lineno">  150</span>          { <span class="comment">// Loop over first dimension</span></div>
<div class="line"><span class="lineno">  151</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar2 = 0; iVar2 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1].size(); iVar2++)</div>
<div class="line"><span class="lineno">  152</span>            { <span class="comment">// Loop over second dimension</span></div>
<div class="line"><span class="lineno">  153</span>              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iVar3 = 0; iVar3 &lt; <a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2].size(); iVar3++)</div>
<div class="line"><span class="lineno">  154</span>              {</div>
<div class="line"><span class="lineno">  155</span>                <span class="keywordtype">int</span> splineindex=<a class="code hl_variable" href="classsplineFDBase.html#ab3a4e79bfe675a4070597557e6226e12">indexvec</a>[iSample][iOscChan][iSyst][iMode][iVar1][iVar2][iVar3];</div>
<div class="line"><span class="lineno">  156</span>                <a class="code hl_variable" href="classsplineFDBase.html#a107c337ce7053208795747a3223f04e1">weightvec_Monolith</a>[splineindex] = 1.0;</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>                <span class="keywordtype">bool</span> foundUniqueSpline = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  159</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iUniqueSyst = 0; iUniqueSyst &lt; <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iUniqueSyst++)</div>
<div class="line"><span class="lineno">  160</span>                {</div>
<div class="line"><span class="lineno">  161</span>                  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>[iSample][iSyst] == <a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>[iUniqueSyst])</div>
<div class="line"><span class="lineno">  162</span>                  {</div>
<div class="line"><span class="lineno">  163</span>                    <a class="code hl_variable" href="classsplineFDBase.html#ae237cc1c6d97e35bf4f7f64e369a5781">uniquesplinevec_Monolith</a>[splineindex] = iUniqueSyst;</div>
<div class="line"><span class="lineno">  164</span>                    foundUniqueSpline = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  165</span>                  }</div>
<div class="line"><span class="lineno">  166</span>                }<span class="comment">//unique syst loop end</span></div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>                <span class="keywordflow">if</span> (!foundUniqueSpline)</div>
<div class="line"><span class="lineno">  169</span>                {</div>
<div class="line"><span class="lineno">  170</span>                  <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Unique spline index not found&quot;</span>);</div>
<div class="line"><span class="lineno">  171</span>                  <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;For Spline {}&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>[iSample][iSyst]);</div>
<div class="line"><span class="lineno">  172</span>                  <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Couldn&#39;t match {} with any of the following {} systs:&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#a5619363447e607cd835c46d601b10675">SplineFileParPrefixNames</a>[iSample][iSyst], <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>);</div>
<div class="line"><span class="lineno">  173</span>                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iUniqueSyst = 0; iUniqueSyst &lt; <a class="code hl_variable" href="classSplineBase.html#a2165b057a0125a28d96f247ca8680b42">nParams</a>; iUniqueSyst++)</div>
<div class="line"><span class="lineno">  174</span>                  {</div>
<div class="line"><span class="lineno">  175</span>                    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;{},&quot;</span>, <a class="code hl_variable" href="classsplineFDBase.html#aacf850f4ec22e4f7338f243999ecc7dd">UniqueSystNames</a>.at(iUniqueSyst));</div>
<div class="line"><span class="lineno">  176</span>                  }<span class="comment">//unique syst loop end</span></div>
<div class="line"><span class="lineno">  177</span>                  <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__ , __LINE__ );</div>
<div class="line"><span class="lineno">  178</span>                }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>                <span class="keywordtype">int</span> splineKnots;</div>
<div class="line"><span class="lineno">  181</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex]){</div>
<div class="line"><span class="lineno">  182</span>                  <a class="code hl_variable" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a>[splineindex]=<span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  183</span>                  splineKnots=<a class="code hl_variable" href="classsplineFDBase.html#a84ec9ea208503053b9735b1cb1bc417d">splinevec_Monolith</a>[splineindex]-&gt;GetNp();</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>                  <span class="comment">//Now to fill up our coefficient arrayss</span></div>
<div class="line"><span class="lineno">  186</span>                  <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* tmpXCoeffArr = <span class="keyword">new</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[splineKnots];</div>
<div class="line"><span class="lineno">  187</span>                  <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* tmpManyCoeffArr = <span class="keyword">new</span> <a class="code hl_typedef" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>[splineKnots*4];</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>                  <span class="keywordtype">int</span> iCoeff=<a class="code hl_variable" href="classsplineFDBase.html#af63885ddb6731f77808d029372e6b187">coeffindexvec</a>[splineindex];</div>
<div class="line"><span class="lineno">  190</span>                  <a class="code hl_function" href="classsplineFDBase.html#a8b7b34479c3240a9827d6a0b5b7da4b4">getSplineCoeff_SepMany</a>(splineindex, tmpXCoeffArr, tmpManyCoeffArr);</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>                  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; splineKnots; i++){</div>
<div class="line"><span class="lineno">  193</span>                    <a class="code hl_variable" href="classsplineFDBase.html#a00f046c4c64c0aa11334b32b0701a9f1">xcoeff_arr</a>[iCoeff+i]=tmpXCoeffArr[i];</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;4; j++){</div>
<div class="line"><span class="lineno">  196</span>                      <a class="code hl_variable" href="classsplineFDBase.html#ab883a1f2cdae707c36fa27b86ed7f279">manycoeff_arr</a>[(iCoeff+i)*4+j]=tmpManyCoeffArr[i*4+j];</div>
<div class="line"><span class="lineno">  197</span>                    }</div>
<div class="line"><span class="lineno">  198</span>                  }</div>
<div class="line"><span class="lineno">  199</span>                  <span class="keyword">delete</span>[] tmpXCoeffArr;</div>
<div class="line"><span class="lineno">  200</span>                  <span class="keyword">delete</span>[] tmpManyCoeffArr;</div>
<div class="line"><span class="lineno">  201</span>                }</div>
<div class="line"><span class="lineno">  202</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  203</span>                    <a class="code hl_variable" href="classsplineFDBase.html#aa8a204355df78af3f79bf8f2815258d3">isflatarray</a>[splineindex]=<span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  204</span>                }</div>
<div class="line"><span class="lineno">  205</span>              }<span class="comment">//3d loop end</span></div>
<div class="line"><span class="lineno">  206</span>            }<span class="comment">//2d loop end</span></div>
<div class="line"><span class="lineno">  207</span>          }<span class="comment">//1d loop end</span></div>
<div class="line"><span class="lineno">  208</span>        }<span class="comment">//mode loop end</span></div>
<div class="line"><span class="lineno">  209</span>      }<span class="comment">//syst2 loop end</span></div>
<div class="line"><span class="lineno">  210</span>    }<span class="comment">//osc loop end</span></div>
<div class="line"><span class="lineno">  211</span>  }<span class="comment">//syst1 loop end</span></div>
<div class="line"><span class="lineno">  212</span>}</div>
<div class="ttc" id="aclasssplineFDBase_html_a0bfc616fab953333e6e938de52ce3bed"><div class="ttname"><a href="classsplineFDBase.html#a0bfc616fab953333e6e938de52ce3bed">splineFDBase::CountNumberOfLoadedSplines</a></div><div class="ttdeci">int CountNumberOfLoadedSplines(bool NonFlat=false, int Verbosity=0)</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00403">splineFDBase.cpp:403</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a2eb495f4d63c9e4ee10b97c47e982b28"><div class="ttname"><a href="classsplineFDBase.html#a2eb495f4d63c9e4ee10b97c47e982b28">splineFDBase::PrepForReweight</a></div><div class="ttdeci">void PrepForReweight()</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00463">splineFDBase.cpp:463</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_a8b7b34479c3240a9827d6a0b5b7da4b4"><div class="ttname"><a href="classsplineFDBase.html#a8b7b34479c3240a9827d6a0b5b7da4b4">splineFDBase::getSplineCoeff_SepMany</a></div><div class="ttdeci">void getSplineCoeff_SepMany(int splineindex, M3::float_t *&amp;xArray, M3::float_t *&amp;manyArray)</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8cpp_source.html#l00604">splineFDBase.cpp:604</a></div></div>
<div class="ttc" id="aclasssplineFDBase_html_ad1fefa7f796f2a28a69f5336f5777bce"><div class="ttname"><a href="classsplineFDBase.html#ad1fefa7f796f2a28a69f5336f5777bce">splineFDBase::MonolithSize</a></div><div class="ttdeci">int MonolithSize</div><div class="ttdef"><b>Definition:</b> <a href="splineFDBase_8h_source.html#l00118">splineFDBase.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abcff04fee3e6790a099a0df9dbee74c2" name="abcff04fee3e6790a099a0df9dbee74c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcff04fee3e6790a099a0df9dbee74c2">&#9670;&#160;</a></span>CoeffIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int splineFDBase::CoeffIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00120">120</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="af63885ddb6731f77808d029372e6b187" name="af63885ddb6731f77808d029372e6b187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af63885ddb6731f77808d029372e6b187">&#9670;&#160;</a></span>coeffindexvec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int &gt; splineFDBase::coeffindexvec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00111">111</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a481d275de711edfddbb82d3924b6e63a" name="a481d275de711edfddbb82d3924b6e63a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a481d275de711edfddbb82d3924b6e63a">&#9670;&#160;</a></span>DetIDs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; splineFDBase::DetIDs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00086">86</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a00e1aeea8e9389c41f93469a26c83adc" name="a00e1aeea8e9389c41f93469a26c83adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00e1aeea8e9389c41f93469a26c83adc">&#9670;&#160;</a></span>DimensionLabels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;std::string&gt; &gt; splineFDBase::DimensionLabels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00085">85</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a6c28400605049bdee229885c46463dcd" name="a6c28400605049bdee229885c46463dcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c28400605049bdee229885c46463dcd">&#9670;&#160;</a></span>Dimensions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; splineFDBase::Dimensions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00084">84</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="af036372a158b4e463683a8d02a20ec3d" name="af036372a158b4e463683a8d02a20ec3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af036372a158b4e463683a8d02a20ec3d">&#9670;&#160;</a></span>GlobalSystIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;int&gt; &gt; splineFDBase::GlobalSystIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This holds the global spline index and is used to grab the current parameter value to evaluate splines at. Each internal vector will be of size of the number of spline systematics which affect that sample. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00099">99</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="ab3a4e79bfe675a4070597557e6226e12" name="ab3a4e79bfe675a4070597557e6226e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3a4e79bfe675a4070597557e6226e12">&#9670;&#160;</a></span>indexvec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &gt; &gt; &gt; &gt; splineFDBase::indexvec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Variables related to determined which modes have splines and which piggy-back of other modes. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00110">110</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="aa8a204355df78af3f79bf8f2815258d3" name="aa8a204355df78af3f79bf8f2815258d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8a204355df78af3f79bf8f2815258d3">&#9670;&#160;</a></span>isflatarray</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool* splineFDBase::isflatarray</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Need to keep track of which splines are flat and which aren't. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00123">123</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="ab883a1f2cdae707c36fa27b86ed7f279" name="ab883a1f2cdae707c36fa27b86ed7f279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab883a1f2cdae707c36fa27b86ed7f279">&#9670;&#160;</a></span>manycoeff_arr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* splineFDBase::manycoeff_arr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ybcd coefficients for each spline </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00127">127</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="ad004862f499b783034dd6a30df25c9f4" name="ad004862f499b783034dd6a30df25c9f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad004862f499b783034dd6a30df25c9f4">&#9670;&#160;</a></span>Modes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaCh3Modes.html">MaCh3Modes</a>* splineFDBase::Modes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pointer to MaCh3 Mode from which we get spline suffix </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00135">135</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="addec38a8493974ccc3ee16931d5b794a" name="addec38a8493974ccc3ee16931d5b794a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addec38a8493974ccc3ee16931d5b794a">&#9670;&#160;</a></span>MonolithIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int splineFDBase::MonolithIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00119">119</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="ad1fefa7f796f2a28a69f5336f5777bce" name="ad1fefa7f796f2a28a69f5336f5777bce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1fefa7f796f2a28a69f5336f5777bce">&#9670;&#160;</a></span>MonolithSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int splineFDBase::MonolithSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00118">118</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="aa10670a64bbdef3ffd69f4b8f102fff3" name="aa10670a64bbdef3ffd69f4b8f102fff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa10670a64bbdef3ffd69f4b8f102fff3">&#9670;&#160;</a></span>nOscChans</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; splineFDBase::nOscChans</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00088">88</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="aad64c7c63db8ea676f86eb2279f04d40" name="aad64c7c63db8ea676f86eb2279f04d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad64c7c63db8ea676f86eb2279f04d40">&#9670;&#160;</a></span>nSplineParams</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; splineFDBase::nSplineParams</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00087">87</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a78508c5d0d4ef09457beb723dc796208" name="a78508c5d0d4ef09457beb723dc796208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78508c5d0d4ef09457beb723dc796208">&#9670;&#160;</a></span>SampleNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; splineFDBase::SampleNames</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00083">83</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="af71b65713518f42e59c543dbad5dab70" name="af71b65713518f42e59c543dbad5dab70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71b65713518f42e59c543dbad5dab70">&#9670;&#160;</a></span>SplineBinning</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::vector&lt;TAxis*&gt; &gt; &gt; splineFDBase::SplineBinning</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00090">90</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a5619363447e607cd835c46d601b10675" name="a5619363447e607cd835c46d601b10675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5619363447e607cd835c46d601b10675">&#9670;&#160;</a></span>SplineFileParPrefixNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;std::string&gt; &gt; splineFDBase::SplineFileParPrefixNames</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00091">91</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="aabc74a6dd8b13fc6925e975bf5f92cff" name="aabc74a6dd8b13fc6925e975bf5f92cff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabc74a6dd8b13fc6925e975bf5f92cff">&#9670;&#160;</a></span>SplineInterpolationTypes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;<a class="el" href="Structs_8h.html#a6720d732608767153550aebebcf8fbf4">SplineInterpolation</a>&gt; &gt; splineFDBase::SplineInterpolationTypes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>spline interpolation types for each sample. These vectors are from a call to GetSplineInterpolationFromDetID() </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00102">102</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a6b7aeec6d03dad01975582226b39632b" name="a6b7aeec6d03dad01975582226b39632b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b7aeec6d03dad01975582226b39632b">&#9670;&#160;</a></span>SplineModeVecs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; std::vector&lt;int&gt; &gt; &gt; splineFDBase::SplineModeVecs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A vector of vectors of the spline modes that a systematic applies to This gets compared against the event mode to figure out if a syst should apply to an event or not </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00095">95</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a84ec9ea208503053b9735b1cb1bc417d" name="a84ec9ea208503053b9735b1cb1bc417d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84ec9ea208503053b9735b1cb1bc417d">&#9670;&#160;</a></span>splinevec_Monolith</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classTSpline3__red.html">TSpline3_red</a>* &gt; splineFDBase::splinevec_Monolith</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>holds each spline object before stripping into coefficient monolith </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00116">116</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a7a564f5748f16d97ebf1e1c300a1cc5c" name="a7a564f5748f16d97ebf1e1c300a1cc5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a564f5748f16d97ebf1e1c300a1cc5c">&#9670;&#160;</a></span>uniquecoeffindices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; splineFDBase::uniquecoeffindices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique coefficient indices. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00113">113</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="ae237cc1c6d97e35bf4f7f64e369a5781" name="ae237cc1c6d97e35bf4f7f64e369a5781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae237cc1c6d97e35bf4f7f64e369a5781">&#9670;&#160;</a></span>uniquesplinevec_Monolith</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; splineFDBase::uniquesplinevec_Monolith</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps single spline object with single parameter. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00132">132</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a3b821b95c2db6063a9baa244b28aeaa6" name="a3b821b95c2db6063a9baa244b28aeaa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b821b95c2db6063a9baa244b28aeaa6">&#9670;&#160;</a></span>UniqueSystIndices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; splineFDBase::UniqueSystIndices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global index of each spline param, it allows us to match spline ordering with global. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00107">107</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="aacf850f4ec22e4f7338f243999ecc7dd" name="aacf850f4ec22e4f7338f243999ecc7dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacf850f4ec22e4f7338f243999ecc7dd">&#9670;&#160;</a></span>UniqueSystNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; splineFDBase::UniqueSystNames</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>name of each spline parameter </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00105">105</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a107c337ce7053208795747a3223f04e1" name="a107c337ce7053208795747a3223f04e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a107c337ce7053208795747a3223f04e1">&#9670;&#160;</a></span>weightvec_Monolith</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>&gt; splineFDBase::weightvec_Monolith</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores weight from spline evaluation for each single spline. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00130">130</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a00f046c4c64c0aa11334b32b0701a9f1" name="a00f046c4c64c0aa11334b32b0701a9f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f046c4c64c0aa11334b32b0701a9f1">&#9670;&#160;</a></span>xcoeff_arr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>* splineFDBase::xcoeff_arr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>x coefficients for each spline </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00125">125</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<a id="a891de87b873e079f6bbdb1355a9ff153" name="a891de87b873e079f6bbdb1355a9ff153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a891de87b873e079f6bbdb1355a9ff153">&#9670;&#160;</a></span>xsec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcovarianceXsec.html">covarianceXsec</a>* splineFDBase::xsec</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to covariance from which we get information about spline params. </p>

<p class="definition">Definition at line <a class="el" href="splineFDBase_8h_source.html#l00080">80</a> of file <a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>splines/<a class="el" href="splineFDBase_8h_source.html">splineFDBase.h</a></li>
<li>splines/<a class="el" href="splineFDBase_8cpp_source.html">splineFDBase.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
