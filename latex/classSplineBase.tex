\hypertarget{classSplineBase}{}\doxysection{Spline\+Base Class Reference}
\label{classSplineBase}\index{SplineBase@{SplineBase}}


Base class for calculating weight from spline.  




{\ttfamily \#include $<$/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/splines/\+Spline\+Base.\+h$>$}



Inheritance diagram for Spline\+Base\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=246pt]{classSplineBase__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSplineBase_aa6965d1522cc68ecf81ac3bfd2dcd6f1}{Spline\+Base}} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classSplineBase_a0de19b2322edb4197380506d594456bd}{$\sim$\+Spline\+Base}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classSplineBase_a86e629f3eef59b2f3800136c86fe90c3}{Evaluate}} ()=0
\begin{DoxyCompactList}\small\item\em CW\+: This Eval should be used when using two separate x,\{y,a,b,c,d\} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations. \end{DoxyCompactList}\item 
virtual std\+::string \mbox{\hyperlink{classSplineBase_a2e1534f622ae1976b21df1ebf984eec5}{Get\+Name}} () const
\begin{DoxyCompactList}\small\item\em Get class name. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classSplineBase_ae18e490295762416c8627d2db11ee98d}{Find\+Spline\+Segment}} ()=0
\begin{DoxyCompactList}\small\item\em CW\+:Code used in step by step reweighting, Find Spline Segment for each param. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classSplineBase_a1ceacf5fee1fc8438501582bef93a9b5}{Calc\+Spline\+Weights}} ()=0
\begin{DoxyCompactList}\small\item\em CPU based code which eval weight for each spline. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classSplineBase_a49665d2712b61b038085d25ace96a568}{Modify\+Weights}} ()=0
\begin{DoxyCompactList}\small\item\em Calc total event weight. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classSplineBase_ac8a5f86ac6f156a7e11ef188b06f425f}{get\+TF1\+Coeff}} (\mbox{\hyperlink{classTF1__red}{TF1\+\_\+red}} $\ast$\&spl, int \&n\+Points, float $\ast$\&coeffs)
\begin{DoxyCompactList}\small\item\em CW\+: Gets the polynomial coefficients for TF1. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Base class for calculating weight from spline. 

Definition at line \mbox{\hyperlink{SplineBase_8h_source_l00028}{28}} of file \mbox{\hyperlink{SplineBase_8h_source}{Spline\+Base.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSplineBase_aa6965d1522cc68ecf81ac3bfd2dcd6f1}\label{classSplineBase_aa6965d1522cc68ecf81ac3bfd2dcd6f1}} 
\index{SplineBase@{SplineBase}!SplineBase@{SplineBase}}
\index{SplineBase@{SplineBase}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{SplineBase()}{SplineBase()}}
{\footnotesize\ttfamily Spline\+Base\+::\+Spline\+Base (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Constructor. 



Definition at line \mbox{\hyperlink{SplineBase_8cpp_source_l00007}{7}} of file \mbox{\hyperlink{SplineBase_8cpp_source}{Spline\+Base.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSplineBase_a0de19b2322edb4197380506d594456bd}\label{classSplineBase_a0de19b2322edb4197380506d594456bd}} 
\index{SplineBase@{SplineBase}!````~SplineBase@{$\sim$SplineBase}}
\index{````~SplineBase@{$\sim$SplineBase}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{$\sim$SplineBase()}{~SplineBase()}}
{\footnotesize\ttfamily Spline\+Base\+::$\sim$\+Spline\+Base (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Destructor. 



Definition at line \mbox{\hyperlink{SplineBase_8cpp_source_l00015}{15}} of file \mbox{\hyperlink{SplineBase_8cpp_source}{Spline\+Base.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classSplineBase_a1ceacf5fee1fc8438501582bef93a9b5}\label{classSplineBase_a1ceacf5fee1fc8438501582bef93a9b5}} 
\index{SplineBase@{SplineBase}!CalcSplineWeights@{CalcSplineWeights}}
\index{CalcSplineWeights@{CalcSplineWeights}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{CalcSplineWeights()}{CalcSplineWeights()}}
{\footnotesize\ttfamily virtual void Spline\+Base\+::\+Calc\+Spline\+Weights (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}



CPU based code which eval weight for each spline. 



Implemented in \mbox{\hyperlink{classsplineFDBase_a9eceab58c0aa06b58eb4e3708c00ee0e}{spline\+FDBase}}, and \mbox{\hyperlink{classSMonolith_aa36be17828281e1412a93c0e239cdbc0}{SMonolith}}.

\mbox{\Hypertarget{classSplineBase_a86e629f3eef59b2f3800136c86fe90c3}\label{classSplineBase_a86e629f3eef59b2f3800136c86fe90c3}} 
\index{SplineBase@{SplineBase}!Evaluate@{Evaluate}}
\index{Evaluate@{Evaluate}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{Evaluate()}{Evaluate()}}
{\footnotesize\ttfamily virtual void Spline\+Base\+::\+Evaluate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



CW\+: This Eval should be used when using two separate x,\{y,a,b,c,d\} arrays to store the weights; probably the best one here! Same thing but pass parameter spline segments instead of variations. 



Implemented in \mbox{\hyperlink{classsplineFDBase_af6e248be25f753c85c4fbf2f3b72cf88}{spline\+FDBase}}, and \mbox{\hyperlink{classSMonolith_a3d1128bb78b165d94721407a124f516b}{SMonolith}}.

\mbox{\Hypertarget{classSplineBase_ae18e490295762416c8627d2db11ee98d}\label{classSplineBase_ae18e490295762416c8627d2db11ee98d}} 
\index{SplineBase@{SplineBase}!FindSplineSegment@{FindSplineSegment}}
\index{FindSplineSegment@{FindSplineSegment}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{FindSplineSegment()}{FindSplineSegment()}}
{\footnotesize\ttfamily virtual void Spline\+Base\+::\+Find\+Spline\+Segment (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}



CW\+:Code used in step by step reweighting, Find Spline Segment for each param. 



Implemented in \mbox{\hyperlink{classsplineFDBase_ab4a852337aab961abbcaa0c9f70c88ba}{spline\+FDBase}}, and \mbox{\hyperlink{classSMonolith_a7128a7c13b10f331df8946a0a87c4b33}{SMonolith}}.

\mbox{\Hypertarget{classSplineBase_a2e1534f622ae1976b21df1ebf984eec5}\label{classSplineBase_a2e1534f622ae1976b21df1ebf984eec5}} 
\index{SplineBase@{SplineBase}!GetName@{GetName}}
\index{GetName@{GetName}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{GetName()}{GetName()}}
{\footnotesize\ttfamily virtual std\+::string Spline\+Base\+::\+Get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Get class name. 



Reimplemented in \mbox{\hyperlink{classSMonolith_ad85cab15f5dfdd47e1123b5bd1815a05}{SMonolith}}.



Definition at line \mbox{\hyperlink{SplineBase_8h_source_l00039}{39}} of file \mbox{\hyperlink{SplineBase_8h_source}{Spline\+Base.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \{\textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}SplineBase"{}};\};}

\end{DoxyCode}
\mbox{\Hypertarget{classSplineBase_ac8a5f86ac6f156a7e11ef188b06f425f}\label{classSplineBase_ac8a5f86ac6f156a7e11ef188b06f425f}} 
\index{SplineBase@{SplineBase}!getTF1Coeff@{getTF1Coeff}}
\index{getTF1Coeff@{getTF1Coeff}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{getTF1Coeff()}{getTF1Coeff()}}
{\footnotesize\ttfamily void Spline\+Base\+::get\+TF1\+Coeff (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classTF1__red}{TF1\+\_\+red}} $\ast$\&}]{spl,  }\item[{int \&}]{n\+Points,  }\item[{float $\ast$\&}]{coeffs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



CW\+: Gets the polynomial coefficients for TF1. 


\begin{DoxyParams}{Parameters}
{\em spl} & pointer to \mbox{\hyperlink{classTF1__red}{TF1\+\_\+red}} that will be checked \\
\hline
{\em n\+Points} & number of knots \\
\hline
{\em coeffs} & Array holding coefficients for each knot \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{SplineBase_8cpp_source_l00025}{25}} of file \mbox{\hyperlink{SplineBase_8cpp_source}{Spline\+Base.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \textcolor{comment}{//\ Initialise\ all\ arrays\ to\ 1.0}}
\DoxyCodeLine{00029\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{SplineCommon_8h_a911160077ffa38727e0494f178ce380a}{\_nTF1Coeff\_}};\ ++i)\ \{}
\DoxyCodeLine{00030\ \ \ \ \ coeffs[i]\ =\ 0.0;}
\DoxyCodeLine{00031\ \ \ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ Get\ number\ of\ points\ in\ spline}}
\DoxyCodeLine{00034\ \ \ nPoints\ =\ spl-\/>\mbox{\hyperlink{classTF1__red_af9e3b0e8d2edad0e7e08f3bf215525c9}{GetSize}}();}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{if}(nPoints\ >\ \mbox{\hyperlink{SplineCommon_8h_a911160077ffa38727e0494f178ce380a}{\_nTF1Coeff\_}})}
\DoxyCodeLine{00037\ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}Too\ big\ number\ of\ points\ for\ TF1"{}});}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMaCh3Exception}{MaCh3Exception}}(\_\_FILE\_\_\ ,\ \_\_LINE\_\_\ );}
\DoxyCodeLine{00040\ \ \ \}}
\DoxyCodeLine{00041\ \ \ \textcolor{comment}{//\ TSpline3\ can\ only\ take\ doubles,\ not\ floats}}
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ But\ our\ GPU\ is\ slow\ with\ doubles,\ so\ need\ to\ cast\ to\ float}}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ nPoints;\ i++)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ coeffs[i]\ =\ float(spl-\/>\mbox{\hyperlink{classTF1__red_ae0385a986d12257d806ba970646d1d15}{GetParameter}}(\mbox{\hyperlink{namespaceM3_adb59b8ecdc4e1b2d5d4c826a13aa7463}{M3::int\_t}}(i)));}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ The\ structure\ is\ now\ coeffs\ \ =\ \{a,b,c,d,e\}}}
\DoxyCodeLine{00047\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSplineBase_a49665d2712b61b038085d25ace96a568}\label{classSplineBase_a49665d2712b61b038085d25ace96a568}} 
\index{SplineBase@{SplineBase}!ModifyWeights@{ModifyWeights}}
\index{ModifyWeights@{ModifyWeights}!SplineBase@{SplineBase}}
\doxysubsubsection{\texorpdfstring{ModifyWeights()}{ModifyWeights()}}
{\footnotesize\ttfamily virtual void Spline\+Base\+::\+Modify\+Weights (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}



Calc total event weight. 



Implemented in \mbox{\hyperlink{classsplineFDBase_a1a237a8b8c3c165c82ebe15d2ca740c7}{spline\+FDBase}}, and \mbox{\hyperlink{classSMonolith_ac37ee525aa57316f652433a4e393afaf}{SMonolith}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/splines/\mbox{\hyperlink{SplineBase_8h}{Spline\+Base.\+h}}\item 
/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/splines/\mbox{\hyperlink{SplineBase_8cpp}{Spline\+Base.\+cpp}}\end{DoxyCompactItemize}
