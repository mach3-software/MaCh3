\hypertarget{ProcessMCMC_8cpp}{}\doxysection{/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/\+Diagnostics/\+Process\+MCMC.cpp File Reference}
\label{ProcessMCMC_8cpp}\index{/home/runner/work/MaCh3/MaCh3/Diagnostics/ProcessMCMC.cpp@{/home/runner/work/MaCh3/MaCh3/Diagnostics/ProcessMCMC.cpp}}
{\ttfamily \#include \char`\"{}mcmc/\+MCMCProcessor.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}manager/manager.\+h\char`\"{}}\newline
Include dependency graph for Process\+MCMC.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ProcessMCMC_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_a52c48199a4bcad577b88768020a91041}{Process\+MCMC}} (const std\+::string \&input\+File)
\begin{DoxyCompactList}\small\item\em Main function processing MCMC and Producing plots. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_a83be70750a728e4deae518ea3ffaf388}{Multiple\+Process\+MCMC}} ()
\begin{DoxyCompactList}\small\item\em Function producing comparison of posterior and more betwen a few MCMC chains. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_ac5381031738b5fa6481d7ac33d2ad854}{Calc\+Bayes\+Factor}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor)
\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_af772f7bdfdba080075141597e9c99f79}{Calc\+Savage\+Dickey}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor)
\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_a2d9c3cc52d1f5c3cc3e0775ae596e9c7}{Calc\+Bipolar\+Plot}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor)
\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_a32bb8e776bea9a8b778cfece3200932c}{Calc\+Parameter\+Evolution}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor)
\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_a02c2311b736096adc8525876c0ec1487}{Get\+Triangle\+Plot}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor)
\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_a08adc262bf03d1cb8df996b39404572c}{Diagnose\+Covariance\+Matrix}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor, const std\+::string \&input\+File)
\begin{DoxyCompactList}\small\item\em KS\+: You validate stability of posterior covariance matrix, you set burn calc cov matrix increase burn calc again and compare. By performing such operation several hundred times we can check when matrix becomes stable. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_abbd13994de9f24524b06b19aa901d73f}{Reweight\+Prior}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$Processor)
\item 
TH2D $\ast$ \mbox{\hyperlink{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}{TMatrix\+Into\+TH2D}} (TMatrix\+DSym $\ast$Matrix, const std\+::string \&title)
\begin{DoxyCompactList}\small\item\em KS\+: Convert TMatrix to TH2D, mostly useful for making fancy plots. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ProcessMCMC_8cpp_aece705f01f7c21ad0d0f5f9f64af6d0d}{Kolmogorov\+Smirnov\+Test}} (\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$$\ast$Processor, TCanvas $\ast$Posterior, TString canvasname)
\begin{DoxyCompactList}\small\item\em KS\+: Perform KS test to check if two posteriors for the same parameter came from the same distribution. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{ProcessMCMC_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{n\+Files}}
\item 
std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{File\+Names}}
\item 
std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}{Title\+Names}}
\item 
std\+::string \mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ProcessMCMC_8cpp_ac5381031738b5fa6481d7ac33d2ad854}\label{ProcessMCMC_8cpp_ac5381031738b5fa6481d7ac33d2ad854}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!CalcBayesFactor@{CalcBayesFactor}}
\index{CalcBayesFactor@{CalcBayesFactor}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{CalcBayesFactor()}{CalcBayesFactor()}}
{\footnotesize\ttfamily void Calc\+Bayes\+Factor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00325}{325}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00326\ \{}
\DoxyCodeLine{00327\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00328\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \ \ std::vector<std::string>\ ParNames;}
\DoxyCodeLine{00331\ \ \ std::vector<std::vector<double>>\ Model1Bounds;}
\DoxyCodeLine{00332\ \ \ std::vector<std::vector<double>>\ Model2Bounds;}
\DoxyCodeLine{00333\ \ \ std::vector<std::vector<std::string>>\ ModelNames;}
\DoxyCodeLine{00334\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ dg\ :\ Settings[\textcolor{stringliteral}{"{}BayesFactor"{}}])}
\DoxyCodeLine{00335\ \ \ \{}
\DoxyCodeLine{00336\ \ \ \ \ ParNames.push\_back(dg[0].as<std::string>());}
\DoxyCodeLine{00337\ \ \ \ \ ModelNames.push\_back(dg[1].as<std::vector<std::string>>());}
\DoxyCodeLine{00338\ \ \ \ \ Model1Bounds.push\_back(dg[2].as<std::vector<double>>());}
\DoxyCodeLine{00339\ \ \ \ \ Model2Bounds.push\_back(dg[3].as<std::vector<double>>());}
\DoxyCodeLine{00340\ \ \ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a1fc5adc3c109227e6ead71eb0746ec4d}{GetBayesFactor}}(ParNames,\ Model1Bounds,\ Model2Bounds,\ ModelNames);}
\DoxyCodeLine{00343\ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00344\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a2d9c3cc52d1f5c3cc3e0775ae596e9c7}\label{ProcessMCMC_8cpp_a2d9c3cc52d1f5c3cc3e0775ae596e9c7}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!CalcBipolarPlot@{CalcBipolarPlot}}
\index{CalcBipolarPlot@{CalcBipolarPlot}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{CalcBipolarPlot()}{CalcBipolarPlot()}}
{\footnotesize\ttfamily void Calc\+Bipolar\+Plot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00383}{383}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00384\ \{}
\DoxyCodeLine{00385\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00386\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ std::vector<std::string>\ ParNames;}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ d\ :\ Settings[\textcolor{stringliteral}{"{}BipolarPlot"{}}])}
\DoxyCodeLine{00391\ \ \ \{}
\DoxyCodeLine{00392\ \ \ \ \ ParNames.push\_back(d[0].as<std::string>());}
\DoxyCodeLine{00393\ \ \ \}}
\DoxyCodeLine{00394\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ac358c3ffe7c060e8872c762259973c6b}{GetPolarPlot}}(ParNames);}
\DoxyCodeLine{00395\ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00396\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a32bb8e776bea9a8b778cfece3200932c}\label{ProcessMCMC_8cpp_a32bb8e776bea9a8b778cfece3200932c}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!CalcParameterEvolution@{CalcParameterEvolution}}
\index{CalcParameterEvolution@{CalcParameterEvolution}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{CalcParameterEvolution()}{CalcParameterEvolution()}}
{\footnotesize\ttfamily void Calc\+Parameter\+Evolution (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00366}{366}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00367\ \{}
\DoxyCodeLine{00368\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00369\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ std::vector<std::string>\ ParNames;}
\DoxyCodeLine{00372\ \ \ std::vector<int>\ Intervals;}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ d\ :\ Settings[\textcolor{stringliteral}{"{}ParameterEvolution"{}}])}
\DoxyCodeLine{00375\ \ \ \{}
\DoxyCodeLine{00376\ \ \ \ \ ParNames.push\_back(d[0].as<std::string>());}
\DoxyCodeLine{00377\ \ \ \ \ Intervals.push\_back(d[1].as<int>());}
\DoxyCodeLine{00378\ \ \ \}}
\DoxyCodeLine{00379\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ac9a5fc93b5ac3f6ef7850d21f47fd5dd}{ParameterEvolution}}(ParNames,\ Intervals);}
\DoxyCodeLine{00380\ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00381\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_af772f7bdfdba080075141597e9c99f79}\label{ProcessMCMC_8cpp_af772f7bdfdba080075141597e9c99f79}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!CalcSavageDickey@{CalcSavageDickey}}
\index{CalcSavageDickey@{CalcSavageDickey}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{CalcSavageDickey()}{CalcSavageDickey()}}
{\footnotesize\ttfamily void Calc\+Savage\+Dickey (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00346}{346}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00347\ \{}
\DoxyCodeLine{00348\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00349\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ std::vector<std::string>\ ParNames;}
\DoxyCodeLine{00352\ \ \ std::vector<double>\ EvaluationPoint;}
\DoxyCodeLine{00353\ \ \ std::vector<std::vector<double>>\ Bounds;}
\DoxyCodeLine{00354\ \ \ }
\DoxyCodeLine{00355\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ d\ :\ Settings[\textcolor{stringliteral}{"{}SavageDickey"{}}])}
\DoxyCodeLine{00356\ \ \ \{}
\DoxyCodeLine{00357\ \ \ \ \ ParNames.push\_back(d[0].as<std::string>());}
\DoxyCodeLine{00358\ \ \ \ \ EvaluationPoint.push\_back(d[1].as<double>());}
\DoxyCodeLine{00359\ \ \ \ \ Bounds.push\_back(d[2].as<std::vector<double>>());}
\DoxyCodeLine{00360\ \ \ \}}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ad09b1ad60fa52fdd87450ab8834e9cd9}{GetSavageDickey}}(ParNames,\ EvaluationPoint,\ Bounds);}
\DoxyCodeLine{00363\ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00364\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a08adc262bf03d1cb8df996b39404572c}\label{ProcessMCMC_8cpp_a08adc262bf03d1cb8df996b39404572c}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!DiagnoseCovarianceMatrix@{DiagnoseCovarianceMatrix}}
\index{DiagnoseCovarianceMatrix@{DiagnoseCovarianceMatrix}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{DiagnoseCovarianceMatrix()}{DiagnoseCovarianceMatrix()}}
{\footnotesize\ttfamily void Diagnose\+Covariance\+Matrix (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor,  }\item[{const std\+::string \&}]{input\+File }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



KS\+: You validate stability of posterior covariance matrix, you set burn calc cov matrix increase burn calc again and compare. By performing such operation several hundred times we can check when matrix becomes stable. 



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00419}{419}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00420\ \{}
\DoxyCodeLine{00421\ \ \ \textcolor{comment}{//Turn\ of\ plots\ from\ Processor}}
\DoxyCodeLine{00422\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a9db87211d9f066011daed18af7f4631e}{SetPrintToPDF}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00423\ \ \ \textcolor{comment}{//\ Open\ a\ TCanvas\ to\ write\ the\ posterior\ onto}}
\DoxyCodeLine{00424\ \ \ TCanvas*\ Canvas\ =\ \textcolor{keyword}{new}\ TCanvas(\textcolor{stringliteral}{"{}Canvas"{}},\ \textcolor{stringliteral}{"{}Canvas"{}},\ 0,\ 0,\ 1024,\ 1024);}
\DoxyCodeLine{00425\ \ \ Canvas-\/>SetGrid();}
\DoxyCodeLine{00426\ \ \ gStyle-\/>SetOptStat(0);}
\DoxyCodeLine{00427\ \ \ gStyle-\/>SetOptTitle(0);}
\DoxyCodeLine{00428\ \ \ Canvas-\/>SetTickx();}
\DoxyCodeLine{00429\ \ \ Canvas-\/>SetTicky();}
\DoxyCodeLine{00430\ \ \ Canvas-\/>SetBottomMargin(0.1f);}
\DoxyCodeLine{00431\ \ \ Canvas-\/>SetTopMargin(0.05f);}
\DoxyCodeLine{00432\ \ \ Canvas-\/>SetRightMargin(0.15f);}
\DoxyCodeLine{00433\ \ \ Canvas-\/>SetLeftMargin(0.10f);}
\DoxyCodeLine{00434\ \ \ }
\DoxyCodeLine{00435\ \ \ \textcolor{comment}{//KS:\ Fancy\ colours}}
\DoxyCodeLine{00436\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NRGBs\ =\ 10;}
\DoxyCodeLine{00437\ \ \ TColor::InitializeColors();}
\DoxyCodeLine{00438\ \ \ Double\_t\ stops[NRGBs]\ =\ \{\ 0.00,\ 0.10,\ 0.25,\ 0.35,\ 0.50,\ 0.60,\ 0.65,\ 0.75,\ 0.90,\ 1.00\ \};}
\DoxyCodeLine{00439\ \ \ Double\_t\ red[NRGBs]\ \ \ =\ \{\ 0.50,\ 1.00,\ 1.00,\ 0.25,\ 0.00,\ 0.10,\ 0.50,\ 1.00,\ 0.75,\ 0.55\ \};}
\DoxyCodeLine{00440\ \ \ Double\_t\ green[NRGBs]\ =\ \{\ 0.00,\ 0.25,\ 1.00,\ 0.25,\ 0.00,\ 0.60,\ 0.90,\ 1.00,\ 0.75,\ 0.75\ \};}
\DoxyCodeLine{00441\ \ \ Double\_t\ blue[NRGBs]\ \ =\ \{\ 0.00,\ 0.25,\ 1.00,\ 1.00,\ 0.50,\ 0.60,\ 0.90,\ 1.00,\ 0.05,\ 0.05\ \};}
\DoxyCodeLine{00442\ \ \ TColor::CreateGradientColorTable(NRGBs,\ stops,\ red,\ green,\ blue,\ 255);}
\DoxyCodeLine{00443\ \ \ gStyle-\/>SetNumberContours(255);}
\DoxyCodeLine{00444\ \ \ }
\DoxyCodeLine{00445\ \ \ std::string\ OutName\ =\ inputFile;}
\DoxyCodeLine{00446\ \ \ OutName\ =\ OutName.substr(0,\ OutName.find(\textcolor{stringliteral}{"{}.root"{}}));}
\DoxyCodeLine{00447\ \ \ Canvas-\/>Print(Form(\textcolor{stringliteral}{"{}Correlation\_\%s.pdf["{}},\ OutName.c\_str()),\ \textcolor{stringliteral}{"{}pdf"{}});}
\DoxyCodeLine{00448\ \ \ Canvas-\/>Print(Form(\textcolor{stringliteral}{"{}Covariance\_\%s.pdf["{}},\ OutName.c\_str()),\ \textcolor{stringliteral}{"{}pdf"{}});}
\DoxyCodeLine{00449\ \ \ }
\DoxyCodeLine{00450\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00451\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ entries\ =\ int(Processor-\/>\mbox{\hyperlink{classMCMCProcessor_aa2ebe9262f7f28778d92148164a54d4b}{GetnSteps}}());}
\DoxyCodeLine{00454\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NIntervals\ =\ GetFromManager<int>(Settings[\textcolor{stringliteral}{"{}NIntervals"{}}],\ 5);}
\DoxyCodeLine{00455\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ IntervalsSize\ =\ entries/NIntervals;}
\DoxyCodeLine{00456\ \ \ \textcolor{comment}{//We\ start\ with\ burn\ from\ 0\ (no\ burn\ in\ at\ all)}}
\DoxyCodeLine{00457\ \ \ \textcolor{keywordtype}{int}\ BurnIn\ =\ 0;}
\DoxyCodeLine{00458\ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}Diagnosing\ matrices\ with\ entries=\{\},\ NIntervals=\{\}\ and\ IntervalsSize=\{\}"{}},\ entries,\ NIntervals,\ IntervalsSize);}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ TMatrixDSym\ *Covariance\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00461\ \ \ TMatrixDSym\ *Correlation\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00462\ \ \ }
\DoxyCodeLine{00463\ \ \ TH2D\ *CovariancePreviousHist\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00464\ \ \ TH2D\ *CorrelationPreviousHist\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ TH2D\ *CovarianceHist\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00467\ \ \ TH2D\ *CorrelationHist\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00469\ \ \ \textcolor{comment}{//KS:\ Get\ first\ covariances,\ we\ need\ two\ for\ comparison...}}
\DoxyCodeLine{00470\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ad610d8e835031872b428e759ef4045f1}{SetStepCut}}(BurnIn);}
\DoxyCodeLine{00471\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ac9e4fdea5d2de92a1abad5b79b7daf88}{GetCovariance}}(Covariance,\ Correlation);}
\DoxyCodeLine{00472\ \ \ }
\DoxyCodeLine{00473\ \ \ CovariancePreviousHist\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}{TMatrixIntoTH2D}}(Covariance,\ \textcolor{stringliteral}{"{}Covariance"{}});\ }
\DoxyCodeLine{00474\ \ \ CorrelationPreviousHist\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}{TMatrixIntoTH2D}}(Correlation,\ \textcolor{stringliteral}{"{}Correlation"{}});}
\DoxyCodeLine{00475\ \ \ \ \ \ \ }
\DoxyCodeLine{00476\ \ \ \textcolor{keyword}{delete}\ Covariance;}
\DoxyCodeLine{00477\ \ \ Covariance\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00478\ \ \ \textcolor{keyword}{delete}\ Correlation;}
\DoxyCodeLine{00479\ \ \ Correlation\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00480\ \ \ }
\DoxyCodeLine{00481\ \ \ \textcolor{comment}{//KS:\ Loop\ over\ all\ desired\ cuts}}
\DoxyCodeLine{00482\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ k\ =\ 1;\ k\ <\ NIntervals;\ ++k)}
\DoxyCodeLine{00483\ \ \ \{}
\DoxyCodeLine{00484\ \ \ \ \ BurnIn\ =\ k*IntervalsSize;}
\DoxyCodeLine{00485\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ad610d8e835031872b428e759ef4045f1}{SetStepCut}}(BurnIn);}
\DoxyCodeLine{00486\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ac9e4fdea5d2de92a1abad5b79b7daf88}{GetCovariance}}(Covariance,\ Correlation);}
\DoxyCodeLine{00487\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a36441ec3d5b0e24e48040282ffcda3eb}{ResetHistograms}}();}
\DoxyCodeLine{00488\ \ \ \ \ }
\DoxyCodeLine{00489\ \ \ \ \ CovarianceHist\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}{TMatrixIntoTH2D}}(Covariance,\ \textcolor{stringliteral}{"{}Covariance"{}});\ }
\DoxyCodeLine{00490\ \ \ \ \ CorrelationHist\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}{TMatrixIntoTH2D}}(Correlation,\ \textcolor{stringliteral}{"{}Correlation"{}});}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00492\ \ \ \ \ TH2D\ *CovarianceDiff\ =\ \textcolor{keyword}{static\_cast<}TH2D*\textcolor{keyword}{>}(CovarianceHist-\/>Clone(\textcolor{stringliteral}{"{}Covariance\_Ratio"{}}));}
\DoxyCodeLine{00493\ \ \ \ \ TH2D\ *CorrelationDiff\ =\ \textcolor{keyword}{static\_cast<}TH2D*\textcolor{keyword}{>}(CorrelationHist-\/>Clone(\textcolor{stringliteral}{"{}Correlation\_Ratio"{}}));}
\DoxyCodeLine{00494\ \ \ \ \ }
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{comment}{//KS:\ Bit\ messy\ but\ quite\ often\ covariance\ is\ 0\ is\ divided\ by\ 0\ is\ problematic\ so}}
\DoxyCodeLine{00496\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ MULTITHREAD}}
\DoxyCodeLine{00497\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ omp\ parallel\ for}}
\DoxyCodeLine{00498\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 1;\ j\ <\ CovarianceDiff-\/>GetXaxis()-\/>GetNbins()+1;\ ++j)}
\DoxyCodeLine{00500\ \ \ \ \ \{}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ CovarianceDiff-\/>GetYaxis()-\/>GetNbins()+1;\ ++i)}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ std::fabs\ (CovarianceDiff-\/>GetBinContent(j,\ i))\ <\ 1.e-\/5\ \&\&\ std::fabs\ (CovariancePreviousHist-\/>GetBinContent(j,\ i))\ <\ 1.e-\/5)}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ CovarianceDiff-\/>SetBinContent(j,\ i,\ \mbox{\hyperlink{MCMCProcessor_8h_a82a6d79039474bc403b627437a7b97ec}{\_UNDEF\_}});}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ CovariancePreviousHist-\/>SetBinContent(j,\ i,\ \mbox{\hyperlink{MCMCProcessor_8h_a82a6d79039474bc403b627437a7b97ec}{\_UNDEF\_}});}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ std::fabs\ (CorrelationDiff-\/>GetBinContent(j,\ i))\ <\ 1.e-\/5\ \&\&\ std::fabs\ (CorrelationPreviousHist-\/>GetBinContent(j,\ i))\ <\ 1.e-\/5)}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ CorrelationDiff-\/>SetBinContent(j,\ i,\ \mbox{\hyperlink{MCMCProcessor_8h_a82a6d79039474bc403b627437a7b97ec}{\_UNDEF\_}});}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ CorrelationPreviousHist-\/>SetBinContent(j,\ i,\ \mbox{\hyperlink{MCMCProcessor_8h_a82a6d79039474bc403b627437a7b97ec}{\_UNDEF\_}});}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00514\ \ \ \ \ \}}
\DoxyCodeLine{00515\ \ \ \ \ \textcolor{comment}{//Divide\ matrices}}
\DoxyCodeLine{00516\ \ \ \ \ CovarianceDiff-\/>Divide(CovariancePreviousHist);}
\DoxyCodeLine{00517\ \ \ \ \ CorrelationDiff-\/>Divide(CorrelationPreviousHist);}
\DoxyCodeLine{00518\ \ \ \ \ }
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{comment}{//Now\ it\ is\ time\ for\ fancy\ names\ etc.}}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ CovarianceDiff-\/>GetXaxis()-\/>GetNbins();\ ++j)}
\DoxyCodeLine{00521\ \ \ \ \ \{}
\DoxyCodeLine{00522\ \ \ \ \ \ \ TString\ Title\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ Prior\ =\ 1.0;}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ PriorError\ =\ 1.0;}
\DoxyCodeLine{00525\ \ \ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a28dfe42f1bf6fd3a145287be1e63fb0b}{GetNthParameter}}(j,\ Prior,\ PriorError,\ Title);}
\DoxyCodeLine{00527\ \ \ \ \ \ \ }
\DoxyCodeLine{00528\ \ \ \ \ \ \ CovarianceDiff-\/>GetXaxis()-\/>SetBinLabel(j+1,\ Title);}
\DoxyCodeLine{00529\ \ \ \ \ \ \ CovarianceDiff-\/>GetYaxis()-\/>SetBinLabel(j+1,\ Title);}
\DoxyCodeLine{00530\ \ \ \ \ \ \ CorrelationDiff-\/>GetXaxis()-\/>SetBinLabel(j+1,\ Title);}
\DoxyCodeLine{00531\ \ \ \ \ \ \ CorrelationDiff-\/>GetYaxis()-\/>SetBinLabel(j+1,\ Title);}
\DoxyCodeLine{00532\ \ \ \ \ \}}
\DoxyCodeLine{00533\ \ \ \ \ CovarianceDiff-\/>GetXaxis()-\/>SetLabelSize(0.015f);}
\DoxyCodeLine{00534\ \ \ \ \ CovarianceDiff-\/>GetYaxis()-\/>SetLabelSize(0.015f);}
\DoxyCodeLine{00535\ \ \ \ \ CorrelationDiff-\/>GetXaxis()-\/>SetLabelSize(0.015f);}
\DoxyCodeLine{00536\ \ \ \ \ CorrelationDiff-\/>GetYaxis()-\/>SetLabelSize(0.015f);}
\DoxyCodeLine{00537\ \ \ \ \ }
\DoxyCodeLine{00538\ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{00539\ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}BCut\_"{}};}
\DoxyCodeLine{00540\ \ \ \ \ ss\ <<\ BurnIn;}
\DoxyCodeLine{00541\ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{00542\ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}BCut\_"{}};}
\DoxyCodeLine{00543\ \ \ \ \ ss\ <<\ (k-\/1)*IntervalsSize;}
\DoxyCodeLine{00544\ \ \ \ \ std::string\ str\ =\ ss.str();}
\DoxyCodeLine{00545\ \ \ \ \ }
\DoxyCodeLine{00546\ \ \ \ \ TString\ Title\ =\ \textcolor{stringliteral}{"{}Cov\ "{}}\ +\ str;}
\DoxyCodeLine{00547\ \ \ \ \ CovarianceDiff-\/>GetZaxis()-\/>SetTitle(\ Title\ );}
\DoxyCodeLine{00548\ \ \ \ \ Title\ =\ \textcolor{stringliteral}{"{}Corr\ "{}}\ +\ str;}
\DoxyCodeLine{00549\ \ \ \ \ CorrelationDiff-\/>GetZaxis()-\/>SetTitle(Title);}
\DoxyCodeLine{00550\ \ \ \ \ }
\DoxyCodeLine{00551\ \ \ \ \ CovarianceDiff-\/>SetMinimum(-\/2);}
\DoxyCodeLine{00552\ \ \ \ \ CovarianceDiff-\/>SetMaximum(2);}
\DoxyCodeLine{00553\ \ \ \ \ CorrelationDiff-\/>SetMinimum(-\/2);}
\DoxyCodeLine{00554\ \ \ \ \ CorrelationDiff-\/>SetMaximum(2);}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ Canvas-\/>cd();}
\DoxyCodeLine{00557\ \ \ \ \ CovarianceDiff-\/>Draw(\textcolor{stringliteral}{"{}colz"{}});}
\DoxyCodeLine{00558\ \ \ \ \ Canvas-\/>Print(Form(\textcolor{stringliteral}{"{}Covariance\_\%s.pdf"{}},\ OutName.c\_str()),\ \textcolor{stringliteral}{"{}pdf"{}});}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ CorrelationDiff-\/>Draw(\textcolor{stringliteral}{"{}colz"{}});}
\DoxyCodeLine{00561\ \ \ \ \ Canvas-\/>Print(Form(\textcolor{stringliteral}{"{}Correlation\_\%s.pdf"{}},\ OutName.c\_str()),\ \textcolor{stringliteral}{"{}pdf"{}});}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00563\ \ \ \ \ \textcolor{comment}{//KS:\ Current\ hist\ become\ previous\ as\ we\ need\ it\ for\ further\ comparison}}
\DoxyCodeLine{00564\ \ \ \ \ \textcolor{keyword}{delete}\ CovariancePreviousHist;}
\DoxyCodeLine{00565\ \ \ \ \ CovariancePreviousHist\ =\ \textcolor{keyword}{static\_cast<}TH2D*\textcolor{keyword}{>}(CovarianceHist-\/>Clone());}
\DoxyCodeLine{00566\ \ \ \ \ \textcolor{keyword}{delete}\ CorrelationPreviousHist;}
\DoxyCodeLine{00567\ \ \ \ \ CorrelationPreviousHist\ =\ \textcolor{keyword}{static\_cast<}TH2D*\textcolor{keyword}{>}(CorrelationHist-\/>Clone());}
\DoxyCodeLine{00568\ \ \ \ \ }
\DoxyCodeLine{00569\ \ \ \ \ \textcolor{keyword}{delete}\ CovarianceHist;}
\DoxyCodeLine{00570\ \ \ \ \ CovarianceHist\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00571\ \ \ \ \ \textcolor{keyword}{delete}\ CorrelationHist;}
\DoxyCodeLine{00572\ \ \ \ \ CorrelationHist\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00573\ \ \ \ \ }
\DoxyCodeLine{00574\ \ \ \ \ \textcolor{keyword}{delete}\ CovarianceDiff;}
\DoxyCodeLine{00575\ \ \ \ \ \textcolor{keyword}{delete}\ CorrelationDiff;}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keyword}{delete}\ Covariance;}
\DoxyCodeLine{00577\ \ \ \ \ Covariance\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keyword}{delete}\ Correlation;}
\DoxyCodeLine{00579\ \ \ \ \ Correlation\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00580\ \ \ \}}
\DoxyCodeLine{00581\ \ \ Canvas-\/>cd();}
\DoxyCodeLine{00582\ \ \ Canvas-\/>Print(Form(\textcolor{stringliteral}{"{}Covariance\_\%s.pdf]"{}},\ OutName.c\_str()),\ \textcolor{stringliteral}{"{}pdf"{}});}
\DoxyCodeLine{00583\ \ \ Canvas-\/>Print(Form(\textcolor{stringliteral}{"{}Correlation\_\%s.pdf]"{}},\ OutName.c\_str()),\ \textcolor{stringliteral}{"{}pdf"{}});}
\DoxyCodeLine{00584\ \ \ }
\DoxyCodeLine{00585\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a9db87211d9f066011daed18af7f4631e}{SetPrintToPDF}}(\textcolor{keyword}{true});}
\DoxyCodeLine{00586\ \ \ \textcolor{keywordflow}{if}(Covariance\ !=\ \textcolor{keyword}{nullptr})\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ Covariance;}
\DoxyCodeLine{00587\ \ \ \textcolor{keywordflow}{if}(Correlation\ !=\ \textcolor{keyword}{nullptr})\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ Correlation;}
\DoxyCodeLine{00588\ \ \ \textcolor{keywordflow}{if}(CovariancePreviousHist\ !=\ \textcolor{keyword}{nullptr})\ \ \textcolor{keyword}{delete}\ CovariancePreviousHist;}
\DoxyCodeLine{00589\ \ \ \textcolor{keywordflow}{if}(CorrelationPreviousHist\ !=\ \textcolor{keyword}{nullptr})\ \textcolor{keyword}{delete}\ CorrelationPreviousHist;}
\DoxyCodeLine{00590\ \ \ \textcolor{keywordflow}{if}(CovarianceHist\ !=\ \textcolor{keyword}{nullptr})\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ CovarianceHist;}
\DoxyCodeLine{00591\ \ \ \textcolor{keywordflow}{if}(CorrelationHist\ !=\ \textcolor{keyword}{nullptr})\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ CorrelationHist;}
\DoxyCodeLine{00592\ \ \ \textcolor{keyword}{delete}\ Canvas;}
\DoxyCodeLine{00593\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a02c2311b736096adc8525876c0ec1487}\label{ProcessMCMC_8cpp_a02c2311b736096adc8525876c0ec1487}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!GetTrianglePlot@{GetTrianglePlot}}
\index{GetTrianglePlot@{GetTrianglePlot}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{GetTrianglePlot()}{GetTrianglePlot()}}
{\footnotesize\ttfamily void Get\+Triangle\+Plot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00399}{399}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00400\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00401\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ dg\ :\ Settings[\textcolor{stringliteral}{"{}TrianglePlot"{}}])}
\DoxyCodeLine{00404\ \ \ \{}
\DoxyCodeLine{00405\ \ \ \ \ std::string\ ParName\ =\ dg[0].as<std::string>();}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \ \ std::vector<std::string>\ NameVec\ =\ dg[1].as<std::vector<std::string>>();}
\DoxyCodeLine{00408\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a3ae80722efa0c94eec066ee91f3cf997}{MakeTrianglePlot}}(NameVec,}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<double>>(Settings[\textcolor{stringliteral}{"{}CredibleIntervals"{}}],\ \{0.99,\ 0.90,\ 0.68\}),}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<short\ int>>(Settings[\textcolor{stringliteral}{"{}CredibleIntervalsColours"{}}],\ \{436,\ 430,\ 422\}),}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<double>>(Settings[\textcolor{stringliteral}{"{}CredibleRegions"{}}],\ \{0.99,\ 0.90,\ 0.68\}),}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<short\ int>>(Settings[\textcolor{stringliteral}{"{}CredibleRegionStyle"{}}],\ \{2,\ 1,\ 3\}),}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<short\ int>>(Settings[\textcolor{stringliteral}{"{}CredibleRegionColor"{}}],\ \{413,\ 406,\ 416\}),}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CredibleInSigmas"{}}],\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00415\ \ \ \}}
\DoxyCodeLine{00416\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_aece705f01f7c21ad0d0f5f9f64af6d0d}\label{ProcessMCMC_8cpp_aece705f01f7c21ad0d0f5f9f64af6d0d}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!KolmogorovSmirnovTest@{KolmogorovSmirnovTest}}
\index{KolmogorovSmirnovTest@{KolmogorovSmirnovTest}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{KolmogorovSmirnovTest()}{KolmogorovSmirnovTest()}}
{\footnotesize\ttfamily void Kolmogorov\+Smirnov\+Test (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$$\ast$}]{Processor,  }\item[{TCanvas $\ast$}]{Posterior,  }\item[{TString}]{canvasname }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



KS\+: Perform KS test to check if two posteriors for the same parameter came from the same distribution. 



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00626}{626}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00627\ \{}
\DoxyCodeLine{00628\ \ \ \textcolor{keyword}{const}\ Color\_t\ CumulativeColor[]\ =\ \{kBlue-\/1,\ kRed,\ kGreen+2\};}
\DoxyCodeLine{00629\ \ \ \textcolor{keyword}{const}\ Style\_t\ CumulativeStyle[]\ =\ \{kSolid,\ kDashed,\ kDotted\};}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ Processor[0]-\/>\mbox{\hyperlink{classMCMCProcessor_adbde2f115d983b233d0a9ea896187586}{GetNParams}}();\ ++i)\ }
\DoxyCodeLine{00632\ \ \ \{}
\DoxyCodeLine{00633\ \ \ \ \ \textcolor{comment}{//\ This\ holds\ the\ posterior\ density}}
\DoxyCodeLine{00634\ \ \ \ \ TH1D\ **hpost\ =\ \textcolor{keyword}{new}\ TH1D*[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00635\ \ \ \ \ TH1D\ **CumulativeDistribution\ =\ \textcolor{keyword}{new}\ TH1D*[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00637\ \ \ \ \ TString\ Title;}
\DoxyCodeLine{00638\ \ \ \ \ \textcolor{keywordtype}{double}\ Prior\ =\ 1.0;}
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keywordtype}{double}\ PriorError\ =\ 1.0;}
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00641\ \ \ \ \ Processor[0]-\/>\mbox{\hyperlink{classMCMCProcessor_a28dfe42f1bf6fd3a145287be1e63fb0b}{GetNthParameter}}(i,\ Prior,\ PriorError,\ Title);}
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keywordtype}{bool}\ Skip\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00644\ \ \ \ \ \{}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ Index\ =\ 0;}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(ik\ ==\ 0\ )\ Index\ =\ i;}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ KS:\ If\ somehow\ this\ chain\ doesn't\ given\ params\ we\ skip\ it}}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ Index\ =\ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a5ab91183fbbf23fff759fefc9954a1a5}{GetParamIndexFromName}}(hpost[0]-\/>GetTitle());}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(Index\ ==\ \mbox{\hyperlink{MCMCProcessor_8h_a82a6d79039474bc403b627437a7b97ec}{\_UNDEF\_}})}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ Skip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00657\ \ \ \ \ \ \ hpost[ik]\ =\ \textcolor{keyword}{static\_cast<}TH1D*\textcolor{keyword}{>}(Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a70f5590946414af43c3b6c3a5cd315de}{GetHpost}}(Index)-\/>Clone());}
\DoxyCodeLine{00658\ \ \ \ \ \ \ CumulativeDistribution[ik]\ =\ \textcolor{keyword}{static\_cast<}TH1D*\textcolor{keyword}{>}(Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a70f5590946414af43c3b6c3a5cd315de}{GetHpost}}(Index)-\/>Clone());}
\DoxyCodeLine{00659\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>Fill(0.,\ 0.);}
\DoxyCodeLine{00660\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>Reset();}
\DoxyCodeLine{00661\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetMaximum(1.);}
\DoxyCodeLine{00662\ \ \ \ \ \ \ TString\ TempTittle\ =\ Title+\textcolor{stringliteral}{"{}\ Kolmogorov\ Smirnov"{}};}
\DoxyCodeLine{00663\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetTitle(TempTittle);}
\DoxyCodeLine{00664\ \ \ \ \ \ \ }
\DoxyCodeLine{00665\ \ \ \ \ \ \ TempTittle\ =\ Title+\textcolor{stringliteral}{"{}\ Value"{}};}
\DoxyCodeLine{00666\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>GetXaxis()-\/>SetTitle(TempTittle);}
\DoxyCodeLine{00667\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>GetYaxis()-\/>SetTitle(\textcolor{stringliteral}{"{}Cumulative\ Probability"{}});}
\DoxyCodeLine{00668\ \ \ \ \ \ \ }
\DoxyCodeLine{00669\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetLineWidth(2);}
\DoxyCodeLine{00670\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetLineColor(CumulativeColor[ik]);}
\DoxyCodeLine{00671\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetLineStyle(CumulativeStyle[ik]);}
\DoxyCodeLine{00672\ \ \ \ \ \}}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00674\ \ \ \ \ \textcolor{comment}{//\ Don't\ plot\ if\ this\ is\ a\ fixed\ histogram\ (i.e.\ the\ peak\ is\ the\ whole\ integral)}}
\DoxyCodeLine{00675\ \ \ \ \ \textcolor{keywordflow}{if}(hpost[0]-\/>GetMaximum()\ ==\ hpost[0]-\/>Integral()*1.5\ ||\ Skip)}
\DoxyCodeLine{00676\ \ \ \ \ \{}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ hpost[ik];}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ CumulativeDistribution[ik];}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ hpost;}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ CumulativeDistribution;}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00685\ \ \ \ \ \}}
\DoxyCodeLine{00686\ \ \ \ \ }
\DoxyCodeLine{00687\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00688\ \ \ \ \ \{}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NumberOfBins\ =\ hpost[ik]-\/>GetXaxis()-\/>GetNbins();}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ Cumulative\ =\ 0;}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ Integral\ =\ hpost[ik]-\/>Integral();}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 1;\ j\ <\ NumberOfBins+1;\ ++j)}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ Cumulative\ +=\ hpost[ik]-\/>GetBinContent(j)/Integral;}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetBinContent(j,\ Cumulative);}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \textcolor{comment}{//KS:\ Set\ overflow\ to\ 1\ just\ in\ case}}
\DoxyCodeLine{00698\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>SetBinContent(NumberOfBins+1,\ 1.);}
\DoxyCodeLine{00699\ \ \ \ \ \}}
\DoxyCodeLine{00700\ \ \ \ \ }
\DoxyCodeLine{00701\ \ \ \ \ \textcolor{keywordtype}{int}*\ TestStatBin\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00702\ \ \ \ \ \textcolor{keywordtype}{double}*\ TestStatD\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{double}[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00703\ \ \ \ \ TLine\ **LineD\ =\ \textcolor{keyword}{new}\ TLine*[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00704\ }
\DoxyCodeLine{00705\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)\ \{\ TestStatBin[ik]\ =\ 0;\ TestStatD[ik]\ =\ -\/999;\}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \textcolor{comment}{//Find\ KS\ statistic}}
\DoxyCodeLine{00708\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 1\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00709\ \ \ \ \ \{}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NumberOfBins\ =\ CumulativeDistribution[0]-\/>GetXaxis()-\/>GetNbins();}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 1;\ j\ <\ NumberOfBins+1;\ ++j)}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ BinValue\ =\ CumulativeDistribution[0]-\/>GetBinCenter(j);}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ BinNumber\ =\ CumulativeDistribution[ik]-\/>FindBin(BinValue);}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \textcolor{comment}{//KS:\ Calculate\ D\ statistic\ for\ this\ bin,\ only\ save\ it\ if\ it's\ bigger\ than\ previously\ found\ value}}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ TempDstat\ =\ std::fabs(CumulativeDistribution[0]-\/>GetBinContent(j)\ -\/\ CumulativeDistribution[ik]-\/>GetBinContent(BinNumber));}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(TempDstat\ >\ TestStatD[ik])}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ TestStatD[ik]\ =\ TempDstat;}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ TestStatBin[ik]\ =\ j;}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00723\ \ \ \ \ \}}
\DoxyCodeLine{00724\ }
\DoxyCodeLine{00725\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00726\ \ \ \ \ \{}
\DoxyCodeLine{00727\ \ \ \ \ \ \ LineD[ik]\ =\ \ \textcolor{keyword}{new}\ TLine(CumulativeDistribution[0]-\/>GetBinCenter(TestStatBin[ik]),\ 0,\ CumulativeDistribution[0]-\/>GetBinCenter(TestStatBin[ik]),\ CumulativeDistribution[0]-\/>GetBinContent(TestStatBin[ik]));}
\DoxyCodeLine{00728\ \ \ \ \ \ \ LineD[ik]-\/>SetLineColor(CumulativeColor[ik]);}
\DoxyCodeLine{00729\ \ \ \ \ \ \ LineD[ik]-\/>SetLineWidth(2.0);}
\DoxyCodeLine{00730\ \ \ \ \ \}}
\DoxyCodeLine{00731\ \ \ \ \ CumulativeDistribution[0]-\/>Draw();}
\DoxyCodeLine{00732\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00733\ \ \ \ \ \ \ CumulativeDistribution[ik]-\/>Draw(\textcolor{stringliteral}{"{}SAME"{}});}
\DoxyCodeLine{00734\ \ \ \ \ }
\DoxyCodeLine{00735\ \ \ \ \ TLegend\ *leg\ =\ \textcolor{keyword}{new}\ TLegend(0.15,\ 0.7,\ 0.5,\ 0.90);}
\DoxyCodeLine{00736\ \ \ \ \ leg-\/>SetTextSize(0.04f);}
\DoxyCodeLine{00737\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00738\ \ \ \ \ \ \ leg-\/>AddEntry(CumulativeDistribution[ik],\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}{TitleNames}}[ik].c\_str(),\ \textcolor{stringliteral}{"{}l"{}});}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 1;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00740\ \ \ \ \ \ \ leg-\/>AddEntry(LineD[ik],\ Form(\textcolor{stringliteral}{"{}\#Delta\ D\ =\ \%.4f"{}},\ TestStatD[ik]),\ \textcolor{stringliteral}{"{}l"{}});}
\DoxyCodeLine{00741\ \ \ \ \ }
\DoxyCodeLine{00742\ \ \ \ \ leg-\/>SetLineColor(0);}
\DoxyCodeLine{00743\ \ \ \ \ leg-\/>SetLineStyle(0);}
\DoxyCodeLine{00744\ \ \ \ \ leg-\/>SetFillColor(0);}
\DoxyCodeLine{00745\ \ \ \ \ leg-\/>SetFillStyle(0);}
\DoxyCodeLine{00746\ \ \ \ \ leg-\/>Draw(\textcolor{stringliteral}{"{}SAME"{}});}
\DoxyCodeLine{00747\ }
\DoxyCodeLine{00748\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 1;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00749\ \ \ \ \ \ \ LineD[ik]-\/>Draw(\textcolor{stringliteral}{"{}sam"{}});}
\DoxyCodeLine{00750\ \ \ \ \ \ \ }
\DoxyCodeLine{00751\ \ \ \ \ Posterior-\/>cd();}
\DoxyCodeLine{00752\ \ \ \ \ Posterior-\/>Print(canvasname);}
\DoxyCodeLine{00753\ \ \ \ \ }
\DoxyCodeLine{00754\ \ \ \ \ \textcolor{keyword}{delete}\ leg;}
\DoxyCodeLine{00755\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00756\ \ \ \ \ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ hpost[ik];}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ CumulativeDistribution[ik];}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ LineD[ik];}
\DoxyCodeLine{00760\ \ \ \ \ \}}
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keyword}{delete}[]\ hpost;}
\DoxyCodeLine{00762\ \ \ \ \ \textcolor{keyword}{delete}[]\ CumulativeDistribution;}
\DoxyCodeLine{00763\ \ \ \ \ \textcolor{keyword}{delete}[]\ LineD;}
\DoxyCodeLine{00764\ \ \ \ \ \textcolor{keyword}{delete}[]\ TestStatBin;}
\DoxyCodeLine{00765\ \ \ \ \ \textcolor{keyword}{delete}[]\ TestStatD;}
\DoxyCodeLine{00766\ \ \ \}\ \textcolor{comment}{//End\ loop\ over\ parameter}}
\DoxyCodeLine{00767\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\label{ProcessMCMC_8cpp_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!main@{main}}
\index{main@{main}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00026}{26}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \ \ \mbox{\hyperlink{MaCh3Logger_8h_aa603c55ea73cd86d1994901227883e1e}{SetMaCh3LoggerFormat}}();}
\DoxyCodeLine{00029\ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}\ =\ 0;}
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{if}\ (argc\ !=\ 3\ \&\&\ argc\ !=6\ \&\&\ argc\ !=\ 8)}
\DoxyCodeLine{00031\ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}How\ to\ use:\ \{\}<Config>\ <MCMM\_ND\_Output.root>"{}},\ argv[0]);}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMaCh3Exception}{MaCh3Exception}}(\_\_FILE\_\_\ ,\ \_\_LINE\_\_\ );}
\DoxyCodeLine{00034\ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{if}\ (argc\ ==\ 3)}
\DoxyCodeLine{00037\ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}Producing\ single\ fit\ output"{}});}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}\ =\ argv[1];}
\DoxyCodeLine{00040\ \ \ \ \ std::string\ filename\ =\ argv[2];}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a52c48199a4bcad577b88768020a91041}{ProcessMCMC}}(filename);}
\DoxyCodeLine{00042\ \ \ \}}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ If\ we\ want\ to\ compare\ two\ or\ more\ fits\ (e.g.\ binning\ changes\ or\ introducing\ new\ params/priors)}}
\DoxyCodeLine{00044\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (argc\ ==\ 6\ ||\ argc\ ==\ 8)}
\DoxyCodeLine{00045\ \ \ \{}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}Producing\ two\ fit\ comparison"{}});}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}\ =\ argv[1];}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}.push\_back(argv[2]);}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}{TitleNames}}.push\_back(argv[3]);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}.push\_back(argv[4]);}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}{TitleNames}}.push\_back(argv[5]);}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//KS:\ If\ there\ is\ third\ file\ add\ it}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{if}(argc\ ==\ 8)}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}.push\_back(argv[6]);}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}{TitleNames}}.push\_back(argv[7]);}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a83be70750a728e4deae518ea3ffaf388}{MultipleProcessMCMC}}();}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00065\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a83be70750a728e4deae518ea3ffaf388}\label{ProcessMCMC_8cpp_a83be70750a728e4deae518ea3ffaf388}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!MultipleProcessMCMC@{MultipleProcessMCMC}}
\index{MultipleProcessMCMC@{MultipleProcessMCMC}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{MultipleProcessMCMC()}{MultipleProcessMCMC()}}
{\footnotesize\ttfamily void Multiple\+Process\+MCMC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Function producing comparison of posterior and more betwen a few MCMC chains. 



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00146}{146}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00147\ \{}
\DoxyCodeLine{00148\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00149\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{keyword}{const}\ Color\_t\ PosteriorColor[]\ =\ \{kBlue-\/1,\ kRed,\ kGreen+2\};}
\DoxyCodeLine{00152\ \ \ \textcolor{comment}{//const\ Style\_t\ PosteriorStyle[]\ =\ \{kSolid,\ kDashed,\ kDotted\};}}
\DoxyCodeLine{00153\ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}\ =\ int(\mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}.size());}
\DoxyCodeLine{00154\ \ \ \mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}}**\ Processor;\ }
\DoxyCodeLine{00155\ \ \ Processor\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}}*[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00157\ \ \ \{}
\DoxyCodeLine{00158\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}File\ for\ study:\ \{\}"{}},\ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik]);}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{comment}{//\ Make\ the\ processor}}
\DoxyCodeLine{00160\ \ \ \ \ Processor[ik]\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}}(\mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik]);}
\DoxyCodeLine{00161\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a2f4bf14c95b830c457a73be5399403ad}{SetOutputSuffix}}((\textcolor{stringliteral}{"{}\_"{}}\ +\ std::to\_string(ik)).c\_str());}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a4364a8ab084906c8925c9db9dc110485}{SetExcludedTypes}}(\mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<std::string>>(Settings[\textcolor{stringliteral}{"{}ExcludedTypes"{}}],\ \{\textcolor{stringliteral}{"{}"{}}\}));}
\DoxyCodeLine{00164\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a09a6fa6cefcb20c00bee22c1dc5718c5}{SetExcludedNames}}(\mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<std::string>>(Settings[\textcolor{stringliteral}{"{}ExcludedNames"{}}],\ \{\textcolor{stringliteral}{"{}"{}}\}));}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{comment}{//Apply\ additional\ cuts\ to\ 1D\ posterior}}
\DoxyCodeLine{00167\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a641da7f5e018d48d480638fbad6406a4}{SetPosterior1DCut}}(GetFromManager<std::string>(Settings[\textcolor{stringliteral}{"{}Posterior1DCut"{}}],\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a6ea549289949ac19d2fc768d82c8f1c9}{SetPlotRelativeToPrior}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PlotRelativeToPrior"{}}],\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00170\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a7f61cf0a51670f24f16dd7d77b7f5ae4}{SetFancyNames}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}FancyNames"{}}],\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00171\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a224995a0b47bd9cbd04e099cc3ca634c}{Initialise}}();}
\DoxyCodeLine{00172\ \ \ \}}
\DoxyCodeLine{00173\ \ \ \textcolor{comment}{//KS:\ Multithreading\ here\ is\ very\ tempting\ but\ there\ are\ some\ issues\ with\ root\ that\ need\ to\ be\ resovled\ :(}}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00175\ \ \ \{}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{//\ Make\ the\ postfit}}
\DoxyCodeLine{00177\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a8667510132aa01395520f028287f511b}{MakePostfit}}();}
\DoxyCodeLine{00178\ \ \ \ \ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_ab420de77e598da4b02ba74cdc20f2ea9}{DrawPostfit}}();}
\DoxyCodeLine{00179\ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ Open\ a\ TCanvas\ to\ write\ the\ posterior\ onto}}
\DoxyCodeLine{00182\ \ \ TCanvas*\ Posterior\ =\ \textcolor{keyword}{new}\ TCanvas(\textcolor{stringliteral}{"{}PosteriorMulti"{}},\ \textcolor{stringliteral}{"{}PosteriorMulti"{}},\ 0,\ 0,\ 1024,\ 1024);}
\DoxyCodeLine{00183\ \ \ gStyle-\/>SetOptStat(0);}
\DoxyCodeLine{00184\ \ \ gStyle-\/>SetOptTitle(0);}
\DoxyCodeLine{00185\ \ \ Posterior-\/>SetGrid();}
\DoxyCodeLine{00186\ \ \ Posterior-\/>SetBottomMargin(0.1f);}
\DoxyCodeLine{00187\ \ \ Posterior-\/>SetTopMargin(0.05f);}
\DoxyCodeLine{00188\ \ \ Posterior-\/>SetRightMargin(0.03f);}
\DoxyCodeLine{00189\ \ \ Posterior-\/>SetLeftMargin(0.10f);}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[0]\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[0].substr(0,\ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[0].find(\textcolor{stringliteral}{"{}.root"{}})-\/1);}
\DoxyCodeLine{00192\ \ \ TString\ canvasname\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[0];}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 1;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00194\ \ \ \{}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik].find(\textcolor{stringliteral}{"{}/"{}})\ !=\ std::string::npos)}
\DoxyCodeLine{00196\ \ \ \ \ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik]\ =\ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik].substr(\mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik].find(\textcolor{stringliteral}{"{}/"{}})+1,\ \mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik].find(\textcolor{stringliteral}{"{}.root"{}})-\/1);}
\DoxyCodeLine{00198\ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ canvasname\ =\ canvasname\ +\ \textcolor{stringliteral}{"{}\_"{}}+\mbox{\hyperlink{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}{FileNames}}[ik];}
\DoxyCodeLine{00200\ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ canvasname\ =\ canvasname\ +\textcolor{stringliteral}{"{}.pdf["{}};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ Posterior-\/>Print(canvasname);}
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ Once\ the\ pdf\ file\ is\ open\ no\ longer\ need\ to\ bracket}}
\DoxyCodeLine{00206\ \ \ canvasname.ReplaceAll(\textcolor{stringliteral}{"{}["{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ Processor[0]-\/>\mbox{\hyperlink{classMCMCProcessor_adbde2f115d983b233d0a9ea896187586}{GetNParams}}();\ ++i)\ }
\DoxyCodeLine{00209\ \ \ \{}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{comment}{//\ This\ holds\ the\ posterior\ density}}
\DoxyCodeLine{00211\ \ \ \ \ TH1D\ **hpost\ =\ \textcolor{keyword}{new}\ TH1D*[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00212\ \ \ \ \ TLine\ **hpd\ =\ \textcolor{keyword}{new}\ TLine*[\mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}}];}
\DoxyCodeLine{00213\ \ \ \ \ hpost[0]\ =\ \textcolor{keyword}{static\_cast<}TH1D\ *\textcolor{keyword}{>}(Processor[0]-\/>\mbox{\hyperlink{classMCMCProcessor_a70f5590946414af43c3b6c3a5cd315de}{GetHpost}}(i)-\/>Clone());}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordtype}{bool}\ Skip\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 1\ ;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00217\ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \textcolor{comment}{//\ KS:\ If\ somehow\ this\ chain\ doesn't\ given\ params\ we\ skip\ it}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ Index\ =\ Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a5ab91183fbbf23fff759fefc9954a1a5}{GetParamIndexFromName}}(hpost[0]-\/>GetTitle());}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(Index\ ==\ \mbox{\hyperlink{MCMCProcessor_8h_a82a6d79039474bc403b627437a7b97ec}{\_UNDEF\_}})}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ Skip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ hpost[ik]\ =\ \textcolor{keyword}{static\_cast<}TH1D\ *\textcolor{keyword}{>}(Processor[ik]-\/>\mbox{\hyperlink{classMCMCProcessor_a70f5590946414af43c3b6c3a5cd315de}{GetHpost}}(Index)-\/>Clone());}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{//\ Don't\ plot\ if\ this\ is\ a\ fixed\ histogram\ (i.e.\ the\ peak\ is\ the\ whole\ integral)}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{if}(hpost[0]-\/>GetMaximum()\ ==\ hpost[0]-\/>Integral()*1.5\ ||\ Skip)}
\DoxyCodeLine{00230\ \ \ \ \ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ hpost[ik];}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ hpost;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ hpd;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00237\ \ \ \ \ \}}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00239\ \ \ \ \ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \mbox{\hyperlink{Structs_8cpp_a85463c0c6943e3d544d5fcb3f96bf18a}{RemoveFitter}}(hpost[ik],\ \textcolor{stringliteral}{"{}Gauss"{}});}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ some\ nice\ colours}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ hpost[ik]-\/>SetLineColor(PosteriorColor[ik]);}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \textcolor{comment}{//hpost[ik]-\/>SetLineStyle(PosteriorStyle[ik]);}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ hpost[ik]-\/>SetLineWidth(2);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ \textcolor{comment}{//\ Area\ normalise\ the\ distributions}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ hpost[ik]-\/>Scale(1./hpost[ik]-\/>Integral(),\ \textcolor{stringliteral}{"{}width"{}});}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ \ \ \ \ TString\ Title;}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordtype}{double}\ Prior\ =\ 1.0;}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{double}\ PriorError\ =\ 1.0;}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ Processor[0]-\/>\mbox{\hyperlink{classMCMCProcessor_a28dfe42f1bf6fd3a145287be1e63fb0b}{GetNthParameter}}(i,\ Prior,\ PriorError,\ Title);}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ Now\ make\ the\ TLine\ for\ the\ Asimov}}
\DoxyCodeLine{00257\ \ \ \ \ TLine\ *Asimov\ =\ \textcolor{keyword}{new}\ TLine(Prior,\ \ hpost[0]-\/>GetMinimum(),\ Prior,\ \ hpost[0]-\/>GetMaximum());}
\DoxyCodeLine{00258\ \ \ \ \ Asimov-\/>SetLineColor(kRed-\/3);}
\DoxyCodeLine{00259\ \ \ \ \ Asimov-\/>SetLineWidth(2);}
\DoxyCodeLine{00260\ \ \ \ \ Asimov-\/>SetLineStyle(kDashed);}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{comment}{//\ Make\ a\ nice\ little\ TLegend}}
\DoxyCodeLine{00263\ \ \ \ \ TLegend\ *leg\ =\ \textcolor{keyword}{new}\ TLegend(0.12,\ 0.7,\ 0.6,\ 0.97);}
\DoxyCodeLine{00264\ \ \ \ \ leg-\/>SetTextSize(0.03f);}
\DoxyCodeLine{00265\ \ \ \ \ leg-\/>SetFillColor(0);}
\DoxyCodeLine{00266\ \ \ \ \ leg-\/>SetFillStyle(0);}
\DoxyCodeLine{00267\ \ \ \ \ leg-\/>SetLineColor(0);}
\DoxyCodeLine{00268\ \ \ \ \ leg-\/>SetLineStyle(0);}
\DoxyCodeLine{00269\ \ \ \ \ TString\ asimovLeg\ =\ Form(\textcolor{stringliteral}{"{}\#splitline\{Prior\}\{x\ =\ \%.2f\ ,\ \#sigma\ =\ \%.2f\}"{}},\ Prior,\ PriorError);}
\DoxyCodeLine{00270\ \ \ \ \ leg-\/>AddEntry(Asimov,\ asimovLeg,\ \textcolor{stringliteral}{"{}l"{}});}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00273\ \ \ \ \ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ TString\ rebinLeg\ =\ Form(\textcolor{stringliteral}{"{}\#splitline\{\%s\}\{\#mu\ =\ \%.2f,\ \#sigma\ =\ \%.2f\}"{}},\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}{TitleNames}}[ik].c\_str(),\ hpost[ik]-\/>GetMean(),\ hpost[ik]-\/>GetRMS());}
\DoxyCodeLine{00275\ \ \ \ \ \ \ leg-\/>AddEntry(hpost[ik],\ \ rebinLeg,\ \textcolor{stringliteral}{"{}l"{}});}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \ \ hpd[ik]\ =\ \textcolor{keyword}{new}\ TLine(hpost[ik]-\/>GetBinCenter(hpost[ik]-\/>GetMaximumBin()),\ hpost[ik]-\/>GetMinimum(),\ hpost[ik]-\/>GetBinCenter(hpost[ik]-\/>GetMaximumBin()),\ hpost[ik]-\/>GetMaximum());}
\DoxyCodeLine{00278\ \ \ \ \ \ \ hpd[ik]-\/>SetLineColor(hpost[ik]-\/>GetLineColor());}
\DoxyCodeLine{00279\ \ \ \ \ \ \ hpd[ik]-\/>SetLineWidth(2);}
\DoxyCodeLine{00280\ \ \ \ \ \ \ hpd[ik]-\/>SetLineStyle(kSolid);}
\DoxyCodeLine{00281\ \ \ \ \ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ maximum\ value\ to\ nicely\ resize\ hist}}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordtype}{double}\ maximum\ =\ 0;}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)\ maximum\ =\ std::max(maximum,\ hpost[ik]-\/>GetMaximum());}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)\ hpost[ik]-\/>SetMaximum(1.3*maximum);}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ hpost[0]-\/>Draw(\textcolor{stringliteral}{"{}hist"{}});}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 1;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)\ hpost[ik]-\/>Draw(\textcolor{stringliteral}{"{}hist\ same"{}});}
\DoxyCodeLine{00290\ \ \ \ \ Asimov-\/>Draw(\textcolor{stringliteral}{"{}same"{}});}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)\ hpd[ik]-\/>Draw(\textcolor{stringliteral}{"{}same"{}});}
\DoxyCodeLine{00292\ \ \ \ \ leg-\/>Draw(\textcolor{stringliteral}{"{}same"{}});}
\DoxyCodeLine{00293\ \ \ \ \ Posterior-\/>cd();}
\DoxyCodeLine{00294\ \ \ \ \ Posterior-\/>Print(canvasname);}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keyword}{delete}\ Asimov;}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keyword}{delete}\ leg;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)}
\DoxyCodeLine{00299\ \ \ \ \ \{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ hpost[ik];}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ hpd[ik];}
\DoxyCodeLine{00302\ \ \ \ \ \}}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keyword}{delete}[]\ hpost;}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keyword}{delete}[]\ hpd;}
\DoxyCodeLine{00305\ \ \ \}\textcolor{comment}{//End\ loop\ over\ parameters}}
\DoxyCodeLine{00306\ \ \ \ \ }
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{//\ Finally\ draw\ the\ parameter\ plot\ onto\ the\ PDF}}
\DoxyCodeLine{00308\ \ \ \textcolor{comment}{//\ Close\ the\ .pdf\ file\ with\ all\ the\ posteriors}}
\DoxyCodeLine{00309\ \ \ Posterior-\/>cd();}
\DoxyCodeLine{00310\ \ \ Posterior-\/>Clear();}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PerformKStest"{}}],\ \textcolor{keyword}{true}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_aece705f01f7c21ad0d0f5f9f64af6d0d}{KolmogorovSmirnovTest}}(Processor,\ Posterior,\ canvasname);}
\DoxyCodeLine{00313\ \ \ }
\DoxyCodeLine{00314\ \ \ \textcolor{comment}{//\ Close\ the\ pdf\ file}}
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}Closing\ pdf\ \{\}"{}},\ canvasname);}
\DoxyCodeLine{00316\ \ \ canvasname+=\textcolor{stringliteral}{"{}]"{}};}
\DoxyCodeLine{00317\ \ \ Posterior-\/>Print(canvasname);}
\DoxyCodeLine{00318\ \ \ }
\DoxyCodeLine{00319\ \ \ \textcolor{keyword}{delete}\ Posterior;}
\DoxyCodeLine{00320\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ik\ =\ 0;\ ik\ <\ \mbox{\hyperlink{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}{nFiles}};\ \ ik++)\ \textcolor{keyword}{delete}\ Processor[ik];}
\DoxyCodeLine{00321\ \ \ \textcolor{keyword}{delete}[]\ Processor;}
\DoxyCodeLine{00322\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a52c48199a4bcad577b88768020a91041}\label{ProcessMCMC_8cpp_a52c48199a4bcad577b88768020a91041}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!ProcessMCMC@{ProcessMCMC}}
\index{ProcessMCMC@{ProcessMCMC}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{ProcessMCMC()}{ProcessMCMC()}}
{\footnotesize\ttfamily void Process\+MCMC (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{input\+File }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Main function processing MCMC and Producing plots. 



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00067}{67}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00068\ \{}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}File\ for\ study:\ \{\}\ with\ config\ \ \{\}"{}},\ inputFile,\ \mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}});}
\DoxyCodeLine{00070\ \ \ \textcolor{comment}{//\ Make\ the\ processor)}}
\DoxyCodeLine{00071\ \ \ \mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}}*\ Processor\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}}(inputFile);}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00074\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{bool}\ PlotCorr\ =\ GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PlotCorr"{}}],\ \textcolor{keyword}{false});}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a4364a8ab084906c8925c9db9dc110485}{SetExcludedTypes}}(\mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<std::string>>(Settings[\textcolor{stringliteral}{"{}ExcludedTypes"{}}],\ \{\textcolor{stringliteral}{"{}"{}}\}));}
\DoxyCodeLine{00079\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a09a6fa6cefcb20c00bee22c1dc5718c5}{SetExcludedNames}}(\mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<std::string>>(Settings[\textcolor{stringliteral}{"{}ExcludedNames"{}}],\ \{\textcolor{stringliteral}{"{}"{}}\}));}
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//Apply\ additional\ cuts\ to\ 1D\ posterior}}
\DoxyCodeLine{00081\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a641da7f5e018d48d480638fbad6406a4}{SetPosterior1DCut}}(GetFromManager<std::string>(Settings[\textcolor{stringliteral}{"{}Posterior1DCut"{}}],\ \textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{if}(PlotCorr)\ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a2f4bf14c95b830c457a73be5399403ad}{SetOutputSuffix}}(\textcolor{stringliteral}{"{}\_drawCorr"{}});}
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//KS:Turn\ off\ plotting\ detector\ and\ some\ other\ setting,\ should\ be\ via\ some\ config}}
\DoxyCodeLine{00085\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a6ea549289949ac19d2fc768d82c8f1c9}{SetPlotRelativeToPrior}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PlotRelativeToPrior"{}}],\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00086\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a9db87211d9f066011daed18af7f4631e}{SetPrintToPDF}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PrintToPDF"{}}],\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{//KS:\ Whether\ you\ want\ prior\ error\ bands\ for\ parameters\ with\ flat\ prior\ or\ not}}
\DoxyCodeLine{00089\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_adbe0ec06ce30447cb1c03a961364b929}{SetPlotErrorForFlatPrior}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PlotErrorForFlatPrior"{}}],\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00090\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a7f61cf0a51670f24f16dd7d77b7f5ae4}{SetFancyNames}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}FancyNames"{}}],\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00091\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_aed120fafdfe97615f4c2a30aedde03dd}{SetPlotBinValue}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}PlotBinValue"{}}],\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{//KS:\ Plot\ only\ 2D\ posteriors\ with\ correlations\ greater\ than\ 0.2}}
\DoxyCodeLine{00093\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ab605f4d7bf4e2b24b4c0b1c5853b479f}{SetPost2DPlotThreshold}}(GetFromManager<double>(Settings[\textcolor{stringliteral}{"{}Post2DPlotThreshold"{}}],\ 0.2));}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a224995a0b47bd9cbd04e099cc3ca634c}{Initialise}}();}
\DoxyCodeLine{00096\ \ \ }
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ Make\ the\ postfit}}
\DoxyCodeLine{00098\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a8667510132aa01395520f028287f511b}{MakePostfit}}();}
\DoxyCodeLine{00099\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ab420de77e598da4b02ba74cdc20f2ea9}{DrawPostfit}}();}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//KS:\ Should\ set\ via\ config\ whether\ you\ want\ below\ or\ not}}
\DoxyCodeLine{00101\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}MakeCredibleIntervals"{}}],\ \textcolor{keyword}{true}))\ \{}
\DoxyCodeLine{00102\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a17c0f09bfce82d1701a83645f748988a}{MakeCredibleIntervals}}(\mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<double>>(Settings[\textcolor{stringliteral}{"{}CredibleIntervals"{}}],\ \{0.99,\ 0.90,\ 0.68\}),}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<short\ int>>(Settings[\textcolor{stringliteral}{"{}CredibleIntervalsColours"{}}],\ \{436,\ 430,\ 422\}),}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CredibleInSigmas"{}}],\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00105\ \ \ \}}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CalcBayesFactor"{}}],\ \textcolor{keyword}{true}))\ \ \mbox{\hyperlink{ProcessMCMC_8cpp_ac5381031738b5fa6481d7ac33d2ad854}{CalcBayesFactor}}(Processor);}
\DoxyCodeLine{00107\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CalcSavageDickey"{}}],\ \textcolor{keyword}{true}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_af772f7bdfdba080075141597e9c99f79}{CalcSavageDickey}}(Processor);}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CalcBipolarPlot"{}}],\ \textcolor{keyword}{false}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_a2d9c3cc52d1f5c3cc3e0775ae596e9c7}{CalcBipolarPlot}}(Processor);}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CalcParameterEvolution"{}}],\ \textcolor{keyword}{false}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_a32bb8e776bea9a8b778cfece3200932c}{CalcParameterEvolution}}(Processor);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{if}(PlotCorr)}
\DoxyCodeLine{00112\ \ \ \{}
\DoxyCodeLine{00113\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a4bec41cdc9af977a51b269e2a07fe961}{SetSmoothing}}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}Smoothing"{}}],\ \textcolor{keyword}{true}));}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ Make\ the\ covariance\ matrix}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{comment}{//We\ have\ different\ treatment\ for\ multithread}}
\DoxyCodeLine{00116\ \textcolor{comment}{//\#ifdef\ MULTITHREAD}}
\DoxyCodeLine{00117\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ace48a54fb08e2a3943d4e2ed1f8c4a4b}{CacheSteps}}();}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//KS:\ Since\ we\ cached\ let's\ make\ fancy\ violins\ :)}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}MakeViolin"{}}],\ \textcolor{keyword}{true}))\ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a04976c69f0ef0b3f39edcf5f25f90981}{MakeViolin}}();}
\DoxyCodeLine{00120\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ab367cb5f56606338bb1fce780f2414e8}{MakeCovariance\_MP}}();}
\DoxyCodeLine{00121\ \textcolor{comment}{//\#else}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{//Processor-\/>MakeCovariance();}}
\DoxyCodeLine{00123\ \textcolor{comment}{//\#endif}}
\DoxyCodeLine{00124\ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a8d9b9c1c780a51b130fe528583dc5019}{DrawCovariance}}();}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&MakeSubOptimality\ =\ Settings[\textcolor{stringliteral}{"{}MakeSubOptimality"{}}];}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordflow}{if}(MakeSubOptimality[0].as<bool>())\ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_afac304b884238cc3624f5471b43f1a7e}{MakeSubOptimality}}(MakeSubOptimality[1].as<int>());}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}MakeCredibleRegions"{}}],\ \textcolor{keyword}{false}))\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_a304adbe4407166ec42d76329c4bd17ff}{MakeCredibleRegions}}(\mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<double>>(Settings[\textcolor{stringliteral}{"{}CredibleRegions"{}}],\ \{0.99,\ 0.90,\ 0.68\}),}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<short\ int>>(Settings[\textcolor{stringliteral}{"{}CredibleRegionStyle"{}}],\ \{2,\ 1,\ 3\}),}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{YamlHelper_8h_a1a6adcb8b24bfbdcb936ced6812e1b0c}{GetFromManager}}<std::vector<short\ int>>(Settings[\textcolor{stringliteral}{"{}CredibleRegionColor"{}}],\ \{413,\ 406,\ 416\}),}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}CredibleInSigmas"{}}],\ \textcolor{keyword}{false})}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00135\ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}GetTrianglePlot"{}}],\ \textcolor{keyword}{true}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_a02c2311b736096adc8525876c0ec1487}{GetTrianglePlot}}(Processor);}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{//KS:\ When\ creating\ covariance\ matrix\ longest\ time\ is\ spend\ on\ caching\ every\ step,\ since\ we\ already\ cached\ we\ can\ run\ some\ fancy\ covariance\ stability\ diagnostic}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}DiagnoseCovarianceMatrix"{}}],\ \textcolor{keyword}{false}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_a08adc262bf03d1cb8df996b39404572c}{DiagnoseCovarianceMatrix}}(Processor,\ inputFile);}
\DoxyCodeLine{00140\ \ \ \}}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{if}(GetFromManager<bool>(Settings[\textcolor{stringliteral}{"{}ReweightPrior"{}}],\ \textcolor{keyword}{false}))\ \mbox{\hyperlink{ProcessMCMC_8cpp_abbd13994de9f24524b06b19aa901d73f}{ReweightPrior}}(Processor);}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \textcolor{keyword}{delete}\ Processor;}
\DoxyCodeLine{00144\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_abbd13994de9f24524b06b19aa901d73f}\label{ProcessMCMC_8cpp_abbd13994de9f24524b06b19aa901d73f}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!ReweightPrior@{ReweightPrior}}
\index{ReweightPrior@{ReweightPrior}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{ReweightPrior()}{ReweightPrior()}}
{\footnotesize\ttfamily void Reweight\+Prior (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classMCMCProcessor}{MCMCProcessor}} $\ast$}]{Processor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00595}{595}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00596\ \{}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \ \ YAML::Node\ card\_yaml\ =\ YAML::LoadFile(\mbox{\hyperlink{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}{config}}.c\_str());}
\DoxyCodeLine{00599\ \ \ YAML::Node\ Settings\ =\ card\_yaml[\textcolor{stringliteral}{"{}ProcessMCMC"{}}];}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ Prior\ =\ Settings[\textcolor{stringliteral}{"{}PriorReweighting"{}}];}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \ \ std::vector<std::string>\ Names\ =\ Prior[0].as<std::vector<std::string>>();}
\DoxyCodeLine{00604\ \ \ std::vector<double>\ NewCentral\ =\ Prior[1].as<std::vector<double>>();}
\DoxyCodeLine{00605\ \ \ std::vector<double>\ NewError\ =\ Prior[2].as<std::vector<double>>();}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ Processor-\/>\mbox{\hyperlink{classMCMCProcessor_ad3b1cfab21c7063bc29d1cf5dcca888c}{ReweightPrior}}(Names,\ NewCentral,\ NewError);}
\DoxyCodeLine{00608\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}\label{ProcessMCMC_8cpp_a2052da75bc58457dc290c8cbd06efe30}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!TMatrixIntoTH2D@{TMatrixIntoTH2D}}
\index{TMatrixIntoTH2D@{TMatrixIntoTH2D}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{TMatrixIntoTH2D()}{TMatrixIntoTH2D()}}
{\footnotesize\ttfamily TH2D $\ast$ TMatrix\+Into\+TH2D (\begin{DoxyParamCaption}\item[{TMatrix\+DSym $\ast$}]{Matrix,  }\item[{const std\+::string \&}]{title }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



KS\+: Convert TMatrix to TH2D, mostly useful for making fancy plots. 



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00611}{611}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00612\ \{}
\DoxyCodeLine{00613\ \ \ TH2D*\ hMatrix\ =\ \textcolor{keyword}{new}\ TH2D(title.c\_str(),\ title.c\_str(),\ Matrix-\/>GetNrows(),\ 0.0,\ Matrix-\/>GetNrows(),\ Matrix-\/>GetNcols(),\ 0.0,\ Matrix-\/>GetNcols());}
\DoxyCodeLine{00614\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ Matrix-\/>GetNrows();\ i++)}
\DoxyCodeLine{00615\ \ \ \{}
\DoxyCodeLine{00616\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ Matrix-\/>GetNcols();\ j++)}
\DoxyCodeLine{00617\ \ \ \ \ \{}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \textcolor{comment}{//KS:\ +1\ because\ there\ is\ offset\ in\ histogram\ relative\ to\ TMatrix}}
\DoxyCodeLine{00619\ \ \ \ \ \ \ hMatrix-\/>SetBinContent(i+1,j+1,\ (*Matrix)(i,j));}
\DoxyCodeLine{00620\ \ \ \ \ \}}
\DoxyCodeLine{00621\ \ \ \}}
\DoxyCodeLine{00622\ \ \ \textcolor{keywordflow}{return}\ hMatrix;}
\DoxyCodeLine{00623\ \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}\label{ProcessMCMC_8cpp_a13056efd080ab16304b6f7be0ebf0a61}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!config@{config}}
\index{config@{config}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{config}{config}}
{\footnotesize\ttfamily std\+::string config}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00024}{24}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.

\mbox{\Hypertarget{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}\label{ProcessMCMC_8cpp_a8e90c1478f4be185364988cac765a163}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!FileNames@{FileNames}}
\index{FileNames@{FileNames}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{FileNames}{FileNames}}
{\footnotesize\ttfamily std\+::vector$<$std\+::string$>$ File\+Names}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00022}{22}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.

\mbox{\Hypertarget{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}\label{ProcessMCMC_8cpp_a6b25bcddaae9b868109dc98a54476e46}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!nFiles@{nFiles}}
\index{nFiles@{nFiles}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{nFiles}{nFiles}}
{\footnotesize\ttfamily int n\+Files}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00021}{21}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.

\mbox{\Hypertarget{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}\label{ProcessMCMC_8cpp_a2bff863f66d44b865ce21762802730c8}} 
\index{ProcessMCMC.cpp@{ProcessMCMC.cpp}!TitleNames@{TitleNames}}
\index{TitleNames@{TitleNames}!ProcessMCMC.cpp@{ProcessMCMC.cpp}}
\doxysubsubsection{\texorpdfstring{TitleNames}{TitleNames}}
{\footnotesize\ttfamily std\+::vector$<$std\+::string$>$ Title\+Names}



Definition at line \mbox{\hyperlink{ProcessMCMC_8cpp_source_l00023}{23}} of file \mbox{\hyperlink{ProcessMCMC_8cpp_source}{Process\+MCMC.\+cpp}}.

