\hypertarget{SplineBase_8cpp_source}{}\doxysection{Spline\+Base.\+cpp}
\label{SplineBase_8cpp_source}\index{/home/runner/work/MaCh3/MaCh3/splines/SplineBase.cpp@{/home/runner/work/MaCh3/MaCh3/splines/SplineBase.cpp}}
\mbox{\hyperlink{SplineBase_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{SplineBase_8h}{splines/SplineBase.h}}"{}}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wuseless-\/cast"{}}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00004}00004\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wfloat-\/conversion"{}}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00006}00006\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00007}\mbox{\hyperlink{classSplineBase_aa6965d1522cc68ecf81ac3bfd2dcd6f1}{00007}}\ \mbox{\hyperlink{classSplineBase_aa6965d1522cc68ecf81ac3bfd2dcd6f1}{SplineBase::SplineBase}}()\ \{}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00008}00008\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00011}00011\ \}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00014}00014\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00015}\mbox{\hyperlink{classSplineBase_a0de19b2322edb4197380506d594456bd}{00015}}\ \mbox{\hyperlink{classSplineBase_a0de19b2322edb4197380506d594456bd}{SplineBase::\string~SplineBase}}()\ \{}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00016}00016\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00019}00019\ \}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00021}00021\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00022}00022\ \textcolor{comment}{//\ Get\ the\ spline\ coefficients\ from\ the\ TSpline3\ so\ that\ we\ can\ load\ ONLY\ these\ onto\ the\ GPU,\ not\ the\ whole\ TSpline3\ object}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00023}00023\ \textcolor{comment}{//\ This\ loads\ up\ coefficients\ into\ two\ arrays:\ one\ x\ array\ and\ one\ yabcd\ array}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00024}00024\ \textcolor{comment}{//\ This\ should\ maximize\ our\ cache\ hits!}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00025}\mbox{\hyperlink{classSplineBase_ac8a5f86ac6f156a7e11ef188b06f425f}{00025}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSplineBase_ac8a5f86ac6f156a7e11ef188b06f425f}{SplineBase::getTF1Coeff}}(\mbox{\hyperlink{classTF1__red}{TF1\_red}}*\ \&spl,\ \textcolor{keywordtype}{int}\ \&nPoints,\ \textcolor{keywordtype}{float}\ *\&\ coeffs)\ \{}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00026}00026\ \textcolor{comment}{//\ *****************************************}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00028}00028\ \ \ \textcolor{comment}{//\ Initialise\ all\ arrays\ to\ 1.0}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00029}00029\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{SplineCommon_8h_a911160077ffa38727e0494f178ce380a}{\_nTF1Coeff\_}};\ ++i)\ \{}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00030}00030\ \ \ \ \ coeffs[i]\ =\ 0.0;}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00031}00031\ \ \ \}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00033}00033\ \ \ \textcolor{comment}{//\ Get\ number\ of\ points\ in\ spline}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00034}00034\ \ \ nPoints\ =\ spl-\/>\mbox{\hyperlink{classTF1__red_af9e3b0e8d2edad0e7e08f3bf215525c9}{GetSize}}();}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00036}00036\ \ \ \textcolor{keywordflow}{if}(nPoints\ >\ \mbox{\hyperlink{SplineCommon_8h_a911160077ffa38727e0494f178ce380a}{\_nTF1Coeff\_}})}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00037}00037\ \ \ \{}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00038}00038\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}Too\ big\ number\ of\ points\ for\ TF1"{}});}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00039}00039\ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMaCh3Exception}{MaCh3Exception}}(\_\_FILE\_\_\ ,\ \_\_LINE\_\_\ );}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00040}00040\ \ \ \}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00041}00041\ \ \ \textcolor{comment}{//\ TSpline3\ can\ only\ take\ doubles,\ not\ floats}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00042}00042\ \ \ \textcolor{comment}{//\ But\ our\ GPU\ is\ slow\ with\ doubles,\ so\ need\ to\ cast\ to\ float}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00043}00043\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ nPoints;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00044}00044\ \ \ \ \ coeffs[i]\ =\ float(spl-\/>\mbox{\hyperlink{classTF1__red_ae0385a986d12257d806ba970646d1d15}{GetParameter}}(\mbox{\hyperlink{namespaceM3_adb59b8ecdc4e1b2d5d4c826a13aa7463}{M3::int\_t}}(i)));}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00045}00045\ \ \ \}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00046}00046\ \ \ \textcolor{comment}{//\ The\ structure\ is\ now\ coeffs\ \ =\ \{a,b,c,d,e\}}}
\DoxyCodeLine{\Hypertarget{SplineBase_8cpp_source_l00047}00047\ \}}

\end{DoxyCode}
