\hypertarget{classPCAHandler}{}\doxysection{PCAHandler Class Reference}
\label{classPCAHandler}\index{PCAHandler@{PCAHandler}}


Class responsible for handling Principal Component Analysis (PCA) of covariance matrix.  




{\ttfamily \#include $<$/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/covariance/\+PCAHandler.\+h$>$}



Collaboration diagram for PCAHandler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{classPCAHandler__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classPCAHandler_aabaaecfe5909a6cffbcc0e1a385615fa}{PCAHandler}} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classPCAHandler_a7f9957719671d1c673c74b5cd003dc76}{$\sim$\+PCAHandler}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classPCAHandler_a361fd5f81ae3bcd915cd598b69e264ba}{Construct\+PCA}} (TMatrix\+DSym $\ast$cov\+Matrix, const int first\+PCAd, const int last\+PCAd, const double eigen\+\_\+thresh, int \&\+\_\+f\+Num\+Par\+PCA)
\begin{DoxyCompactList}\small\item\em CW\+: Calculate eigen values, prepare transition matrices and remove param based on defined threshold. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
TMatrixD \mbox{\hyperlink{classPCAHandler_a1d9302633ed96ec57fbe26d25cbcee61}{Transfer\+Mat}}
\begin{DoxyCompactList}\small\item\em Matrix used to converting from PCA base to normal base. \end{DoxyCompactList}\item 
TMatrixD \mbox{\hyperlink{classPCAHandler_a6f6443a487bb544e6a6e458d86f35f27}{Transfer\+MatT}}
\begin{DoxyCompactList}\small\item\em Matrix used to converting from normal base to PCA base. \end{DoxyCompactList}\item 
TVectorD \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\+\_\+values}}
\begin{DoxyCompactList}\small\item\em Eigen value only of particles which are being decomposed. \end{DoxyCompactList}\item 
TMatrixD \mbox{\hyperlink{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}{eigen\+\_\+vectors}}
\begin{DoxyCompactList}\small\item\em Eigen vectors only of params which are being decomposed. \end{DoxyCompactList}\item 
std\+::vector$<$ double $>$ \mbox{\hyperlink{classPCAHandler_a2924386fef0cf65215c51b4f81cdb0d1}{eigen\+\_\+values\+\_\+master}}
\begin{DoxyCompactList}\small\item\em Eigen values which have dimension equal to \+\_\+f\+Num\+Par\+PCA, and can be used in Correlate\+Steps. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{n\+Kept\+PCApars}}
\begin{DoxyCompactList}\small\item\em Total number that remained after applying PCA Threshold. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{First\+PCAdpar}}
\begin{DoxyCompactList}\small\item\em Index of the first param that is being decomposed. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{Last\+PCAdpar}}
\begin{DoxyCompactList}\small\item\em Index of the last param that is being decomposed. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classPCAHandler_afdf5f929fe9211a2ce05f6bab2b8633a}{eigen\+\_\+threshold}}
\begin{DoxyCompactList}\small\item\em CW\+: Threshold based on which we remove parameters in eigen base. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class responsible for handling Principal Component Analysis (PCA) of covariance matrix. 

\begin{DoxySeeAlso}{See also}
For more details, visit the \href{https://github.com/mach3-software/MaCh3/wiki/03.-Eigen-Decomposition-\%E2\%80\%90-PCA}{\texttt{ Wiki}}. 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00029}{29}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classPCAHandler_aabaaecfe5909a6cffbcc0e1a385615fa}\label{classPCAHandler_aabaaecfe5909a6cffbcc0e1a385615fa}} 
\index{PCAHandler@{PCAHandler}!PCAHandler@{PCAHandler}}
\index{PCAHandler@{PCAHandler}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{PCAHandler()}{PCAHandler()}}
{\footnotesize\ttfamily PCAHandler\+::\+PCAHandler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Constructor. 



Definition at line \mbox{\hyperlink{PCAHandler_8cpp_source_l00005}{5}} of file \mbox{\hyperlink{PCAHandler_8cpp_source}{PCAHandler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00005\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ ********************************************}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{classPCAHandler_a7f9957719671d1c673c74b5cd003dc76}\label{classPCAHandler_a7f9957719671d1c673c74b5cd003dc76}} 
\index{PCAHandler@{PCAHandler}!````~PCAHandler@{$\sim$PCAHandler}}
\index{````~PCAHandler@{$\sim$PCAHandler}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{$\sim$PCAHandler()}{~PCAHandler()}}
{\footnotesize\ttfamily PCAHandler\+::$\sim$\+PCAHandler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destructor. 



Definition at line \mbox{\hyperlink{PCAHandler_8cpp_source_l00011}{11}} of file \mbox{\hyperlink{PCAHandler_8cpp_source}{PCAHandler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ ********************************************}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classPCAHandler_a361fd5f81ae3bcd915cd598b69e264ba}\label{classPCAHandler_a361fd5f81ae3bcd915cd598b69e264ba}} 
\index{PCAHandler@{PCAHandler}!ConstructPCA@{ConstructPCA}}
\index{ConstructPCA@{ConstructPCA}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{ConstructPCA()}{ConstructPCA()}}
{\footnotesize\ttfamily void PCAHandler\+::\+Construct\+PCA (\begin{DoxyParamCaption}\item[{TMatrix\+DSym $\ast$}]{cov\+Matrix,  }\item[{const int}]{first\+PCAd,  }\item[{const int}]{last\+PCAd,  }\item[{const double}]{eigen\+\_\+thresh,  }\item[{int \&}]{\+\_\+f\+Num\+Par\+PCA }\end{DoxyParamCaption})}



CW\+: Calculate eigen values, prepare transition matrices and remove param based on defined threshold. 



Definition at line \mbox{\hyperlink{PCAHandler_8cpp_source_l00018}{18}} of file \mbox{\hyperlink{PCAHandler_8cpp_source}{PCAHandler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ ********************************************}}
\DoxyCodeLine{00020\ \ \ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}\ =\ firstPCAd;}
\DoxyCodeLine{00021\ \ \ \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}\ =\ lastPCAd;}
\DoxyCodeLine{00022\ \ \ \mbox{\hyperlink{classPCAHandler_afdf5f929fe9211a2ce05f6bab2b8633a}{eigen\_threshold}}\ =\ eigen\_thresh;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \textcolor{comment}{//\ Check\ that\ covariance\ matrix\ exists}}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{if}\ (covMatrix\ ==\ NULL)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}Covariance\ matrix\ for\ has\ not\ yet\ been\ set"{}});}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}Can\ not\ construct\ PCA\ until\ it\ is\ set"{}});}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMaCh3Exception}{MaCh3Exception}}(\_\_FILE\_\_\ ,\ \_\_LINE\_\_\ );}
\DoxyCodeLine{00029\ \ \ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}\ >\ covMatrix-\/>GetNrows()-\/1\ ||\ \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}>covMatrix-\/>GetNrows()-\/1)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}FirstPCAdpar\ and\ LastPCAdpar\ are\ higher\ than\ the\ number\ of\ parameters"{}});}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}first:\ \{\}\ last:\ \{\},\ params:\ \{\}"{}},\ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},\ \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}},\ covMatrix-\/>GetNrows()-\/1);}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMaCh3Exception}{MaCh3Exception}}(\_\_FILE\_\_\ ,\ \_\_LINE\_\_\ );}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}\ <\ 0\ ||\ \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}\ <\ 0)\{}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}FirstPCAdpar\ and\ LastPCAdpar\ are\ less\ than\ 0\ but\ not\ default\ -\/999"{}});}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a61052119a625282d0ec6d4a97adf3ee2}{MACH3LOG\_ERROR}}(\textcolor{stringliteral}{"{}first:\ \{\}\ last:\ \{\}"{}},\ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},\ \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}});}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMaCh3Exception}{MaCh3Exception}}(\_\_FILE\_\_\ ,\ \_\_LINE\_\_\ );}
\DoxyCodeLine{00040\ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}PCAing\ parameters\ \{\}\ through\ \{\}\ inclusive"{}},\ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},\ \mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}});}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordtype}{int}\ numunpcadpars\ =\ covMatrix-\/>GetNrows()-\/(\mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}-\/\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}+1);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ TMatrixDSym\ submat(covMatrix-\/>GetSub(\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},\mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}},\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},\mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}));}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{comment}{//CW:\ Calculate\ how\ many\ eigen\ values\ this\ threshold\ corresponds\ to}}
\DoxyCodeLine{00048\ \ \ TMatrixDSymEigen\ eigen(submat);}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}.ResizeTo(eigen.GetEigenValues());}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}{eigen\_vectors}}.ResizeTo(eigen.GetEigenVectors());}
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}\ =\ eigen.GetEigenValues();}
\DoxyCodeLine{00052\ \ \ \mbox{\hyperlink{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}{eigen\_vectors}}\ =\ eigen.GetEigenVectors();}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordtype}{double}\ sum\ =\ 0;}
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ Loop\ over\ eigen\ values\ and\ sum\ them\ up}}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}.GetNrows();\ ++i)\ \{}
\DoxyCodeLine{00056\ \ \ \ \ sum\ +=\ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}(i);}
\DoxyCodeLine{00057\ \ \ \}}
\DoxyCodeLine{00058\ \ \ \mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}}\ =\ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}.GetNrows();}
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{//CW:\ Now\ go\ through\ again\ and\ see\ how\ many\ eigen\ values\ correspond\ to\ threshold}}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}.GetNrows();\ ++i)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ relative\ size\ of\ the\ eigen\ value}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{double}\ sig\ =\ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}(i)/sum;}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ Check\ against\ the\ threshold}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{if}\ (sig\ <\ \mbox{\hyperlink{classPCAHandler_afdf5f929fe9211a2ce05f6bab2b8633a}{eigen\_threshold}})\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}}\ =\ i;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \}}
\DoxyCodeLine{00069\ \ \ \_fNumParPCA\ =\ numunpcadpars+\mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}};}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{MaCh3Logger_8h_a95fa4dffc648e4c5536c9292c2bdcac3}{MACH3LOG\_INFO}}(\textcolor{stringliteral}{"{}Threshold\ of\ \{\}\ on\ eigen\ values\ relative\ sum\ of\ eigen\ value\ (\{\})\ generates\ \{\}\ eigen\ vectors,\ plus\ we\ have\ \{\}\ unpcad\ pars,\ for\ a\ total\ of\ \{\}"{}},\ \mbox{\hyperlink{classPCAHandler_afdf5f929fe9211a2ce05f6bab2b8633a}{eigen\_threshold}},\ sum,\ \mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}},\ numunpcadpars,\ \_fNumParPCA);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//DB\ Create\ array\ of\ correct\ size\ so\ eigen\_values\ can\ be\ used\ in\ CorrelateSteps}}
\DoxyCodeLine{00073\ \ \ \mbox{\hyperlink{classPCAHandler_a2924386fef0cf65215c51b4f81cdb0d1}{eigen\_values\_master}}\ =\ std::vector<double>(\_fNumParPCA,\ 1.0);}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}};\ i\ <\ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}+\mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}};\ ++i)\ \{\mbox{\hyperlink{classPCAHandler_a2924386fef0cf65215c51b4f81cdb0d1}{eigen\_values\_master}}[i]\ =\ \mbox{\hyperlink{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}{eigen\_values}}(i-\/\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}});\}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{comment}{//\ Now\ construct\ the\ transfer\ matrices}}
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//These\ matrices\ will\ be\ as\ big\ as\ number\ of\ unPCAd\ pars\ plus\ number\ of\ eigenvalues\ kept}}
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{classPCAHandler_a1d9302633ed96ec57fbe26d25cbcee61}{TransferMat}}.ResizeTo(covMatrix-\/>GetNrows(),\ \_fNumParPCA);}
\DoxyCodeLine{00079\ \ \ \mbox{\hyperlink{classPCAHandler_a6f6443a487bb544e6a6e458d86f35f27}{TransferMatT}}.ResizeTo(covMatrix-\/>GetNrows(),\ \_fNumParPCA);}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ Get\ a\ subset\ of\ the\ eigen\ vector\ matrix}}
\DoxyCodeLine{00082\ \ \ TMatrixD\ temp(\mbox{\hyperlink{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}{eigen\_vectors}}.GetSub(0,\ \mbox{\hyperlink{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}{eigen\_vectors}}.GetNrows()-\/1,\ 0,\ \mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}}-\/1));}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//Make\ transfer\ matrix\ which\ is\ two\ blocks\ of\ identity\ with\ a\ block\ of\ the\ PCA\ transfer\ matrix\ in\ between}}
\DoxyCodeLine{00085\ \ \ TMatrixD\ temp2;}
\DoxyCodeLine{00086\ \ \ temp2.ResizeTo(covMatrix-\/>GetNrows(),\ \_fNumParPCA);}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{//First\ set\ the\ whole\ thing\ to\ 0}}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ iRow\ =\ 0;\ iRow\ <\ covMatrix-\/>GetNrows();\ iRow++)\{}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ iCol\ =\ 0;\ iCol\ <\ \_fNumParPCA;\ iCol++)\{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ temp2[iRow][iCol]\ =\ 0;}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//Set\ the\ first\ identity\ block}}
\DoxyCodeLine{00095\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}\ !=\ 0)\{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ iRow\ =\ 0;\ iRow\ <\ \mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}};\ iRow++)\{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ temp2[iRow][iRow]\ =\ 1;}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//Set\ the\ transfer\ matrix\ block\ for\ the\ PCAd\ pars}}
\DoxyCodeLine{00102\ \ \ temp2.SetSub(\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}},temp);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//Set\ the\ second\ identity\ block}}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}\ !=\ covMatrix-\/>GetNrows()-\/1)\{}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ iRow\ =\ 0;iRow\ <\ (covMatrix-\/>GetNrows()-\/1)-\/\mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}};\ iRow++)\{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ temp2[\mbox{\hyperlink{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}{LastPCAdpar}}+1+iRow][\mbox{\hyperlink{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}{FirstPCAdpar}}+\mbox{\hyperlink{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}{nKeptPCApars}}+iRow]\ =\ 1;}
\DoxyCodeLine{00108\ \ \ \ \ \}}
\DoxyCodeLine{00109\ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{classPCAHandler_a1d9302633ed96ec57fbe26d25cbcee61}{TransferMat}}\ =\ temp2;}
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{//\ Copy\ the\ contents}}
\DoxyCodeLine{00113\ \ \ \mbox{\hyperlink{classPCAHandler_a6f6443a487bb544e6a6e458d86f35f27}{TransferMatT}}\ =\ \mbox{\hyperlink{classPCAHandler_a1d9302633ed96ec57fbe26d25cbcee61}{TransferMat}};}
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ And\ then\ transpose}}
\DoxyCodeLine{00115\ \ \ \mbox{\hyperlink{classPCAHandler_a6f6443a487bb544e6a6e458d86f35f27}{TransferMatT}}.T();}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{preprocessor}{\ \ \#ifdef\ DEBUG\_PCA}}
\DoxyCodeLine{00118\ \ \ \textcolor{comment}{//KS:\ Let's\ dump\ all\ useful\ matrices\ to\ properly\ validate\ PCA}}
\DoxyCodeLine{00119\ \ \ DebugPCA(sum,\ temp,\ submat,\ covMatrix-\/>GetNrows());}
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00121\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classPCAHandler_afdf5f929fe9211a2ce05f6bab2b8633a}\label{classPCAHandler_afdf5f929fe9211a2ce05f6bab2b8633a}} 
\index{PCAHandler@{PCAHandler}!eigen\_threshold@{eigen\_threshold}}
\index{eigen\_threshold@{eigen\_threshold}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{eigen\_threshold}{eigen\_threshold}}
{\footnotesize\ttfamily double PCAHandler\+::eigen\+\_\+threshold}



CW\+: Threshold based on which we remove parameters in eigen base. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00064}{64}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}\label{classPCAHandler_a8d95ecb29e091e9b09c5011691516c28}} 
\index{PCAHandler@{PCAHandler}!eigen\_values@{eigen\_values}}
\index{eigen\_values@{eigen\_values}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{eigen\_values}{eigen\_values}}
{\footnotesize\ttfamily TVectorD PCAHandler\+::eigen\+\_\+values}



Eigen value only of particles which are being decomposed. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00051}{51}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_a2924386fef0cf65215c51b4f81cdb0d1}\label{classPCAHandler_a2924386fef0cf65215c51b4f81cdb0d1}} 
\index{PCAHandler@{PCAHandler}!eigen\_values\_master@{eigen\_values\_master}}
\index{eigen\_values\_master@{eigen\_values\_master}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{eigen\_values\_master}{eigen\_values\_master}}
{\footnotesize\ttfamily std\+::vector$<$double$>$ PCAHandler\+::eigen\+\_\+values\+\_\+master}



Eigen values which have dimension equal to \+\_\+f\+Num\+Par\+PCA, and can be used in Correlate\+Steps. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00055}{55}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}\label{classPCAHandler_a3ba9d34343ce0d0eeb4c020fa70486e2}} 
\index{PCAHandler@{PCAHandler}!eigen\_vectors@{eigen\_vectors}}
\index{eigen\_vectors@{eigen\_vectors}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{eigen\_vectors}{eigen\_vectors}}
{\footnotesize\ttfamily TMatrixD PCAHandler\+::eigen\+\_\+vectors}



Eigen vectors only of params which are being decomposed. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00053}{53}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}\label{classPCAHandler_afc00f628b947fd407d05790f4d0eaaec}} 
\index{PCAHandler@{PCAHandler}!FirstPCAdpar@{FirstPCAdpar}}
\index{FirstPCAdpar@{FirstPCAdpar}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{FirstPCAdpar}{FirstPCAdpar}}
{\footnotesize\ttfamily int PCAHandler\+::\+First\+PCAdpar}



Index of the first param that is being decomposed. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00060}{60}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}\label{classPCAHandler_a954eeb975f1d7f9528ed7e027a54b21a}} 
\index{PCAHandler@{PCAHandler}!LastPCAdpar@{LastPCAdpar}}
\index{LastPCAdpar@{LastPCAdpar}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{LastPCAdpar}{LastPCAdpar}}
{\footnotesize\ttfamily int PCAHandler\+::\+Last\+PCAdpar}



Index of the last param that is being decomposed. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00062}{62}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}\label{classPCAHandler_aa39db9118399bebcdb784fe9c9fea458}} 
\index{PCAHandler@{PCAHandler}!nKeptPCApars@{nKeptPCApars}}
\index{nKeptPCApars@{nKeptPCApars}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{nKeptPCApars}{nKeptPCApars}}
{\footnotesize\ttfamily int PCAHandler\+::n\+Kept\+PCApars}



Total number that remained after applying PCA Threshold. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00058}{58}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_a1d9302633ed96ec57fbe26d25cbcee61}\label{classPCAHandler_a1d9302633ed96ec57fbe26d25cbcee61}} 
\index{PCAHandler@{PCAHandler}!TransferMat@{TransferMat}}
\index{TransferMat@{TransferMat}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{TransferMat}{TransferMat}}
{\footnotesize\ttfamily TMatrixD PCAHandler\+::\+Transfer\+Mat}



Matrix used to converting from PCA base to normal base. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00047}{47}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.

\mbox{\Hypertarget{classPCAHandler_a6f6443a487bb544e6a6e458d86f35f27}\label{classPCAHandler_a6f6443a487bb544e6a6e458d86f35f27}} 
\index{PCAHandler@{PCAHandler}!TransferMatT@{TransferMatT}}
\index{TransferMatT@{TransferMatT}!PCAHandler@{PCAHandler}}
\doxysubsubsection{\texorpdfstring{TransferMatT}{TransferMatT}}
{\footnotesize\ttfamily TMatrixD PCAHandler\+::\+Transfer\+MatT}



Matrix used to converting from normal base to PCA base. 



Definition at line \mbox{\hyperlink{PCAHandler_8h_source_l00049}{49}} of file \mbox{\hyperlink{PCAHandler_8h_source}{PCAHandler.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/covariance/\mbox{\hyperlink{PCAHandler_8h}{PCAHandler.\+h}}\item 
/home/runner/work/\+Ma\+Ch3/\+Ma\+Ch3/covariance/\mbox{\hyperlink{PCAHandler_8cpp}{PCAHandler.\+cpp}}\end{DoxyCompactItemize}
