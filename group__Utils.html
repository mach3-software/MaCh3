<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaCh3: Plotting Utility Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="MaCh3.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mach3logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">MaCh3<span id="projectnumber">&#160;1.3.0</span>
   </div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Plotting Utility Functions</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf1329db6e5a742f7dcfa154629c54542"><td class="memItemLeft" align="right" valign="top">TH1D&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Utils.html#gaf1329db6e5a742f7dcfa154629c54542">MaCh3Plotting::TGraphToTH1D</a> (TGraph graph, std::string newName=&quot;&quot;, std::string newTitle=&quot;&quot;)</td></tr>
<tr class="memdesc:gaf1329db6e5a742f7dcfa154629c54542"><td class="mdescLeft">&#160;</td><td class="mdescRight">This handy little function lets you interpret a TGraph as a TH1D.  <br /></td></tr>
<tr class="separator:gaf1329db6e5a742f7dcfa154629c54542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabee3ac13b77811574c1650016e81a229"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Utils.html#gabee3ac13b77811574c1650016e81a229">MaCh3Plotting::TGraphToVector</a> (TGraph graph)</td></tr>
<tr class="memdesc:gabee3ac13b77811574c1650016e81a229"><td class="mdescLeft">&#160;</td><td class="mdescRight">This handy little function lets you interpret a TGraph as a vector containing the same data.  <br /></td></tr>
<tr class="separator:gabee3ac13b77811574c1650016e81a229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30c29bb2cae29751d106bd93dfeaff81"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Utils.html#ga30c29bb2cae29751d106bd93dfeaff81">MaCh3Plotting::TGraphToVector</a> (TGraph2D graph)</td></tr>
<tr class="memdesc:ga30c29bb2cae29751d106bd93dfeaff81"><td class="mdescLeft">&#160;</td><td class="mdescRight">This handy little function lets you interpret a 2d TGraph as a vector containing the same data.  <br /></td></tr>
<tr class="separator:ga30c29bb2cae29751d106bd93dfeaff81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf1329db6e5a742f7dcfa154629c54542" name="gaf1329db6e5a742f7dcfa154629c54542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf1329db6e5a742f7dcfa154629c54542">&#9670;&#160;</a></span>TGraphToTH1D()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TH1D MaCh3Plotting::TGraphToTH1D </td>
          <td>(</td>
          <td class="paramtype">TGraph&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>newTitle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This handy little function lets you interpret a TGraph as a TH1D. </p>
<p>It will go through your provided graph and make a histogram binning by taking the midpoints of all the graph points x values, then fill the histogram with the graphs y values. For the first and last points it will extend the binning out of the graph bounds using the width between the outermost and second outermost points. This can be useful if e.g. you want to draw cumulative stacks of LLH scans.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph</td><td>The graph you want to convert. </td></tr>
    <tr><td class="paramname">newName</td><td>The new name you want to give to the histogram. If not specified, will just use the name of the graph. </td></tr>
    <tr><td class="paramname">newTitle</td><td>The new title you want to give to the histogram. If not specified, will just use the title of the graph. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plottingUtils_8cpp_source.html#l00010">10</a> of file <a class="el" href="plottingUtils_8cpp_source.html">plottingUtils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   10</span>                                                                       {</div>
<div class="line"><span class="lineno">   11</span>  std::string name;</div>
<div class="line"><span class="lineno">   12</span>  std::string title;</div>
<div class="line"><span class="lineno">   13</span> </div>
<div class="line"><span class="lineno">   14</span>  <span class="keywordflow">if</span> (newName == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">   15</span>    name = graph.GetName();</div>
<div class="line"><span class="lineno">   16</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   17</span>    name = newName;</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>  <span class="keywordflow">if</span> (newTitle == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">   20</span>    title = graph.GetTitle();</div>
<div class="line"><span class="lineno">   21</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   22</span>    title = newTitle;</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>  <span class="keywordtype">int</span> nPoints = graph.GetN();</div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">if</span>(nPoints &lt; 2){</div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_define" href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a>(<span class="stringliteral">&quot;Too few points in the graph.&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span>    <span class="keywordflow">throw</span> <a class="code hl_class" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__,__LINE__);</div>
<div class="line"><span class="lineno">   28</span>  }</div>
<div class="line"><span class="lineno">   29</span>  std::vector&lt;double&gt; pointsX(nPoints);</div>
<div class="line"><span class="lineno">   30</span>  std::vector&lt;double&gt; pointsY(nPoints);</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>  <span class="comment">// Get the points out</span></div>
<div class="line"><span class="lineno">   33</span>  Double_t x, y;</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pointId = 0; pointId &lt; nPoints; pointId++)</div>
<div class="line"><span class="lineno">   36</span>  {</div>
<div class="line"><span class="lineno">   37</span>    graph.GetPoint(pointId, x, y);</div>
<div class="line"><span class="lineno">   38</span>    pointsX[pointId] = x;</div>
<div class="line"><span class="lineno">   39</span>    pointsY[pointId] = y;</div>
<div class="line"><span class="lineno">   40</span>  }</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>  <span class="comment">// get the bin edges</span></div>
<div class="line"><span class="lineno">   43</span>  std::vector&lt;double&gt; binEdges(nPoints + 1);</div>
<div class="line"><span class="lineno">   44</span>  binEdges[0] = pointsX[0] - (pointsX[1] - pointsX[0]) / 2.0;</div>
<div class="line"><span class="lineno">   45</span>  binEdges[nPoints] = pointsX[nPoints - 1] + (pointsX[nPoints - 1] - pointsX[nPoints - 2]) / 2.0;</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pointId = 1; pointId &lt; nPoints; pointId++)</div>
<div class="line"><span class="lineno">   48</span>  {</div>
<div class="line"><span class="lineno">   49</span>    <span class="comment">// take the midpoint of the two surrounding points</span></div>
<div class="line"><span class="lineno">   50</span>    binEdges[pointId] = (pointsX[pointId] + pointsX[pointId - 1]) / 2.0;</div>
<div class="line"><span class="lineno">   51</span>  }</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>  TH1D retHist = TH1D(name.c_str(), title.c_str(), nPoints, binEdges.data());</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> binId = 0; binId &lt; nPoints; binId++)</div>
<div class="line"><span class="lineno">   56</span>  {</div>
<div class="line"><span class="lineno">   57</span>    retHist.SetBinContent(binId + 1, pointsY[binId]);</div>
<div class="line"><span class="lineno">   58</span>  }</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  <span class="keywordflow">return</span> retHist;</div>
<div class="line"><span class="lineno">   61</span>}</div>
<div class="ttc" id="aMaCh3Logger_8h_html_a61052119a625282d0ec6d4a97adf3ee2"><div class="ttname"><a href="MaCh3Logger_8h.html#a61052119a625282d0ec6d4a97adf3ee2">MACH3LOG_ERROR</a></div><div class="ttdeci">#define MACH3LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Logger_8h_source.html#l00018">MaCh3Logger.h:18</a></div></div>
<div class="ttc" id="aclassMaCh3Exception_html"><div class="ttname"><a href="classMaCh3Exception.html">MaCh3Exception</a></div><div class="ttdoc">Custom exception class for MaCh3 errors.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Exception_8h_source.html#l00012">MaCh3Exception.h:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabee3ac13b77811574c1650016e81a229" name="gabee3ac13b77811574c1650016e81a229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabee3ac13b77811574c1650016e81a229">&#9670;&#160;</a></span>TGraphToVector() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; double &gt; &gt; MaCh3Plotting::TGraphToVector </td>
          <td>(</td>
          <td class="paramtype">TGraph&#160;</td>
          <td class="paramname"><em>graph</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This handy little function lets you interpret a TGraph as a vector containing the same data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph</td><td>The graph you want to convert. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of vectors containing the data from the initial graph. The first vector is the x axis, the 2nd the y axis </dd></dl>

<p class="definition">Definition at line <a class="el" href="plottingUtils_8cpp_source.html#l00064">64</a> of file <a class="el" href="plottingUtils_8cpp_source.html">plottingUtils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   64</span>                                                          {</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordtype">int</span> nPoints = graph.GetN();</div>
<div class="line"><span class="lineno">   67</span>  std::vector&lt;std::vector&lt;double&gt;&gt; ret(2);</div>
<div class="line"><span class="lineno">   68</span>  std::vector&lt;double&gt; pointsX(nPoints);</div>
<div class="line"><span class="lineno">   69</span>  std::vector&lt;double&gt; pointsY(nPoints);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>  <span class="comment">// Get the points out</span></div>
<div class="line"><span class="lineno">   72</span>  Double_t x, y;</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pointId = 0; pointId &lt; nPoints; pointId++)</div>
<div class="line"><span class="lineno">   75</span>  {</div>
<div class="line"><span class="lineno">   76</span>    graph.GetPoint(pointId, x, y);</div>
<div class="line"><span class="lineno">   77</span>    pointsX[pointId] = x;</div>
<div class="line"><span class="lineno">   78</span>    pointsY[pointId] = y;</div>
<div class="line"><span class="lineno">   79</span>  }</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>  ret[0] = pointsX;</div>
<div class="line"><span class="lineno">   82</span>  ret[1] = pointsY;</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">   85</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga30c29bb2cae29751d106bd93dfeaff81" name="ga30c29bb2cae29751d106bd93dfeaff81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30c29bb2cae29751d106bd93dfeaff81">&#9670;&#160;</a></span>TGraphToVector() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; double &gt; &gt; MaCh3Plotting::TGraphToVector </td>
          <td>(</td>
          <td class="paramtype">TGraph2D&#160;</td>
          <td class="paramname"><em>graph</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This handy little function lets you interpret a 2d TGraph as a vector containing the same data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph</td><td>The graph you want to convert. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of vectors containing the data from the initial graph. The first vector is the x axis, the 2nd the y axis, the 3rd is the z axis </dd></dl>

<p class="definition">Definition at line <a class="el" href="plottingUtils_8cpp_source.html#l00088">88</a> of file <a class="el" href="plottingUtils_8cpp_source.html">plottingUtils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>                                                            {</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordtype">int</span> nPoints = graph.GetN();</div>
<div class="line"><span class="lineno">   91</span>  std::vector&lt;std::vector&lt;double&gt;&gt; ret(3);</div>
<div class="line"><span class="lineno">   92</span>  std::vector&lt;double&gt; pointsX(nPoints);</div>
<div class="line"><span class="lineno">   93</span>  std::vector&lt;double&gt; pointsY(nPoints);</div>
<div class="line"><span class="lineno">   94</span>  std::vector&lt;double&gt; pointsZ(nPoints);</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>  <span class="comment">// Get the points out</span></div>
<div class="line"><span class="lineno">   97</span>  Double_t x, y, z;</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pointId = 0; pointId &lt; nPoints; pointId++)</div>
<div class="line"><span class="lineno">  100</span>  {</div>
<div class="line"><span class="lineno">  101</span>    graph.GetPoint(pointId, x, y, z);</div>
<div class="line"><span class="lineno">  102</span>    pointsX[pointId] = x;</div>
<div class="line"><span class="lineno">  103</span>    pointsY[pointId] = y;</div>
<div class="line"><span class="lineno">  104</span>    pointsZ[pointId] = z;</div>
<div class="line"><span class="lineno">  105</span>  }</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>  ret[0] = pointsX;</div>
<div class="line"><span class="lineno">  108</span>  ret[1] = pointsY;</div>
<div class="line"><span class="lineno">  109</span>  ret[2] = pointsZ;</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  112</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
