<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaCh3: /hosthome/v2.1.0/python/splines.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="MaCh3.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mach3logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MaCh3
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_abce92e5f6d3eeff39dff8d05ee3c623.html">hosthome</a></li><li class="navelem"><a class="el" href="dir_2b6e6d7aedbeba199c2c4d387cea8759.html">v2.1.0</a></li><li class="navelem"><a class="el" href="dir_d34a2f6c94e09fe27657d70b092bb4a1.html">python</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">splines.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="splines_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// pybind includes</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;pybind11/pybind11.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;pybind11/stl.h&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;pybind11/numpy.h&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// MaCh3 includes</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SplineBase_8h.html">Splines/SplineBase.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SplineMonolith_8h.html">Splines/SplineMonolith.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SplineStructs_8h.html">Splines/SplineStructs.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SampleStructs_8h.html">Samples/SampleStructs.h</a>&quot;</span> <span class="comment">// &lt;- The spline stuff that&#39;s in here should really be moved to splineStructs.h but I ain&#39;t doing that right now</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// ROOT includes</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;TSpline.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wuseless-cast&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wfloat-conversion&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span>py = pybind11;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classPySplineBase.html">   19</a></span>&#160;<span class="keyword">class </span><a class="code" href="classPySplineBase.html">PySplineBase</a> : <span class="keyword">public</span> <a class="code" href="classSplineBase.html">SplineBase</a> {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">/* Inherit the constructors */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keyword">using</span> <a class="code" href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase::SplineBase</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="comment">/* Trampoline (need one for each virtual function) */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="classPySplineBase.html#ac8983b9afd657019c3fef533e91f4933">   25</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classPySplineBase.html#ac8983b9afd657019c3fef533e91f4933">Evaluate</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        PYBIND11_OVERRIDE_PURE_NAME(</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            <span class="keywordtype">void</span>,        <span class="comment">/* Return type */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;            <a class="code" href="classSplineBase.html">SplineBase</a>,  <span class="comment">/* Parent class */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            <span class="stringliteral">&quot;evaluate&quot;</span>,  <span class="comment">/* Name in python*/</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            <a class="code" href="classPySplineBase.html#ac8983b9afd657019c3fef533e91f4933">Evaluate</a>     <span class="comment">/* Name of function in C++ (must match Python name) */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        );</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classPySplineBase.html#a00fe8ae11d3ca09811cfcf8affd66262">   34</a></span>&#160;    std::string <a class="code" href="classPySplineBase.html#a00fe8ae11d3ca09811cfcf8affd66262">GetName</a>()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        PYBIND11_OVERRIDE_NAME(</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            std::string, <span class="comment">/* Return type */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <a class="code" href="classSplineBase.html">SplineBase</a>,  <span class="comment">/* Parent class */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            <span class="stringliteral">&quot;get_name&quot;</span>,  <span class="comment">/* Name in python*/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <a class="code" href="classPySplineBase.html#a00fe8ae11d3ca09811cfcf8affd66262">GetName</a>      <span class="comment">/* Name of function in C++ (must match Python name) */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        );</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    }</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classPySplineBase.html#a0589f9189764287f84b61b89fc1a4c1f">   43</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classPySplineBase.html#a0589f9189764287f84b61b89fc1a4c1f">FindSplineSegment</a>() {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        PYBIND11_OVERRIDE_PURE_NAME(</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <span class="keywordtype">void</span>,             <span class="comment">/* Return type */</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            <a class="code" href="classSplineBase.html">SplineBase</a>,       <span class="comment">/* Parent class */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="stringliteral">&quot;find_segment&quot;</span>,   <span class="comment">/* Name in python*/</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <a class="code" href="classPySplineBase.html#a0589f9189764287f84b61b89fc1a4c1f">FindSplineSegment</a> <span class="comment">/* Name of function in C++ (must match Python name) */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        );</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classPySplineBase.html#a19f9f443bcc72d5d038a822a088bc036">   52</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classPySplineBase.html#a19f9f443bcc72d5d038a822a088bc036">CalcSplineWeights</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        PYBIND11_OVERRIDE_PURE_NAME(</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <span class="keywordtype">void</span>,                <span class="comment">/* Return type */</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <a class="code" href="classSplineBase.html">SplineBase</a>,          <span class="comment">/* Parent class */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <span class="stringliteral">&quot;calculate_weights&quot;</span>, <span class="comment">/* Name in python*/</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <a class="code" href="classPySplineBase.html#a19f9f443bcc72d5d038a822a088bc036">CalcSplineWeights</a>    <span class="comment">/* Name of function in C++ (must match Python name) */</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        );</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classPySplineBase.html#ac7361b35ea190c2a88487f2bb6a92305">   61</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classPySplineBase.html#ac7361b35ea190c2a88487f2bb6a92305">ModifyWeights</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        PYBIND11_OVERRIDE_PURE_NAME(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keywordtype">void</span>,             <span class="comment">/* Return type */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <a class="code" href="classSplineBase.html">SplineBase</a>,       <span class="comment">/* Parent class */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="stringliteral">&quot;modify_weights&quot;</span>, <span class="comment">/* Name in python*/</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <a class="code" href="classPySplineBase.html#ac7361b35ea190c2a88487f2bb6a92305">ModifyWeights</a>     <span class="comment">/* Name of function in C++ (must match Python name) */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        );</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="pyMaCh3_8cpp.html#a9602836ac8939de301ca4d9e696d6e7c">   72</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="splines_8cpp.html#ac852d821e532f068df6194c6da0a7ad5">initSplines</a>(py::module &amp;m){</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">auto</span> m_splines = m.def_submodule(<span class="stringliteral">&quot;splines&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    m_splines.doc() = </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="stringliteral">&quot;This is a Python binding of MaCh3s C++ based spline library.&quot;</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Bind the interpolation type enum that lets us set different interpolation types for our splines</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    py::enum_&lt;SplineInterpolation&gt;(m_splines, <span class="stringliteral">&quot;InterpolationType&quot;</span>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            .value(<span class="stringliteral">&quot;Linear&quot;</span>, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4ac188c019178783e5be55110601309d7d">SplineInterpolation::kLinear</a>, <span class="stringliteral">&quot;Linear interpolation between the knots&quot;</span>)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            .value(<span class="stringliteral">&quot;Linear_Func&quot;</span>, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4ade75212a78a5cf860f84473a80355f42">SplineInterpolation::kLinearFunc</a>, <span class="stringliteral">&quot;Same as &#39;Linear&#39;&quot;</span>)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            .value(<span class="stringliteral">&quot;Cubic_TSpline3&quot;</span>, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4a56c886e7b34c938027a7140748999c8a">SplineInterpolation::kTSpline3</a>, <span class="stringliteral">&quot;Use same coefficients as `ROOT&#39;s TSpline3 &lt;https://root.cern.ch/doc/master/classTSpline3.html&gt;`_ implementation&quot;</span>)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            .value(<span class="stringliteral">&quot;Cubic_Monotonic&quot;</span>, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4a68f4b10c9689389fd8fea39dc6c097d3">SplineInterpolation::kMonotonic</a>, <span class="stringliteral">&quot;Coefficients are calculated such that the segments between knots are forced to be monotonic. The implementation we use is based on `this method &lt;https://www.jstor.org/stable/2156610&gt;`_ by Fritsch and Carlson.&quot;</span>)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            .value(<span class="stringliteral">&quot;Cubic_Akima&quot;</span>, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4afe5701215b64da0194c6fead25edd976">SplineInterpolation::kAkima</a>, <span class="stringliteral">&quot;The second derivative is not required to be continuous at the knots. This means that these splines are useful if the second derivative is rapidly varying. The implementation we used is based on `this paper &lt;http://www.leg.ufpr.br/lib/exe/fetch.php/wiki:internas:biblioteca:akima.pdf&gt;`_ by Akima.&quot;</span>)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            .value(<span class="stringliteral">&quot;N_Interpolation_Types&quot;</span>, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4a9e1a345912f2baebd863ab7d40c9ab7b">SplineInterpolation::kSplineInterpolations</a>, <span class="stringliteral">&quot;This is only to be used when iterating and is not a valid interpolation type.&quot;</span>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    py::class_&lt;<a class="code" href="classSplineBase.html">SplineBase</a>, <a class="code" href="classPySplineBase.html">PySplineBase</a> <span class="comment">/* &lt;--- trampoline*/</span>&gt;(m_splines, <span class="stringliteral">&quot;SplineBase&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    py::class_&lt;TResponseFunction_red&gt;(m_splines, <span class="stringliteral">&quot;_ResponseFunctionBase&quot;</span>)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        .doc() = <span class="stringliteral">&quot;Base class of the response function, this binding only exists for consistency with the inheritance structure of the c++ code. Just pretend it doesn&#39;t exist and don&#39;t worry about it...&quot;</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Bind the TSpline3_red class. Decided to go with a clearer name of ResponseFunction for the python binding</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// and make the interface a bit more python-y. Additionally remove passing root stuff so we don&#39;t need to deal </span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// with root python binding and can just pass it native python objects.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    py::class_&lt;TSpline3_red, TResponseFunction_red, std::unique_ptr&lt;TSpline3_red, py::nodelete&gt;&gt;(m_splines, <span class="stringliteral">&quot;ResponseFunction&quot;</span>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        .def(</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="comment">// define a more python friendly constructor that massages the inputs and passes them</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="comment">// through to the c++ constructor</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            py::init</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            (</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="comment">// Just take in some vectors, then build a TSpline3 and pass this to the constructor</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                [](std::vector&lt;double&gt; &amp;xVals, std::vector&lt;double&gt; &amp;yVals, <a class="code" href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4">SplineInterpolation</a> interpType)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    <span class="keywordflow">if</span> ( xVals.size() != yVals.size() )</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                        throw MaCh3Exception(__FILE__, __LINE__, <span class="stringliteral">&quot;Different number of x values and y values!&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    <span class="keywordtype">int</span> length = <span class="keywordtype">int</span>(xVals.size());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    if (length == 1)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> xKnot = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(xVals[0]);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                        <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a> yKnot = <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(yVals[0]);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        std::vector&lt;M3::float_t *&gt; pars;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        pars.resize(3);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        pars[0] = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(0.0);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        pars[1] = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(0.0);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        pars[2] = <span class="keyword">new</span> <a class="code" href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a>(0.0);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                        <span class="keyword">delete</span> pars[0];</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        <span class="keyword">delete</span> pars[1];</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                        <span class="keyword">delete</span> pars[2];</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classTSpline3__red.html">TSpline3_red</a>(&amp;xKnot, &amp;yKnot, 1, pars.data());</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    TSpline3 *splineTmp = <span class="keyword">new</span> TSpline3( <span class="stringliteral">&quot;spline_tmp&quot;</span>, xVals.data(), yVals.data(), length );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classTSpline3__red.html">TSpline3_red</a>(splineTmp, interpType);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            )</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        )</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        .def(</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="stringliteral">&quot;find_segment&quot;</span>, </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            &amp;<a class="code" href="classTSpline3__red.html#a39668a1dc14058a1f833e9621ec19caf">TSpline3_red::FindX</a>, </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="stringliteral">&quot;Find the segment that a particular *value* lies in. \n&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="stringliteral">&quot;:param value: The value to test&quot;</span>,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            py::arg(<span class="stringliteral">&quot;value&quot;</span>)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        )</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        .def(</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="stringliteral">&quot;evaluate&quot;</span>,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            &amp;<a class="code" href="classTSpline3__red.html#a12bb3549bacb76c7d04ee303c4abe389">TSpline3_red::Eval</a>,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="stringliteral">&quot;Evaluate the response function at a particular *value*. \n&quot;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="stringliteral">&quot;:param value: The value to evaluate at.&quot;</span>,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            py::arg(<span class="stringliteral">&quot;value&quot;</span>)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        )</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    ; <span class="comment">// End of binding for ResponseFunction</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    py::class_&lt;SMonolith, SplineBase&gt;(m_splines, <span class="stringliteral">&quot;EventSplineMonolith&quot;</span>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        .def(</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            py::init(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                [](std::vector&lt;std::vector&lt;TResponseFunction_red*&gt;&gt; &amp;responseFns, <span class="keyword">const</span> <span class="keywordtype">bool</span> saveFlatTree)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    std::vector&lt;RespFuncType&gt; respFnTypes;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    <span class="keywordflow">for</span>(uint i = 0; i &lt; responseFns[0].size(); i++)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                        <span class="comment">// ** WARNING **</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        <span class="comment">// Right now I&#39;m only pushing back TSpline3_reds as that&#39;s all that&#39;s supported right now</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        <span class="comment">// In the future there might be more</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        <span class="comment">// I think what would be best to do would be to store the interpolation type somehow in the ResponseFunction objects</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                        <span class="comment">// then just read them here and pass through to the constructor</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        respFnTypes.push_back(<a class="code" href="ParameterStructs_8h.html#a6a73aa1ad819973a9c421c17c2a7f36da8bea6994e011cc85a5a88b50c97ce7b2">RespFuncType::kTSpline3_red</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classSMonolith.html">SMonolith</a>(responseFns, respFnTypes, saveFlatTree);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            ),</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="stringliteral">&quot;Create an EventSplineMonolith \n&quot;</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="stringliteral">&quot;:param master_splines: These are the &#39;knot&#39; values to make splines from. This should be an P x E 2D list where P is the number of parameters and E is the number of events. \n&quot;</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="stringliteral">&quot;:param save_flat_tree: Whether we want to save monolith into speedy flat tree&quot;</span>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            py::arg(<span class="stringliteral">&quot;master_splines&quot;</span>),</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            py::arg(<span class="stringliteral">&quot;save_flat_tree&quot;</span>) = false</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        )</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        .def(</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            py::init&lt;std::string&gt;(),</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="stringliteral">&quot;Constructor where you pass path to preprocessed root FileName which is generated by creating an EventSplineMonolith with the `save_flat_tree` flag set to True. \n&quot;</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="stringliteral">&quot;:param file_name: The name of the file to read from.&quot;</span>,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            py::arg(<span class="stringliteral">&quot;file_name&quot;</span>)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        )</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        .def(</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="stringliteral">&quot;evaluate&quot;</span>,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            &amp;<a class="code" href="classSMonolith.html#a3d1128bb78b165d94721407a124f516b">SMonolith::Evaluate</a>,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="stringliteral">&quot;Evaluate the splines at their current values.&quot;</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        )</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        .def(</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="stringliteral">&quot;sync_mem_transfer&quot;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            &amp;<a class="code" href="classSMonolith.html#a68e18d73ed1ac524ceaea79d2a5460ce">SMonolith::SynchroniseMemTransfer</a>,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="stringliteral">&quot;This is important when running on GPU. After calculations are done on GPU we copy memory to CPU. This operation is asynchronous meaning while memory is being copied some operations are being carried. Memory must be copied before actual reweight. This function make sure all has been copied.&quot;</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        )</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        .def(</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="stringliteral">&quot;get_event_weight&quot;</span>,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            &amp;<a class="code" href="classSMonolith.html#a80a8b4afea2815cf3bbf29342df7dfd5">SMonolith::retPointer</a>,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            py::return_value_policy::reference,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="stringliteral">&quot;Get the weight of a particular event. \n&quot;</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="stringliteral">&quot;:param event: The index of the event whose weight you would like.&quot;</span>,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            py::arg(<span class="stringliteral">&quot;event&quot;</span>)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        )</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        .def(</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="stringliteral">&quot;set_param_value_array&quot;</span>,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="comment">// Wrap up the setSplinePointers method so that we can take in a numpy array and get </span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">// pointers to it&#39;s sweet sweet data and use those pointers in the splineMonolith </span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            [](<a class="code" href="classSMonolith.html">SMonolith</a> &amp;<span class="keyword">self</span>, py::array_t&lt;double, py::array::c_style&gt; &amp;array)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                py::buffer_info bufInfo = array.request();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordflow">if</span> ( bufInfo.ndim != 1)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__, <span class="stringliteral">&quot;Number of dimensions in parameter array must be one!&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">if</span> ( bufInfo.shape[0] != <span class="keyword">self</span>.GetNParams() )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    <span class="keywordflow">throw</span> <a class="code" href="classMaCh3Exception.html">MaCh3Exception</a>(__FILE__, __LINE__, <span class="stringliteral">&quot;Number of entries in parameter array must equal the number of parameters!&quot;</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                std::vector&lt;const double *&gt; paramVec;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                paramVec.resize(<span class="keyword">self</span>.GetNParams());</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx = 0; idx &lt; <span class="keyword">self</span>.GetNParams(); idx++ )</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="comment">// booooo pointer arithmetic</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    paramVec[idx] = array.data() + idx;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                } </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="keyword">self</span>.setSplinePointers(paramVec);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            },</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="stringliteral">&quot;Set the array that the monolith should use to read parameter values from. \n&quot;</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="stringliteral">&quot;Usage of this might vary a bit from what you&#39;re used to in python. \n&quot;</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="stringliteral">&quot;Rather than just setting the values here, what you&#39;re really doing is setting pointers in the underlying c++ code. \n&quot;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="stringliteral">&quot;What that means is that you pass an array to this function like:: \n&quot;</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="stringliteral">&quot;\n event_spline_monolith_instance.set_param_value_array(array) \n\n&quot;</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="stringliteral">&quot;Then when you set values in that array as normal, they will also be updated inside of the event_spline_monolith_instance.&quot;</span>,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            py::arg(<span class="stringliteral">&quot;array&quot;</span>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        )</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        .doc() = <span class="stringliteral">&quot;This &#39;monolith&#39; deals with event by event weighting using splines.&quot;</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    ; <span class="comment">// End of binding for EventSplineMonolith</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4">SplineInterpolation</a></div><div class="ttdeci">SplineInterpolation</div><div class="ttdoc">Make an enum of the spline interpolation type.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00227">ParameterStructs.h:227</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4a56c886e7b34c938027a7140748999c8a"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4a56c886e7b34c938027a7140748999c8a">kTSpline3</a></div><div class="ttdeci">@ kTSpline3</div><div class="ttdoc">Default TSpline3 interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00228">ParameterStructs.h:228</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4a68f4b10c9689389fd8fea39dc6c097d3"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4a68f4b10c9689389fd8fea39dc6c097d3">kMonotonic</a></div><div class="ttdeci">@ kMonotonic</div><div class="ttdoc">EM: DOES NOT make the entire spline monotonic, only the segments.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00230">ParameterStructs.h:230</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4a9e1a345912f2baebd863ab7d40c9ab7b"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4a9e1a345912f2baebd863ab7d40c9ab7b">kSplineInterpolations</a></div><div class="ttdeci">@ kSplineInterpolations</div><div class="ttdoc">This only enumerates.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00234">ParameterStructs.h:233</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4ac188c019178783e5be55110601309d7d"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4ac188c019178783e5be55110601309d7d">kLinear</a></div><div class="ttdeci">@ kLinear</div><div class="ttdoc">Linear interpolation between knots.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00229">ParameterStructs.h:229</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4ade75212a78a5cf860f84473a80355f42"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4ade75212a78a5cf860f84473a80355f42">kLinearFunc</a></div><div class="ttdeci">@ kLinearFunc</div><div class="ttdoc">Liner interpolation using TF1 not spline.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00232">ParameterStructs.h:232</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6720d732608767153550aebebcf8fbf4afe5701215b64da0194c6fead25edd976"><div class="ttname"><a href="ParameterStructs_8h.html#a6720d732608767153550aebebcf8fbf4afe5701215b64da0194c6fead25edd976">kAkima</a></div><div class="ttdeci">@ kAkima</div><div class="ttdoc">EM: Akima spline iis allowed to be discontinuous in 2nd derivative and coefficients in any segment.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00231">ParameterStructs.h:231</a></div></div>
<div class="ttc" id="aParameterStructs_8h_html_a6a73aa1ad819973a9c421c17c2a7f36da8bea6994e011cc85a5a88b50c97ce7b2"><div class="ttname"><a href="ParameterStructs_8h.html#a6a73aa1ad819973a9c421c17c2a7f36da8bea6994e011cc85a5a88b50c97ce7b2">kTSpline3_red</a></div><div class="ttdeci">@ kTSpline3_red</div><div class="ttdoc">Uses TSpline3_red for interpolation.</div><div class="ttdef"><b>Definition:</b> <a href="ParameterStructs_8h_source.html#l00221">ParameterStructs.h:221</a></div></div>
<div class="ttc" id="aSampleStructs_8h_html"><div class="ttname"><a href="SampleStructs_8h.html">SampleStructs.h</a></div></div>
<div class="ttc" id="aSplineBase_8h_html"><div class="ttname"><a href="SplineBase_8h.html">SplineBase.h</a></div></div>
<div class="ttc" id="aSplineMonolith_8h_html"><div class="ttname"><a href="SplineMonolith_8h.html">SplineMonolith.h</a></div></div>
<div class="ttc" id="aSplineStructs_8h_html"><div class="ttname"><a href="SplineStructs_8h.html">SplineStructs.h</a></div><div class="ttdoc">Contains structures and helper functions for handling spline representations of systematic parameters...</div></div>
<div class="ttc" id="aclassMaCh3Exception_html"><div class="ttname"><a href="classMaCh3Exception.html">MaCh3Exception</a></div><div class="ttdoc">Custom exception class for MaCh3 errors.</div><div class="ttdef"><b>Definition:</b> <a href="MaCh3Exception_8h_source.html#l00013">MaCh3Exception.h:13</a></div></div>
<div class="ttc" id="aclassPySplineBase_html"><div class="ttname"><a href="classPySplineBase.html">PySplineBase</a></div><div class="ttdoc">EW: As SplineBase is an abstract base class we have to do some gymnastics to get it to get it into py...</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00019">splines.cpp:19</a></div></div>
<div class="ttc" id="aclassPySplineBase_html_a00fe8ae11d3ca09811cfcf8affd66262"><div class="ttname"><a href="classPySplineBase.html#a00fe8ae11d3ca09811cfcf8affd66262">PySplineBase::GetName</a></div><div class="ttdeci">std::string GetName() const override</div><div class="ttdoc">Get class name.</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00034">splines.cpp:34</a></div></div>
<div class="ttc" id="aclassPySplineBase_html_a0589f9189764287f84b61b89fc1a4c1f"><div class="ttname"><a href="classPySplineBase.html#a0589f9189764287f84b61b89fc1a4c1f">PySplineBase::FindSplineSegment</a></div><div class="ttdeci">void FindSplineSegment()</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00043">splines.cpp:43</a></div></div>
<div class="ttc" id="aclassPySplineBase_html_a19f9f443bcc72d5d038a822a088bc036"><div class="ttname"><a href="classPySplineBase.html#a19f9f443bcc72d5d038a822a088bc036">PySplineBase::CalcSplineWeights</a></div><div class="ttdeci">void CalcSplineWeights() override</div><div class="ttdoc">CPU based code which eval weight for each spline.</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00052">splines.cpp:52</a></div></div>
<div class="ttc" id="aclassPySplineBase_html_ac7361b35ea190c2a88487f2bb6a92305"><div class="ttname"><a href="classPySplineBase.html#ac7361b35ea190c2a88487f2bb6a92305">PySplineBase::ModifyWeights</a></div><div class="ttdeci">void ModifyWeights() override</div><div class="ttdoc">Calc total event weight.</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00061">splines.cpp:61</a></div></div>
<div class="ttc" id="aclassPySplineBase_html_ac8983b9afd657019c3fef533e91f4933"><div class="ttname"><a href="classPySplineBase.html#ac8983b9afd657019c3fef533e91f4933">PySplineBase::Evaluate</a></div><div class="ttdeci">void Evaluate() override</div><div class="ttdoc">CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; proba...</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00025">splines.cpp:25</a></div></div>
<div class="ttc" id="aclassSMonolith_html"><div class="ttname"><a href="classSMonolith.html">SMonolith</a></div><div class="ttdoc">Even-by-event class calculating response for spline parameters. It is possible to use GPU acceleratio...</div><div class="ttdef"><b>Definition:</b> <a href="SplineMonolith_8h_source.html#l00012">SplineMonolith.h:12</a></div></div>
<div class="ttc" id="aclassSMonolith_html_a3d1128bb78b165d94721407a124f516b"><div class="ttname"><a href="classSMonolith.html#a3d1128bb78b165d94721407a124f516b">SMonolith::Evaluate</a></div><div class="ttdeci">void Evaluate() override</div><div class="ttdoc">CW: This Eval should be used when using two separate x,{y,a,b,c,d} arrays to store the weights; proba...</div><div class="ttdef"><b>Definition:</b> <a href="SplineMonolith_8cpp_source.html#l00832">SplineMonolith.cpp:832</a></div></div>
<div class="ttc" id="aclassSMonolith_html_a68e18d73ed1ac524ceaea79d2a5460ce"><div class="ttname"><a href="classSMonolith.html#a68e18d73ed1ac524ceaea79d2a5460ce">SMonolith::SynchroniseMemTransfer</a></div><div class="ttdeci">void SynchroniseMemTransfer()</div><div class="ttdoc">KS: After calculations are done on GPU we copy memory to CPU. This operation is asynchronous meaning ...</div><div class="ttdef"><b>Definition:</b> <a href="SplineMonolith_8cpp_source.html#l00997">SplineMonolith.cpp:997</a></div></div>
<div class="ttc" id="aclassSMonolith_html_a80a8b4afea2815cf3bbf29342df7dfd5"><div class="ttname"><a href="classSMonolith.html#a80a8b4afea2815cf3bbf29342df7dfd5">SMonolith::retPointer</a></div><div class="ttdeci">const float * retPointer(const int event)</div><div class="ttdoc">KS: Get pointer to total weight to make fit faster wrooom!</div><div class="ttdef"><b>Definition:</b> <a href="SplineMonolith_8h_source.html#l00039">SplineMonolith.h:39</a></div></div>
<div class="ttc" id="aclassSplineBase_html"><div class="ttname"><a href="classSplineBase.html">SplineBase</a></div><div class="ttdoc">Base class for calculating weight from spline.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8h_source.html#l00025">SplineBase.h:25</a></div></div>
<div class="ttc" id="aclassSplineBase_html_aa6965d1522cc68ecf81ac3bfd2dcd6f1"><div class="ttname"><a href="classSplineBase.html#aa6965d1522cc68ecf81ac3bfd2dcd6f1">SplineBase::SplineBase</a></div><div class="ttdeci">SplineBase()</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="SplineBase_8cpp_source.html#l00007">SplineBase.cpp:7</a></div></div>
<div class="ttc" id="aclassTSpline3__red_html"><div class="ttname"><a href="classTSpline3__red.html">TSpline3_red</a></div><div class="ttdoc">CW: Reduced TSpline3 class.</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00267">SplineStructs.h:267</a></div></div>
<div class="ttc" id="aclassTSpline3__red_html_a12bb3549bacb76c7d04ee303c4abe389"><div class="ttname"><a href="classTSpline3__red.html#a12bb3549bacb76c7d04ee303c4abe389">TSpline3_red::Eval</a></div><div class="ttdeci">double Eval(double var) override</div><div class="ttdoc">CW: Evaluate the weight from a variation.</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00631">SplineStructs.h:631</a></div></div>
<div class="ttc" id="aclassTSpline3__red_html_a39668a1dc14058a1f833e9621ec19caf"><div class="ttname"><a href="classTSpline3__red.html#a39668a1dc14058a1f833e9621ec19caf">TSpline3_red::FindX</a></div><div class="ttdeci">int FindX(double x)</div><div class="ttdoc">Find the segment relevant to this variation in x See root/hist/hist/src/TSpline3::FindX(double) or sa...</div><div class="ttdef"><b>Definition:</b> <a href="SplineStructs_8h_source.html#l00597">SplineStructs.h:597</a></div></div>
<div class="ttc" id="anamespaceM3_html_a1f95274549f25fc19fe7db343c8a7a68"><div class="ttname"><a href="namespaceM3.html#a1f95274549f25fc19fe7db343c8a7a68">M3::float_t</a></div><div class="ttdeci">double float_t</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00028">Core.h:28</a></div></div>
<div class="ttc" id="asplines_8cpp_html_ac852d821e532f068df6194c6da0a7ad5"><div class="ttname"><a href="splines_8cpp.html#ac852d821e532f068df6194c6da0a7ad5">initSplines</a></div><div class="ttdeci">void initSplines(py::module &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="splines_8cpp_source.html#l00072">splines.cpp:72</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<footer class="mach3-footer" style="text-align: center;">
    <div style="margin-bottom: 15px;">
        <span style="font-weight: bold;">The MaCh3 Collaboration</span>
    </div>
    <div style="margin-bottom: 10px;">
        <span>Select Software Version: </span>
        <select id="versionSelector" onchange="window.location.href=this.value" style="padding: 5px; border-radius: 4px; border: 1px solid #ccc;">
            <option value="">-- Select --</option>
            <option value="https://mach3-software.github.io/MaCh3/">develop</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.2.0/index.html">v2.2.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.1.0/index.html">v2.1.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v2.0.0/index.html">v2.0.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.5.0/index.html">v1.5.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.4.0/index.html">v1.4.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.3.0/index.html">v1.3.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.2.0/index.html">v1.2.0</option>
            <option value="https://mach3-software.github.io/MaCh3/.Archive/v1.1.0/index.html">v1.1.0</option>
        </select>
    </div>
    <div style="font-size: 0.9em; color: #666; margin-top: 10px;">
        Documentation generated with <a href="https://www.doxygen.nl/" target="_blank" style="color: #666;">Doxygen</a>
    </div>
</footer>
